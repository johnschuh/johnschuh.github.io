{"version":3,"file":"js/app.e77c89e7.js","mappings":"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","sources":["webpack://townsquare/./src/assets/editions/ sync ^\\.\\/.*\\.webp$","webpack://townsquare/./src/assets/icons/ sync ^\\.\\/.*\\.webp$","webpack://townsquare/./src/App.vue?82d8","webpack://townsquare/./src/components/TownSquare.vue?cd27","webpack://townsquare/./src/components/Player.vue?a0d3","webpack://townsquare/./src/components/Token.vue?5397","webpack://townsquare/src/components/Token.vue","webpack://townsquare/./src/components/Token.vue?e802","webpack://townsquare/./src/components/Token.vue","webpack://townsquare/src/components/Player.vue","webpack://townsquare/./src/components/Player.vue?a595","webpack://townsquare/./src/components/Player.vue","webpack://townsquare/./src/components/Storyteller.vue?1ad8","webpack://townsquare/src/components/Storyteller.vue","webpack://townsquare/./src/components/Storyteller.vue?4a2a","webpack://townsquare/./src/components/Storyteller.vue","webpack://townsquare/./src/components/modals/ReminderModal.vue?28c0","webpack://townsquare/./src/components/modals/Modal.vue?d2f0","webpack://townsquare/src/components/modals/Modal.vue","webpack://townsquare/./src/components/modals/Modal.vue?cbf6","webpack://townsquare/./src/components/modals/Modal.vue","webpack://townsquare/src/components/modals/ReminderModal.vue","webpack://townsquare/./src/components/modals/ReminderModal.vue?066f","webpack://townsquare/./src/components/modals/ReminderModal.vue","webpack://townsquare/./src/components/modals/RoleModal.vue?7aaf","webpack://townsquare/src/components/modals/RoleModal.vue","webpack://townsquare/./src/components/modals/RoleModal.vue?898f","webpack://townsquare/./src/components/modals/RoleModal.vue","webpack://townsquare/src/components/TownSquare.vue","webpack://townsquare/./src/components/TownSquare.vue?e5c4","webpack://townsquare/./src/components/TownSquare.vue","webpack://townsquare/./src/components/TownInfo.vue?b584","webpack://townsquare/src/components/TownInfo.vue","webpack://townsquare/./src/components/TownInfo.vue?eb23","webpack://townsquare/./src/components/TownInfo.vue","webpack://townsquare/./src/components/Menu.vue?94fb","webpack://townsquare/src/components/Menu.vue","webpack://townsquare/./src/components/Menu.vue?f240","webpack://townsquare/./src/components/Menu.vue","webpack://townsquare/./src/components/modals/RolesModal.vue?7db0","webpack://townsquare/src/components/modals/RolesModal.vue","webpack://townsquare/./src/components/modals/RolesModal.vue?d5a7","webpack://townsquare/./src/components/modals/RolesModal.vue","webpack://townsquare/./src/components/modals/EditionModal.vue?af86","webpack://townsquare/src/components/modals/EditionModal.vue","webpack://townsquare/./src/components/modals/EditionModal.vue?004d","webpack://townsquare/./src/components/modals/EditionModal.vue","webpack://townsquare/./src/components/Intro.vue?106c","webpack://townsquare/src/components/Intro.vue","webpack://townsquare/./src/components/Intro.vue?0e6b","webpack://townsquare/./src/components/Intro.vue","webpack://townsquare/./src/components/modals/ReferenceModal.vue?ccad","webpack://townsquare/src/components/modals/ReferenceModal.vue","webpack://townsquare/./src/components/modals/ReferenceModal.vue?b30f","webpack://townsquare/./src/components/modals/ReferenceModal.vue","webpack://townsquare/./src/components/Vote.vue?ffef","webpack://townsquare/src/components/Vote.vue","webpack://townsquare/./src/components/Vote.vue?174d","webpack://townsquare/./src/components/Vote.vue","webpack://townsquare/./src/components/Gradients.vue?ba9f","webpack://townsquare/src/components/Gradients.vue","webpack://townsquare/./src/components/Gradients.vue?becb","webpack://townsquare/./src/components/Gradients.vue","webpack://townsquare/./src/components/modals/NightOrderModal.vue?4abd","webpack://townsquare/src/components/modals/NightOrderModal.vue","webpack://townsquare/./src/components/modals/NightOrderModal.vue?45a4","webpack://townsquare/./src/components/modals/NightOrderModal.vue","webpack://townsquare/./src/components/modals/FabledModal.vue?1d29","webpack://townsquare/src/components/modals/FabledModal.vue","webpack://townsquare/./src/components/modals/FabledModal.vue?ef47","webpack://townsquare/./src/components/modals/FabledModal.vue","webpack://townsquare/./src/components/modals/VoteHistoryModal.vue?6fbf","webpack://townsquare/src/components/modals/VoteHistoryModal.vue","webpack://townsquare/./src/components/modals/VoteHistoryModal.vue?9779","webpack://townsquare/./src/components/modals/VoteHistoryModal.vue","webpack://townsquare/./src/components/modals/GameStateModal.vue?93ed","webpack://townsquare/src/components/modals/GameStateModal.vue","webpack://townsquare/./src/components/modals/GameStateModal.vue?f514","webpack://townsquare/./src/components/modals/GameStateModal.vue","webpack://townsquare/./src/components/modals/ExtraRolesModal.vue?bc71","webpack://townsquare/src/components/modals/ExtraRolesModal.vue","webpack://townsquare/./src/components/modals/ExtraRolesModal.vue?8049","webpack://townsquare/./src/components/modals/ExtraRolesModal.vue","webpack://townsquare/./src/components/GameResult.vue?8ca4","webpack://townsquare/src/components/GameResult.vue","webpack://townsquare/./src/components/GameResult.vue?1734","webpack://townsquare/./src/components/GameResult.vue","webpack://townsquare/src/App.vue","webpack://townsquare/./src/App.vue?6a4a","webpack://townsquare/./src/App.vue","webpack://townsquare/./src/store/socket.js","webpack://townsquare/./src/store/modules/players.js","webpack://townsquare/./src/store/modules/session.js","webpack://townsquare/./src/store/index.js","webpack://townsquare/./src/main.js","webpack://townsquare/./src/store/persistence.js","webpack://townsquare/webpack/bootstrap","webpack://townsquare/webpack/runtime/chunk loaded","webpack://townsquare/webpack/runtime/compat get default export","webpack://townsquare/webpack/runtime/define property getters","webpack://townsquare/webpack/runtime/global","webpack://townsquare/webpack/runtime/hasOwnProperty shorthand","webpack://townsquare/webpack/runtime/publicPath","webpack://townsquare/webpack/runtime/jsonp chunk loading","webpack://townsquare/webpack/startup"],"sourcesContent":["var map = {\n\t\"./bmr.webp\": 1975,\n\t\"./custom-label.webp\": 8551,\n\t\"./custom.webp\": 7101,\n\t\"./snv.webp\": 3860,\n\t\"./tb.webp\": 6280\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4239;","var map = {\n\t\"./acrobat_e.webp\": 2835,\n\t\"./acrobat_g.webp\": 3612,\n\t\"./alchemist_e.webp\": 8671,\n\t\"./alchemist_g.webp\": 378,\n\t\"./alhadikhia_e.webp\": 8462,\n\t\"./alhadikhia_g.webp\": 6706,\n\t\"./alsaahir_e.webp\": 2048,\n\t\"./alsaahir_g.webp\": 6165,\n\t\"./amnesiac_e.webp\": 8059,\n\t\"./amnesiac_g.webp\": 5699,\n\t\"./angel.webp\": 5357,\n\t\"./apprentice.webp\": 2800,\n\t\"./apprentice_e.webp\": 5711,\n\t\"./apprentice_g.webp\": 2671,\n\t\"./artist_e.webp\": 5511,\n\t\"./artist_g.webp\": 1776,\n\t\"./assassin_e.webp\": 6216,\n\t\"./assassin_g.webp\": 4825,\n\t\"./atheist_e.webp\": 9108,\n\t\"./atheist_g.webp\": 2602,\n\t\"./balloonist_e.webp\": 3120,\n\t\"./balloonist_g.webp\": 5274,\n\t\"./banshee_e.webp\": 9614,\n\t\"./banshee_g.webp\": 213,\n\t\"./barber_e.webp\": 648,\n\t\"./barber_g.webp\": 4546,\n\t\"./barista.webp\": 8067,\n\t\"./barista_e.webp\": 5224,\n\t\"./barista_g.webp\": 7,\n\t\"./baron_e.webp\": 6564,\n\t\"./baron_g.webp\": 4928,\n\t\"./beggar.webp\": 1067,\n\t\"./beggar_e.webp\": 5480,\n\t\"./beggar_g.webp\": 9418,\n\t\"./bishop.webp\": 6909,\n\t\"./bishop_e.webp\": 8335,\n\t\"./bishop_g.webp\": 8736,\n\t\"./boffin_e.webp\": 6189,\n\t\"./boffin_g.webp\": 1801,\n\t\"./bonecollector.webp\": 141,\n\t\"./bonecollector_e.webp\": 28,\n\t\"./bonecollector_g.webp\": 202,\n\t\"./boomdandy_e.webp\": 5702,\n\t\"./boomdandy_g.webp\": 8241,\n\t\"./bootlegger.webp\": 5716,\n\t\"./bountyhunter_e.webp\": 1844,\n\t\"./bountyhunter_g.webp\": 3658,\n\t\"./buddhist.webp\": 4392,\n\t\"./bureaucrat.webp\": 1968,\n\t\"./bureaucrat_e.webp\": 4283,\n\t\"./bureaucrat_g.webp\": 535,\n\t\"./butcher.webp\": 1258,\n\t\"./butcher_e.webp\": 3519,\n\t\"./butcher_g.webp\": 906,\n\t\"./butler_e.webp\": 2721,\n\t\"./butler_g.webp\": 1649,\n\t\"./cannibal_e.webp\": 6227,\n\t\"./cannibal_g.webp\": 3605,\n\t\"./cerenovus_e.webp\": 5415,\n\t\"./cerenovus_g.webp\": 1967,\n\t\"./chambermaid_e.webp\": 2571,\n\t\"./chambermaid_g.webp\": 2557,\n\t\"./chef_e.webp\": 2922,\n\t\"./chef_g.webp\": 9996,\n\t\"./choirboy_e.webp\": 1330,\n\t\"./choirboy_g.webp\": 900,\n\t\"./clockmaker_e.webp\": 1555,\n\t\"./clockmaker_g.webp\": 4193,\n\t\"./courtier_e.webp\": 1977,\n\t\"./courtier_g.webp\": 877,\n\t\"./cultleader_e.webp\": 8531,\n\t\"./cultleader_g.webp\": 6389,\n\t\"./custom.webp\": 5723,\n\t\"./damsel_e.webp\": 8842,\n\t\"./damsel_g.webp\": 1642,\n\t\"./dawn.webp\": 7786,\n\t\"./demon-info.webp\": 9415,\n\t\"./demon_e.webp\": 727,\n\t\"./demon_g.webp\": 1486,\n\t\"./deviant.webp\": 8280,\n\t\"./deviant_e.webp\": 2794,\n\t\"./deviant_g.webp\": 9599,\n\t\"./devilsadvocate_e.webp\": 1720,\n\t\"./devilsadvocate_g.webp\": 5048,\n\t\"./djinn.webp\": 9279,\n\t\"./doomsayer.webp\": 3174,\n\t\"./dreamer_e.webp\": 2207,\n\t\"./dreamer_g.webp\": 3563,\n\t\"./drunk_e.webp\": 9652,\n\t\"./drunk_g.webp\": 1036,\n\t\"./duchess.webp\": 5584,\n\t\"./dusk.webp\": 7894,\n\t\"./empath_e.webp\": 9723,\n\t\"./empath_g.webp\": 1582,\n\t\"./engineer_e.webp\": 9978,\n\t\"./engineer_g.webp\": 2321,\n\t\"./evil.webp\": 3176,\n\t\"./eviltwin_e.webp\": 7445,\n\t\"./eviltwin_g.webp\": 376,\n\t\"./exorcist_e.webp\": 5037,\n\t\"./exorcist_g.webp\": 3315,\n\t\"./fabled.webp\": 293,\n\t\"./fanggu_e.webp\": 1344,\n\t\"./fanggu_g.webp\": 9932,\n\t\"./farmer_e.webp\": 7378,\n\t\"./farmer_g.webp\": 2008,\n\t\"./fearmonger_e.webp\": 7083,\n\t\"./fearmonger_g.webp\": 9747,\n\t\"./ferryman.webp\": 5176,\n\t\"./fibbin.webp\": 7783,\n\t\"./fiddler.webp\": 926,\n\t\"./fisherman_e.webp\": 494,\n\t\"./fisherman_g.webp\": 4047,\n\t\"./flowergirl_e.webp\": 7160,\n\t\"./flowergirl_g.webp\": 3240,\n\t\"./fool_e.webp\": 3243,\n\t\"./fool_g.webp\": 2432,\n\t\"./fortuneteller_e.webp\": 631,\n\t\"./fortuneteller_g.webp\": 236,\n\t\"./gambler_e.webp\": 6713,\n\t\"./gambler_g.webp\": 3541,\n\t\"./gangster.webp\": 3008,\n\t\"./gangster_e.webp\": 165,\n\t\"./gangster_g.webp\": 6116,\n\t\"./gardener.webp\": 1109,\n\t\"./general_e.webp\": 3454,\n\t\"./general_g.webp\": 8227,\n\t\"./gnome.webp\": 6562,\n\t\"./gnome_e.webp\": 4615,\n\t\"./gnome_g.webp\": 9974,\n\t\"./goblin_e.webp\": 3804,\n\t\"./goblin_g.webp\": 35,\n\t\"./godfather_e.webp\": 3352,\n\t\"./godfather_g.webp\": 5718,\n\t\"./golem_e.webp\": 6572,\n\t\"./golem_g.webp\": 7972,\n\t\"./good.webp\": 4917,\n\t\"./goon_e.webp\": 9139,\n\t\"./goon_g.webp\": 9940,\n\t\"./gossip_e.webp\": 7217,\n\t\"./gossip_g.webp\": 9303,\n\t\"./grandmother_e.webp\": 1970,\n\t\"./grandmother_g.webp\": 4493,\n\t\"./gunslinger.webp\": 7480,\n\t\"./gunslinger_e.webp\": 6971,\n\t\"./gunslinger_g.webp\": 8650,\n\t\"./harlot.webp\": 3795,\n\t\"./harlot_e.webp\": 7758,\n\t\"./harlot_g.webp\": 9790,\n\t\"./harpy_e.webp\": 9038,\n\t\"./harpy_g.webp\": 2946,\n\t\"./hatter_e.webp\": 3265,\n\t\"./hatter_g.webp\": 1339,\n\t\"./hellslibrarian.webp\": 757,\n\t\"./heretic_e.webp\": 7202,\n\t\"./heretic_g.webp\": 4724,\n\t\"./highpriestess_e.webp\": 2249,\n\t\"./highpriestess_g.webp\": 8954,\n\t\"./huntsman_e.webp\": 5896,\n\t\"./huntsman_g.webp\": 3966,\n\t\"./imp_e.webp\": 5941,\n\t\"./imp_g.webp\": 7415,\n\t\"./innkeeper_e.webp\": 4347,\n\t\"./innkeeper_g.webp\": 5670,\n\t\"./investigator_e.webp\": 4698,\n\t\"./investigator_g.webp\": 2348,\n\t\"./judge.webp\": 8797,\n\t\"./judge_e.webp\": 9801,\n\t\"./judge_g.webp\": 8744,\n\t\"./juggler_e.webp\": 7187,\n\t\"./juggler_g.webp\": 2700,\n\t\"./kazali_e.webp\": 3320,\n\t\"./kazali_g.webp\": 2775,\n\t\"./king_e.webp\": 7340,\n\t\"./king_g.webp\": 8072,\n\t\"./klutz_e.webp\": 8285,\n\t\"./klutz_g.webp\": 8251,\n\t\"./knight_e.webp\": 9648,\n\t\"./knight_g.webp\": 4489,\n\t\"./legion_e.webp\": 8242,\n\t\"./legion_g.webp\": 5901,\n\t\"./leviathan_e.webp\": 3723,\n\t\"./leviathan_g.webp\": 975,\n\t\"./librarian_e.webp\": 6071,\n\t\"./librarian_g.webp\": 3596,\n\t\"./lilmonsta_e.webp\": 6281,\n\t\"./lilmonsta_g.webp\": 1699,\n\t\"./lleech_e.webp\": 4110,\n\t\"./lleech_g.webp\": 7817,\n\t\"./lordoftyphon_e.webp\": 3414,\n\t\"./lordoftyphon_g.webp\": 2165,\n\t\"./lunatic_e.webp\": 5544,\n\t\"./lunatic_g.webp\": 9838,\n\t\"./lycanthrope_e.webp\": 7862,\n\t\"./lycanthrope_g.webp\": 3244,\n\t\"./magician_e.webp\": 4319,\n\t\"./magician_g.webp\": 5734,\n\t\"./marionette_e.webp\": 1635,\n\t\"./marionette_g.webp\": 937,\n\t\"./mastermind_e.webp\": 5308,\n\t\"./mastermind_g.webp\": 3182,\n\t\"./mathematician_e.webp\": 4022,\n\t\"./mathematician_g.webp\": 2962,\n\t\"./matron.webp\": 2069,\n\t\"./matron_e.webp\": 8136,\n\t\"./matron_g.webp\": 2189,\n\t\"./mayor_e.webp\": 8022,\n\t\"./mayor_g.webp\": 9906,\n\t\"./mezepheles_e.webp\": 7265,\n\t\"./mezepheles_g.webp\": 6163,\n\t\"./minion-info.webp\": 6505,\n\t\"./minion_e.webp\": 9897,\n\t\"./minion_g.webp\": 7755,\n\t\"./minstrel_e.webp\": 9213,\n\t\"./minstrel_g.webp\": 8631,\n\t\"./monk_e.webp\": 4473,\n\t\"./monk_g.webp\": 395,\n\t\"./moonchild_e.webp\": 1818,\n\t\"./moonchild_g.webp\": 1369,\n\t\"./mutant_e.webp\": 1653,\n\t\"./mutant_g.webp\": 9383,\n\t\"./nightwatchman_e.webp\": 4487,\n\t\"./nightwatchman_g.webp\": 588,\n\t\"./noble_e.webp\": 4743,\n\t\"./noble_g.webp\": 3489,\n\t\"./nodashii_e.webp\": 4695,\n\t\"./nodashii_g.webp\": 7538,\n\t\"./ogre_e.webp\": 1544,\n\t\"./ogre_g.webp\": 8410,\n\t\"./ojo_e.webp\": 6072,\n\t\"./ojo_g.webp\": 2324,\n\t\"./oracle_e.webp\": 33,\n\t\"./oracle_g.webp\": 2623,\n\t\"./organgrinder_e.webp\": 4322,\n\t\"./organgrinder_g.webp\": 2430,\n\t\"./outsider_e.webp\": 5498,\n\t\"./outsider_g.webp\": 2054,\n\t\"./pacifist_e.webp\": 391,\n\t\"./pacifist_g.webp\": 2685,\n\t\"./philosopher_e.webp\": 586,\n\t\"./philosopher_g.webp\": 848,\n\t\"./pithag_e.webp\": 3781,\n\t\"./pithag_g.webp\": 1473,\n\t\"./pixie_e.webp\": 4580,\n\t\"./pixie_g.webp\": 7595,\n\t\"./plaguedoctor_e.webp\": 8540,\n\t\"./plaguedoctor_g.webp\": 333,\n\t\"./po_e.webp\": 2079,\n\t\"./po_g.webp\": 387,\n\t\"./poisoner_e.webp\": 6199,\n\t\"./poisoner_g.webp\": 5160,\n\t\"./politician_e.webp\": 9023,\n\t\"./politician_g.webp\": 6531,\n\t\"./poppygrower_e.webp\": 9423,\n\t\"./poppygrower_g.webp\": 6343,\n\t\"./preacher_e.webp\": 1755,\n\t\"./preacher_g.webp\": 1965,\n\t\"./professor_e.webp\": 5032,\n\t\"./professor_g.webp\": 5422,\n\t\"./psychopath_e.webp\": 1042,\n\t\"./psychopath_g.webp\": 8469,\n\t\"./pukka_e.webp\": 41,\n\t\"./pukka_g.webp\": 2507,\n\t\"./puzzlemaster_e.webp\": 1240,\n\t\"./puzzlemaster_g.webp\": 9390,\n\t\"./ravenkeeper_e.webp\": 7356,\n\t\"./ravenkeeper_g.webp\": 8740,\n\t\"./recluse_e.webp\": 4925,\n\t\"./recluse_g.webp\": 4821,\n\t\"./revolutionary.webp\": 6069,\n\t\"./riot_e.webp\": 6419,\n\t\"./riot_g.webp\": 5493,\n\t\"./sage_e.webp\": 4923,\n\t\"./sage_g.webp\": 2263,\n\t\"./sailor_e.webp\": 7831,\n\t\"./sailor_g.webp\": 1277,\n\t\"./saint_e.webp\": 4994,\n\t\"./saint_g.webp\": 525,\n\t\"./savant_e.webp\": 2028,\n\t\"./savant_g.webp\": 4768,\n\t\"./scapegoat.webp\": 8641,\n\t\"./scapegoat_e.webp\": 199,\n\t\"./scapegoat_g.webp\": 7829,\n\t\"./scarletwoman_e.webp\": 5570,\n\t\"./scarletwoman_g.webp\": 7234,\n\t\"./seamstress_e.webp\": 5577,\n\t\"./seamstress_g.webp\": 8333,\n\t\"./sentinel.webp\": 9480,\n\t\"./shabaloth_e.webp\": 1945,\n\t\"./shabaloth_g.webp\": 1131,\n\t\"./shugenja_e.webp\": 1485,\n\t\"./shugenja_g.webp\": 3000,\n\t\"./slayer_e.webp\": 6405,\n\t\"./slayer_g.webp\": 2039,\n\t\"./snakecharmer_e.webp\": 4948,\n\t\"./snakecharmer_g.webp\": 341,\n\t\"./snitch_e.webp\": 5496,\n\t\"./snitch_g.webp\": 9281,\n\t\"./soldier_e.webp\": 1663,\n\t\"./soldier_g.webp\": 1864,\n\t\"./spiritofivory.webp\": 7579,\n\t\"./spy_e.webp\": 3281,\n\t\"./spy_g.webp\": 4829,\n\t\"./steward_e.webp\": 1476,\n\t\"./steward_g.webp\": 8710,\n\t\"./stormcatcher.webp\": 3215,\n\t\"./summoner_e.webp\": 7537,\n\t\"./summoner_g.webp\": 4394,\n\t\"./sweetheart_e.webp\": 2605,\n\t\"./sweetheart_g.webp\": 9919,\n\t\"./tealady_e.webp\": 2988,\n\t\"./tealady_g.webp\": 2836,\n\t\"./thief.webp\": 7938,\n\t\"./thief_e.webp\": 7149,\n\t\"./thief_g.webp\": 5227,\n\t\"./tinker_e.webp\": 3692,\n\t\"./tinker_g.webp\": 6749,\n\t\"./towncrier_e.webp\": 6302,\n\t\"./towncrier_g.webp\": 4892,\n\t\"./townsfolk_e.webp\": 7159,\n\t\"./townsfolk_g.webp\": 1915,\n\t\"./toymaker.webp\": 2287,\n\t\"./traveler.webp\": 6081,\n\t\"./traveler_e.webp\": 2256,\n\t\"./traveler_g.webp\": 2855,\n\t\"./undertaker_e.webp\": 5051,\n\t\"./undertaker_g.webp\": 3625,\n\t\"./vigormortis_e.webp\": 8838,\n\t\"./vigormortis_g.webp\": 3967,\n\t\"./villageidiot_e.webp\": 5852,\n\t\"./villageidiot_g.webp\": 5777,\n\t\"./virgin_e.webp\": 1633,\n\t\"./virgin_g.webp\": 9112,\n\t\"./vizier_e.webp\": 2449,\n\t\"./vizier_g.webp\": 9582,\n\t\"./vortox_e.webp\": 5608,\n\t\"./vortox_g.webp\": 1438,\n\t\"./voudon.webp\": 8578,\n\t\"./voudon_e.webp\": 3531,\n\t\"./voudon_g.webp\": 5530,\n\t\"./washerwoman_e.webp\": 4256,\n\t\"./washerwoman_g.webp\": 6360,\n\t\"./widow_e.webp\": 9492,\n\t\"./widow_g.webp\": 4565,\n\t\"./witch_e.webp\": 5446,\n\t\"./witch_g.webp\": 369,\n\t\"./x.webp\": 3101,\n\t\"./yaggababble_e.webp\": 4313,\n\t\"./yaggababble_g.webp\": 869,\n\t\"./zealot_e.webp\": 2379,\n\t\"./zealot_g.webp\": 718,\n\t\"./zombuul_e.webp\": 5556,\n\t\"./zombuul_g.webp\": 211\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1654;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:[\n    {\n      night: _vm.grimoire.isNight,\n      reveal: _vm.session.reveal,\n      static: _vm.grimoire.isStatic,\n    },\n    _vm.edition.id,\n    `background-${\n      _vm.players.length\n        ? (_vm.edition.isOfficial\n            ? _vm.grimoire.defaultBaseBackgroundIndex\n            : _vm.grimoire.defaultCustomBackgroundIndex) + 1\n        : 0\n    }`,\n  ],style:({\n    backgroundImage: _vm.grimoire.background\n      ? `url('${_vm.grimoire.background}')`\n      : '',\n  }),attrs:{\"id\":\"app\",\"tabindex\":\"-1\"},on:{\"keyup\":[_vm.keyup,function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"]))return null;return _vm.space.apply(null, arguments)}]}},[(_vm.grimoire.background && _vm.grimoire.background.match(/\\.(mp4|webm)$/i))?_c('video',{attrs:{\"id\":\"background\",\"src\":_vm.grimoire.background,\"autoplay\":\"\",\"loop\":\"\"}}):_vm._e(),_c('div',{staticClass:\"backdrop\"}),_c('TownSquare'),_c('transition',{attrs:{\"name\":\"blur\"}},[(!_vm.players.length)?_c('Intro'):_vm._e(),(_vm.players.length && !_vm.session.nomination && !_vm.session.reveal)?_c('TownInfo'):_vm._e(),(_vm.players.length && _vm.session.reveal)?_c('GameResult'):_vm._e(),(_vm.session.nomination)?_c('Vote',{ref:\"vote\"}):_vm._e()],1),_c('Menu',{ref:\"menu\"}),_c('EditionModal'),_c('FabledModal'),_c('ExtraRolesModal'),_c('RolesModal'),_c('ReferenceModal'),_c('NightOrderModal'),_c('VoteHistoryModal'),_c('GameStateModal'),_c('Gradients'),_c('span',{attrs:{\"id\":\"version\"}},[_vm._v(\"v\"+_vm._s(_vm.version))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"square\",class:{\n    public: _vm.grimoire.isPublic,\n    reveal: _vm.session.reveal,\n    night: _vm.grimoire.isNight,\n    spectator: _vm.session.isSpectator,\n    host: _vm.session.sessionId && !_vm.session.isSpectator,\n    spin: _vm.session.isTokenSpinning,\n    vote: _vm.session.nomination,\n    voteWatching: _vm.session.isVoteWatchingAllowed,\n  },attrs:{\"id\":\"townsquare\"}},[_c('ul',{staticClass:\"circle\",class:['size-' + _vm.players.length]},_vm._l((_vm.players),function(player,index){return _c('Player',{key:index,class:{\n        from: Math.max(_vm.swap, _vm.nominate) === index,\n        swap: _vm.swap > -1,\n        nominate: _vm.nominate > -1,\n      },attrs:{\"player\":player},on:{\"trigger\":function($event){return _vm.handleTrigger(index, $event)}}})}),1),(_vm.players.length)?_c('div',{staticClass:\"top-left\"},[_c('Storyteller',{key:-1,attrs:{\"storyteller\":_vm.storyteller},on:{\"trigger\":function($event){return _vm.handleTrigger(20, $event)}}}),(_vm.fabled.length)?_c('div',{staticClass:\"fabled\",class:{ closed: !_vm.grimoire.isFabledOpen }},[_c('ul',_vm._l((_vm.fabled),function(role,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.removeFabled(index)}}},[_c('div',{staticClass:\"night-order first\",class:{\n              shown:\n                _vm.nightOrder.get(role).first &&\n                _vm.grimoire.isNightOrder &&\n                !_vm.session.reveal,\n            }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(role).first))]),(role.firstNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(role.firstNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"night-order other\",class:{\n              shown:\n                _vm.nightOrder.get(role).other &&\n                _vm.grimoire.isNightOrder &&\n                !_vm.session.reveal,\n            }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(role).other))]),(role.otherNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(role.otherNightReminder)}})]):_vm._e()]),_c('Token',{attrs:{\"role\":role}})],1)}),0)]):_vm._e()],1):_vm._e(),(_vm.players.length)?_c('div',{ref:\"bluffs\",staticClass:\"bluffs\",class:{\n      closed: !_vm.grimoire.isBluffsOpen,\n      double: _vm.grimoire.isExtraBluffs,\n    }},[_c('ul',_vm._l((_vm.bluffSets),function(index1){return _c('li',{key:index1},[_c('ul',_vm._l((3),function(index2){return _c('li',{key:index2,on:{\"click\":function($event){_vm.openRoleModal((3 * (index1 - 1) + index2) * -1)}}},[_c('Token',{attrs:{\"role\":_vm.bluffs[3 * (index1 - 1) + index2 - 1]}})],1)}),0)])}),0)]):_vm._e(),(_vm.players.length && _vm.extraRoles.length)?_c('div',{ref:\"extra-roles\",staticClass:\"extra-roles\"},[_c('ul',_vm._l((_vm.extraRoles),function(role,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.removeExtraRoles(index)}}},[_c('div',{staticClass:\"night-order first\",class:{\n            shown:\n              _vm.nightOrder.get(role).first &&\n              _vm.grimoire.isNightOrder &&\n              !_vm.session.reveal,\n          }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(role).first))]),(role.firstNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(role.firstNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"night-order other\",class:{\n            shown:\n              _vm.nightOrder.get(role).other &&\n              _vm.grimoire.isNightOrder &&\n              !_vm.session.reveal,\n          }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(role).other))]),(role.otherNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(role.otherNightReminder)}})]):_vm._e()]),_c('Token',{attrs:{\"role\":role}})],1)}),0)]):_vm._e(),_c('ReminderModal',{attrs:{\"player-index\":_vm.selectedPlayer,\"is-death\":_vm.deathReminder}}),_c('RoleModal',{attrs:{\"player-index\":_vm.selectedPlayer}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{style:(_vm.zoom)},[_c('div',{ref:\"player\",staticClass:\"player\",class:[\n      {\n        dead: _vm.player.isDead,\n        'invisible-dead': _vm.player.isInvisibleDead,\n        marked:\n          (!_vm.session.isSpectator || _vm.session.isVoteWatchingAllowed) &&\n          _vm.session.markedPlayer === _vm.index,\n        'hand-raised': _vm.session.handsRaised[_vm.index],\n        'menu-open': _vm.isMenuOpen && !_vm.session.reveal,\n        'no-vote': _vm.player.isVoteless,\n        you: _vm.session.sessionId && _vm.player.id && _vm.player.id === _vm.session.playerId,\n        'vote-yes':\n          (!_vm.session.isSpectator ||\n            _vm.session.isVoteWatchingAllowed ||\n            _vm.player.id === _vm.session.playerId) &&\n          _vm.session.votes[_vm.index] === 1,\n        'vote-double':\n          (!_vm.session.isSpectator ||\n            _vm.session.isVoteWatchingAllowed ||\n            _vm.player.id === _vm.session.playerId) &&\n          _vm.session.votes[_vm.index] === 2,\n        'vote-lock': _vm.voteLocked,\n        revealed: _vm.session.revealedPlayers[_vm.index],\n      },\n      _vm.player.role.team,\n      _vm.player.alignment,\n    ],attrs:{\"tabindex\":\"-1\"},on:{\"focusout\":function($event){_vm.isMenuOpen = false}}},[_c('div',{staticClass:\"shroud\",on:{\"click\":function($event){return _vm.clickShroud()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"eye-slash\"}})],1),_c('div',{staticClass:\"life\",on:{\"click\":function($event){return _vm.toggleStatus()}}}),_c('div',{staticClass:\"night-order first\",class:{\n        shown:\n          _vm.nightOrder.get(_vm.player).first &&\n          _vm.grimoire.isNightOrder &&\n          !_vm.grimoire.isPublic &&\n          !_vm.session.reveal,\n      }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(_vm.player).first))]),(_vm.player.role.firstNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.player.role.firstNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"night-order other\",class:{\n        shown:\n          _vm.nightOrder.get(_vm.player).other &&\n          _vm.grimoire.isNightOrder &&\n          !_vm.grimoire.isPublic &&\n          !_vm.session.reveal,\n      }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(_vm.player).other))]),(_vm.player.role.otherNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.player.role.otherNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"menu-container\"},[_c('Token',{attrs:{\"role\":_vm.player.role,\"alignment\":_vm.player.alignment},on:{\"click-token\":function($event){return _vm.clickToken()}}}),_c('transition',{attrs:{\"name\":\"fold\"}},[(_vm.isMenuOpen && !_vm.session.reveal)?_c('ul',{staticClass:\"menu\"},[(!_vm.session.isSpectator)?_c('li',{on:{\"click\":_vm.changeCharacter}},[_c('font-awesome-icon',{attrs:{\"icon\":\"masks-theater\"}}),_vm._v(\"Change Character \")],1):_vm._e(),(_vm.player.role.id)?_c('li',{on:{\"click\":_vm.changeAlignment}},[_c('font-awesome-icon',{attrs:{\"icon\":\"yin-yang\"}}),_vm._v(\"Change Alignment \")],1):_vm._e(),(_vm.session.isSpectator && _vm.player.id === _vm.session.playerId)?_c('li',{on:{\"click\":_vm.changePronouns}},[_c('font-awesome-icon',{attrs:{\"icon\":\"venus-mars\"}}),_vm._v(\"Change Pronouns \")],1):_vm._e(),(!_vm.session.isSpectator)?[_c('li',{class:{ disabled: _vm.session.lockedVote },on:{\"click\":function($event){return _vm.swapPlayer()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"right-left\"}}),_vm._v(\" Swap Seats \")],1),(!(_vm.player.id && _vm.session.sessionId))?_c('li',{on:{\"click\":_vm.changeName}},[_c('font-awesome-icon',{attrs:{\"icon\":\"user-pen\"}}),_vm._v(\"Rename \")],1):_vm._e(),_c('li',{class:{ disabled: _vm.session.lockedVote },on:{\"click\":_vm.removePlayer}},[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-xmark\"}}),_vm._v(\" Remove \")],1),(_vm.player.id && _vm.session.sessionId)?_c('li',{on:{\"click\":function($event){return _vm.updatePlayer('id', '', true)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"chair\"}}),_vm._v(\" Empty Seat \")],1):_vm._e(),(\n                !_vm.session.nomination && !_vm.grimoire.isNight && !_vm.session.reveal\n              )?[_c('li',{on:{\"click\":function($event){return _vm.nominatePlayer()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"hand-point-right\"}}),_vm._v(\" Nominate Player \")],1)]:_vm._e()]:_vm._e(),(_vm.session.isSpectator)?_c('li',{class:{ disabled: _vm.player.id && _vm.player.id !== _vm.session.playerId },on:{\"click\":_vm.claimSeat}},[_c('font-awesome-icon',{attrs:{\"icon\":\"chair\"}}),(!_vm.player.id)?[_vm._v(\" Claim seat \")]:(_vm.player.id === _vm.session.playerId)?[_vm._v(\" Vacate Seat \")]:[_vm._v(\" Seat Occupied \")]],2):_vm._e()],2):_vm._e()])],1),_c('div',{staticClass:\"overlay\"},[_c('font-awesome-icon',{staticClass:\"hand\",attrs:{\"icon\":\"hand\"}}),_c('font-awesome-icon',{staticClass:\"vote first-hand\",attrs:{\"icon\":\"hand\",\"title\":\"Hand UP\"},on:{\"click\":function($event){return _vm.vote()}}}),_c('font-awesome-icon',{staticClass:\"vote second-hand\",attrs:{\"icon\":\"hand\",\"title\":\"Hand UP\"},on:{\"click\":function($event){return _vm.vote()}}}),_c('font-awesome-icon',{staticClass:\"vote\",attrs:{\"icon\":\"xmark\",\"title\":\"Hand DOWN\"},on:{\"click\":function($event){return _vm.vote()}}}),_c('font-awesome-icon',{staticClass:\"vote\",attrs:{\"icon\":\"question\"}}),_c('font-awesome-icon',{staticClass:\"cancel\",attrs:{\"icon\":\"circle-xmark\",\"title\":\"Cancel\"},on:{\"click\":function($event){return _vm.cancel()}}}),_c('font-awesome-icon',{staticClass:\"swap\",attrs:{\"icon\":\"right-left\",\"title\":\"Swap seats with this player\"},on:{\"click\":function($event){return _vm.swapPlayer(_vm.player)}}}),_c('font-awesome-icon',{staticClass:\"nominate\",attrs:{\"icon\":\"hand-point-right\",\"title\":\"Nominate this player\"},on:{\"click\":function($event){return _vm.nominatePlayer(_vm.player)}}})],1),(_vm.player.id && _vm.session.sessionId)?_c('font-awesome-icon',{staticClass:\"seat\",class:{ highlight: _vm.session.isRolesDistributed },attrs:{\"icon\":\"chair\"}}):_vm._e(),(_vm.player.isDead && !_vm.player.isVoteless)?_c('font-awesome-icon',{staticClass:\"has-vote\",attrs:{\"icon\":\"check-to-slot\",\"title\":\"Ghost vote\"},on:{\"click\":function($event){return _vm.updatePlayer('isVoteless', true)}}}):_vm._e(),_c('div',{staticClass:\"marked\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"skull\"}})],1),_c('div',{staticClass:\"name\",class:{ active: _vm.isMenuOpen && !_vm.session.reveal },on:{\"click\":function($event){_vm.isMenuOpen = !_vm.isMenuOpen}}},[_c('span',[_vm._v(_vm._s(_vm.player.name))]),(_vm.player.pronouns)?_c('span',[_vm._v(\"\")]):_vm._e(),(_vm.player.pronouns)?_c('font-awesome-icon',{attrs:{\"icon\":\"venus-mars\"}}):_vm._e(),(_vm.player.pronouns)?_c('div',{staticClass:\"pronouns\"},[_c('span',[_vm._v(_vm._s(_vm.player.pronouns))])]):_vm._e()],1)],1),(_vm.player.reminders)?_vm._l((_vm.player.reminders),function(reminder){return _c('div',{key:reminder.role + ' ' + reminder.name,staticClass:\"reminder\",class:{\n        custom: reminder.role === 'custom' && reminder.name.length > 15,\n        flipped: reminder.flipped,\n      }},[_c('span',{staticClass:\"icon\",style:({\n          backgroundImage: `url(${\n            reminder.image && _vm.grimoire.isImageOptIn\n              ? Array.isArray(reminder.image)\n                ? reminder.image[0]\n                : reminder.image\n              : require(\n                  '../assets/icons/' +\n                    (reminder.imageAlt || reminder.role) +\n                    (reminder.team === 'townsfolk' ||\n                    reminder.team === 'outsider'\n                      ? '_g'\n                      : reminder.team === 'minion' ||\n                          reminder.team === 'demon'\n                        ? '_e'\n                        : '') +\n                    '.webp',\n                )\n          })`,\n        })}),(reminder.role !== 'custom' || reminder.name.length <= 15)?_c('svg',{staticClass:\"name\",attrs:{\"viewBox\":\"0 0 140 140\"}},[_c('path',{attrs:{\"d\":\"M 70 70 M 27.5736 27.5736 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528\",\"id\":\"circle\",\"fill\":\"transparent\"}}),_c('text',{staticClass:\"text\",attrs:{\"width\":\"150\",\"x\":\"100%\",\"text-anchor\":\"middle\"}},[_c('textPath',{attrs:{\"xlink:href\":\"#circle\"}},[_vm._v(\" \"+_vm._s(reminder.name)+\" \")])])]):_c('span',{staticClass:\"customText\"},[_vm._v(_vm._s(reminder.name))]),_c('div',{staticClass:\"overlay\"},[_c('font-awesome-icon',{staticClass:\"flip\",attrs:{\"icon\":\"rotate-right\"},on:{\"click\":function($event){return _vm.flipReminder(reminder)}}}),_c('font-awesome-icon',{staticClass:\"remove\",attrs:{\"icon\":\"trash-can\"},on:{\"click\":function($event){return _vm.removeReminder(reminder)}}})],1)])}):_vm._e(),_c('div',{staticClass:\"reminder add\",on:{\"click\":function($event){return _vm.$emit('trigger', ['openReminderModal'])}}},[_c('span',{staticClass:\"icon\"})]),_c('div',{staticClass:\"reminderHoverTarget\"})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"token\",class:[_vm.role.id ? _vm.role.id : 'blank', _vm.getEdition + '-token'],on:{\"click\":_vm.clickToken}},[(_vm.role.id)?_c('span',{staticClass:\"icon\",style:({\n      backgroundImage: `url(${\n        _vm.role.image && _vm.grimoire.isImageOptIn\n          ? Array.isArray(_vm.role.image)\n            ? _vm.role.image[_vm.getCustomRoleIconIndex]\n            : _vm.role.image\n          : require(\n              '../assets/icons/' +\n                (_vm.role.imageAlt || _vm.role.id) +\n                (_vm.getAlignment !== 'n' ? '_' + _vm.getAlignment : '') +\n                '.webp',\n            )\n      })`,\n    })}):_vm._e(),(_vm.role.firstNight || _vm.role.firstNightReminder)?_c('span',{class:[_vm.getEdition + '-leaf-left']}):_vm._e(),(_vm.role.otherNight || _vm.role.otherNightReminder)?_c('span',{class:[_vm.getEdition + '-leaf-right']}):_vm._e(),(_vm.reminderLeaves)?_c('span',{class:[_vm.getEdition + '-leaf-top' + _vm.reminderLeaves]}):_vm._e(),(_vm.role.setup)?_c('span',{staticClass:\"leaf-orange\"}):_vm._e(),_c('svg',{staticClass:\"name\",attrs:{\"viewBox\":\"0 0 150 150\"}},[_c('path',{attrs:{\"d\":\"M 13 75 C 13 160, 138 160, 138 75\",\"id\":\"curve\",\"fill\":\"transparent\"}}),_c('text',{staticClass:\"label mozilla\",attrs:{\"width\":\"150\",\"x\":\"66.6%\",\"text-anchor\":\"middle\",\"font-size\":_vm._f(\"nameToFontSize\")(_vm.role.name)}},[_c('textPath',{attrs:{\"xlink:href\":\"#curve\"}},[_vm._v(\" \"+_vm._s(_vm.role.name)+\" \")])])]),(_vm.role.ability)?_c('div',{staticClass:\"ability\"},[_vm._v(\" \"+_vm._s(_vm.role.ability)+\" \")]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"token\"\n    @click=\"clickToken\"\n    :class=\"[role.id ? role.id : 'blank', getEdition + '-token']\"\n  >\n    <span\n      class=\"icon\"\n      v-if=\"role.id\"\n      :style=\"{\n        backgroundImage: `url(${\n          role.image && grimoire.isImageOptIn\n            ? Array.isArray(role.image)\n              ? role.image[getCustomRoleIconIndex]\n              : role.image\n            : require(\n                '../assets/icons/' +\n                  (role.imageAlt || role.id) +\n                  (getAlignment !== 'n' ? '_' + getAlignment : '') +\n                  '.webp',\n              )\n        })`,\n      }\"\n    ></span>\n    <span\n      v-if=\"role.firstNight || role.firstNightReminder\"\n      :class=\"[getEdition + '-leaf-left']\"\n    ></span>\n    <span\n      v-if=\"role.otherNight || role.otherNightReminder\"\n      :class=\"[getEdition + '-leaf-right']\"\n    ></span>\n    <span\n      v-if=\"reminderLeaves\"\n      :class=\"[getEdition + '-leaf-top' + reminderLeaves]\"\n    ></span>\n    <span class=\"leaf-orange\" v-if=\"role.setup\"></span>\n    <svg viewBox=\"0 0 150 150\" class=\"name\">\n      <path\n        d=\"M 13 75 C 13 160, 138 160, 138 75\"\n        id=\"curve\"\n        fill=\"transparent\"\n      />\n      <text\n        width=\"150\"\n        x=\"66.6%\"\n        text-anchor=\"middle\"\n        class=\"label mozilla\"\n        :font-size=\"role.name | nameToFontSize\"\n      >\n        <textPath xlink:href=\"#curve\">\n          {{ role.name }}\n        </textPath>\n      </text>\n    </svg>\n    <div class=\"ability\" v-if=\"role.ability\">\n      {{ role.ability }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Token\",\n  props: {\n    role: {\n      type: Object,\n      default: () => ({}),\n    },\n    alignment: {\n      type: String,\n    },\n  },\n  computed: {\n    reminderLeaves: function () {\n      return (\n        (this.role.reminders || []).length +\n        (this.role.remindersGlobal || []).length\n      );\n    },\n    getAlignment: function () {\n      return (\n        this.alignment ||\n        (this.role.team === \"townsfolk\" || this.role.team === \"outsider\"\n          ? \"g\"\n          : this.role.team === \"minion\" || this.role.team === \"demon\"\n            ? \"e\"\n            : \"n\")\n      );\n    },\n    getCustomRoleIconIndex: function () {\n      return !this.alignment\n        ? 0\n        : (this.alignment === \"g\" &&\n              (this.role.team === \"townsfolk\" ||\n                this.role.team === \"outsider\")) ||\n            (this.alignment === \"e\" &&\n              (this.role.team === \"minion\" || this.role.team === \"demon\")) ||\n            this.alignment === \"n\"\n          ? 0\n          : this.alignment &&\n              (this.role.team === \"townsfolk\" ||\n                this.role.team === \"outsider\" ||\n                this.role.team === \"minion\" ||\n                this.role.team === \"demon\" ||\n                (this.role.team === \"traveler\" && this.alignment === \"g\"))\n            ? 1\n            : 2;\n    },\n    getEdition: function () {\n      return !this.role.id\n        ? this.edition.id\n        : this.role.team === \"traveler\" || this.role.team === \"fabled\"\n          ? \"taf\"\n          : this.role.edition === \"tb\" ||\n              this.role.edition === \"bmr\" ||\n              this.role.edition === \"snv\"\n            ? this.role.edition\n            : \"custom\";\n    },\n    ...mapState([\"grimoire\", \"edition\"]),\n  },\n  data() {\n    return {};\n  },\n  filters: {\n    nameToFontSize: (name) => (name && name.length > 10 ? \"90%\" : \"110%\"),\n  },\n  methods: {\n    clickToken() {\n      this.$emit(\"click-token\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.token {\n  border-radius: 50%;\n  width: 100%;\n  background: url(\"../assets/tokens/token.webp\") center center;\n  background-size: 113%;\n  text-align: center;\n  border: 2px solid black;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: border-color 250ms;\n\n  .icon,\n  &:before {\n    background-size: 100%;\n    background-repeat: no-repeat;\n    background-position: center 30%;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin-top: -10%;\n  }\n\n  span {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-size: 113%;\n    background-position: center center;\n    pointer-events: none;\n    border-radius: 50%;\n    overflow: hidden;\n\n    &.leaf-orange {\n      background-image: url(\"../assets/tokens/leaf-orange.webp\");\n    }\n\n    &.custom-leaf-left {\n      background-image: url(\"../assets/tokens/leaf-left.webp\");\n    }\n\n    &.custom-leaf-right {\n      background-image: url(\"../assets/tokens/leaf-right.webp\");\n    }\n\n    &.custom-leaf-top1 {\n      background-image: url(\"../assets/tokens/leaf-top1.webp\");\n    }\n\n    &.custom-leaf-top2 {\n      background-image: url(\"../assets/tokens/leaf-top2.webp\");\n    }\n\n    &.custom-leaf-top3 {\n      background-image: url(\"../assets/tokens/leaf-top3.webp\");\n    }\n\n    &.custom-leaf-top4 {\n      background-image: url(\"../assets/tokens/leaf-top4.webp\");\n    }\n\n    &.custom-leaf-top5 {\n      background-image: url(\"../assets/tokens/leaf-top5.webp\");\n    }\n\n    &.custom-leaf-top6 {\n      background-image: url(\"../assets/tokens/leaf-top6.webp\");\n    }\n\n    &.custom-leaf-top7 {\n      background-image: url(\"../assets/tokens/leaf-top7.webp\");\n    }\n\n    &.tb-leaf-left {\n      background-image: url(\"../assets/tokens/tb/leaf-left.webp\");\n    }\n\n    &.tb-leaf-right {\n      background-image: url(\"../assets/tokens/tb/leaf-right.webp\");\n    }\n\n    &.tb-leaf-top1 {\n      background-image: url(\"../assets/tokens/tb/leaf-top1.webp\");\n    }\n\n    &.tb-leaf-top2 {\n      background-image: url(\"../assets/tokens/tb/leaf-top2.webp\");\n    }\n\n    &.tb-leaf-top3 {\n      background-image: url(\"../assets/tokens/tb/leaf-top3.webp\");\n    }\n\n    &.tb-leaf-top4 {\n      background-image: url(\"../assets/tokens/tb/leaf-top4.webp\");\n    }\n\n    &.tb-leaf-top5 {\n      background-image: url(\"../assets/tokens/tb/leaf-top5.webp\");\n    }\n\n    &.bmr-leaf-left {\n      background-image: url(\"../assets/tokens/bmr/leaf-left.webp\");\n    }\n\n    &.bmr-leaf-right {\n      background-image: url(\"../assets/tokens/bmr/leaf-right.webp\");\n    }\n\n    &.bmr-leaf-top1 {\n      background-image: url(\"../assets/tokens/bmr/leaf-top1.webp\");\n    }\n\n    &.bmr-leaf-top2 {\n      background-image: url(\"../assets/tokens/bmr/leaf-top2.webp\");\n    }\n\n    &.bmr-leaf-top3 {\n      background-image: url(\"../assets/tokens/bmr/leaf-top3.webp\");\n    }\n\n    &.bmr-leaf-top4 {\n      background-image: url(\"../assets/tokens/bmr/leaf-top4.webp\");\n    }\n\n    &.bmr-leaf-top5 {\n      background-image: url(\"../assets/tokens/bmr/leaf-top5.webp\");\n    }\n\n    &.snv-leaf-left {\n      background-image: url(\"../assets/tokens/snv/leaf-left.webp\");\n    }\n\n    &.snv-leaf-right {\n      background-image: url(\"../assets/tokens/snv/leaf-right.webp\");\n    }\n\n    &.snv-leaf-top1 {\n      background-image: url(\"../assets/tokens/snv/leaf-top1.webp\");\n    }\n\n    &.snv-leaf-top2 {\n      background-image: url(\"../assets/tokens/snv/leaf-top2.webp\");\n    }\n\n    &.snv-leaf-top3 {\n      background-image: url(\"../assets/tokens/snv/leaf-top3.webp\");\n    }\n\n    &.snv-leaf-top4 {\n      background-image: url(\"../assets/tokens/snv/leaf-top4.webp\");\n    }\n\n    &.snv-leaf-top5 {\n      background-image: url(\"../assets/tokens/snv/leaf-top5.webp\");\n    }\n\n    &.snv-leaf-top6 {\n      background-image: url(\"../assets/tokens/snv/leaf-top6.webp\");\n    }\n\n    &.snv-leaf-top7 {\n      background-image: url(\"../assets/tokens/snv/leaf-top7.webp\");\n    }\n\n    &.taf-leaf-left {\n      background-image: url(\"../assets/tokens/taf/leaf-left.webp\");\n    }\n\n    &.taf-leaf-right {\n      background-image: url(\"../assets/tokens/taf/leaf-right.webp\");\n    }\n\n    &.taf-leaf-top1 {\n      background-image: url(\"../assets/tokens/taf/leaf-top1.webp\");\n    }\n\n    &.taf-leaf-top2 {\n      background-image: url(\"../assets/tokens/taf/leaf-top2.webp\");\n    }\n\n    &.taf-leaf-top3 {\n      background-image: url(\"../assets/tokens/taf/leaf-top3.webp\");\n    }\n\n    &.taf-leaf-top4 {\n      background-image: url(\"../assets/tokens/taf/leaf-top4.webp\");\n    }\n  }\n\n  .name {\n    width: 100%;\n    height: 100%;\n    font-size: 20px;\n    text-transform: uppercase;\n    .label {\n      fill: black;\n      stroke: hsla(0, 0%, 100%, 0.5);\n      stroke-width: 2px;\n      paint-order: stroke;\n      font-family: \"Dumbledor 1\", serif;\n      @-moz-document url-prefix() {\n        &.mozilla {\n          stroke: none;\n          text-shadow: none;\n          filter: drop-shadow(0 1.5px 0 rgba(255, 255, 255, 0.5))\n            drop-shadow(0 -1.5px 0 rgba(255, 255, 255, 0.5))\n            drop-shadow(1.5px 0 0 rgba(255, 255, 255, 0.5))\n            drop-shadow(-1.5px 0 0 rgba(255, 255, 255, 0.5));\n        }\n      }\n    }\n  }\n\n  .edition {\n    position: absolute;\n    right: 0;\n    bottom: 5px;\n    width: 30px;\n    height: 30px;\n    background-size: 100%;\n    display: none;\n  }\n\n  .ability {\n    display: flex;\n    position: absolute;\n    padding: 5px 10px;\n    left: 120%;\n    width: 250px;\n    z-index: 25;\n    font-size: 75%;\n    font-family: \"Goudy StM\", sans-serif;\n    background: rgba(0, 0, 0, 0.625);\n    border-radius: 8px;\n    border: 3px solid black;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n    text-align: left;\n    justify-items: center;\n    align-content: center;\n    align-items: center;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n\n    &:before {\n      content: \" \";\n      border: 10px solid transparent;\n      width: 0;\n      height: 0;\n      border-right-color: black;\n      position: absolute;\n      margin-left: 2px;\n      right: 100%;\n    }\n  }\n\n  &:hover .ability {\n    opacity: 1;\n  }\n}\n.tb-token {\n  background: url(\"../assets/tokens/tb/token.webp\") center center;\n  background-size: 113%;\n}\n.bmr-token {\n  background: url(\"../assets/tokens/bmr/token.webp\") center center;\n  background-size: 113%;\n}\n.snv-token {\n  background: url(\"../assets/tokens/snv/token.webp\") center center;\n  background-size: 113%;\n}\n.taf-token {\n  background: url(\"../assets/tokens/taf/token.webp\") center center;\n  background-size: 113%;\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Token.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Token.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Token.vue?vue&type=template&id=1b9c5c1a&scoped=true\"\nimport script from \"./Token.vue?vue&type=script&lang=js\"\nexport * from \"./Token.vue?vue&type=script&lang=js\"\nimport style0 from \"./Token.vue?vue&type=style&index=0&id=1b9c5c1a&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b9c5c1a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <li :style=\"zoom\">\n    <div\n      ref=\"player\"\n      class=\"player\"\n      @focusout=\"isMenuOpen = false\"\n      tabindex=\"-1\"\n      :class=\"[\n        {\n          dead: player.isDead,\n          'invisible-dead': player.isInvisibleDead,\n          marked:\n            (!session.isSpectator || session.isVoteWatchingAllowed) &&\n            session.markedPlayer === index,\n          'hand-raised': session.handsRaised[index],\n          'menu-open': isMenuOpen && !session.reveal,\n          'no-vote': player.isVoteless,\n          you: session.sessionId && player.id && player.id === session.playerId,\n          'vote-yes':\n            (!session.isSpectator ||\n              session.isVoteWatchingAllowed ||\n              player.id === session.playerId) &&\n            session.votes[index] === 1,\n          'vote-double':\n            (!session.isSpectator ||\n              session.isVoteWatchingAllowed ||\n              player.id === session.playerId) &&\n            session.votes[index] === 2,\n          'vote-lock': voteLocked,\n          revealed: session.revealedPlayers[index],\n        },\n        player.role.team,\n        player.alignment,\n      ]\"\n    >\n      <div class=\"shroud\" @click=\"clickShroud()\">\n        <font-awesome-icon icon=\"eye-slash\" />\n      </div>\n      <div class=\"life\" @click=\"toggleStatus()\"></div>\n\n      <div\n        class=\"night-order first\"\n        :class=\"{\n          shown:\n            nightOrder.get(player).first &&\n            grimoire.isNightOrder &&\n            !grimoire.isPublic &&\n            !session.reveal,\n        }\"\n      >\n        <em>{{ nightOrder.get(player).first }}</em>\n        <span class=\"description\" v-if=\"player.role.firstNightReminder\">\n          <span v-html=\"player.role.firstNightReminder\"></span>\n        </span>\n      </div>\n      <div\n        class=\"night-order other\"\n        :class=\"{\n          shown:\n            nightOrder.get(player).other &&\n            grimoire.isNightOrder &&\n            !grimoire.isPublic &&\n            !session.reveal,\n        }\"\n      >\n        <em>{{ nightOrder.get(player).other }}</em>\n        <span class=\"description\" v-if=\"player.role.otherNightReminder\">\n          <span v-html=\"player.role.otherNightReminder\"></span>\n        </span>\n      </div>\n\n      <div class=\"menu-container\">\n        <Token\n          :role=\"player.role\"\n          :alignment=\"player.alignment\"\n          @click-token=\"clickToken()\"\n        />\n\n        <transition name=\"fold\">\n          <ul class=\"menu\" v-if=\"isMenuOpen && !session.reveal\">\n            <li @click=\"changeCharacter\" v-if=\"!session.isSpectator\">\n              <font-awesome-icon icon=\"masks-theater\" />Change Character\n            </li>\n            <li @click=\"changeAlignment\" v-if=\"player.role.id\">\n              <font-awesome-icon icon=\"yin-yang\" />Change Alignment\n            </li>\n            <li\n              @click=\"changePronouns\"\n              v-if=\"session.isSpectator && player.id === session.playerId\"\n            >\n              <font-awesome-icon icon=\"venus-mars\" />Change Pronouns\n            </li>\n            <template v-if=\"!session.isSpectator\">\n              <li\n                @click=\"swapPlayer()\"\n                :class=\"{ disabled: session.lockedVote }\"\n              >\n                <font-awesome-icon icon=\"right-left\" />\n                Swap Seats\n              </li>\n              <li @click=\"changeName\" v-if=\"!(player.id && session.sessionId)\">\n                <font-awesome-icon icon=\"user-pen\" />Rename\n              </li>\n              <li\n                @click=\"removePlayer\"\n                :class=\"{ disabled: session.lockedVote }\"\n              >\n                <font-awesome-icon icon=\"circle-xmark\" />\n                Remove\n              </li>\n              <li\n                @click=\"updatePlayer('id', '', true)\"\n                v-if=\"player.id && session.sessionId\"\n              >\n                <font-awesome-icon icon=\"chair\" />\n                Empty Seat\n              </li>\n              <template\n                v-if=\"\n                  !session.nomination && !grimoire.isNight && !session.reveal\n                \"\n              >\n                <li @click=\"nominatePlayer()\">\n                  <font-awesome-icon icon=\"hand-point-right\" />\n                  Nominate Player\n                </li>\n              </template>\n            </template>\n            <li\n              @click=\"claimSeat\"\n              v-if=\"session.isSpectator\"\n              :class=\"{ disabled: player.id && player.id !== session.playerId }\"\n            >\n              <font-awesome-icon icon=\"chair\" />\n              <template v-if=\"!player.id\"> Claim seat </template>\n              <template v-else-if=\"player.id === session.playerId\">\n                Vacate Seat\n              </template>\n              <template v-else> Seat Occupied </template>\n            </li>\n          </ul>\n        </transition>\n      </div>\n\n      <!-- Overlay icons -->\n      <div class=\"overlay\">\n        <font-awesome-icon icon=\"hand\" class=\"hand\" />\n        <font-awesome-icon\n          icon=\"hand\"\n          class=\"vote first-hand\"\n          title=\"Hand UP\"\n          @click=\"vote()\"\n        />\n        <font-awesome-icon\n          icon=\"hand\"\n          class=\"vote second-hand\"\n          title=\"Hand UP\"\n          @click=\"vote()\"\n        />\n        <font-awesome-icon\n          icon=\"xmark\"\n          class=\"vote\"\n          title=\"Hand DOWN\"\n          @click=\"vote()\"\n        />\n        <font-awesome-icon icon=\"question\" class=\"vote\" />\n        <font-awesome-icon\n          icon=\"circle-xmark\"\n          class=\"cancel\"\n          title=\"Cancel\"\n          @click=\"cancel()\"\n        />\n        <font-awesome-icon\n          icon=\"right-left\"\n          class=\"swap\"\n          @click=\"swapPlayer(player)\"\n          title=\"Swap seats with this player\"\n        />\n        <font-awesome-icon\n          icon=\"hand-point-right\"\n          class=\"nominate\"\n          @click=\"nominatePlayer(player)\"\n          title=\"Nominate this player\"\n        />\n      </div>\n\n      <!-- Claimed seat icon -->\n      <font-awesome-icon\n        icon=\"chair\"\n        v-if=\"player.id && session.sessionId\"\n        class=\"seat\"\n        :class=\"{ highlight: session.isRolesDistributed }\"\n      />\n\n      <!-- Ghost vote icon -->\n      <font-awesome-icon\n        icon=\"check-to-slot\"\n        class=\"has-vote\"\n        v-if=\"player.isDead && !player.isVoteless\"\n        @click=\"updatePlayer('isVoteless', true)\"\n        title=\"Ghost vote\"\n      />\n\n      <!-- On block icon -->\n      <div class=\"marked\">\n        <font-awesome-icon icon=\"skull\" />\n      </div>\n      <div\n        class=\"name\"\n        @click=\"isMenuOpen = !isMenuOpen\"\n        :class=\"{ active: isMenuOpen && !session.reveal }\"\n      >\n        <span>{{ player.name }}</span>\n        <span v-if=\"player.pronouns\">&emsp13;</span>\n        <font-awesome-icon icon=\"venus-mars\" v-if=\"player.pronouns\" />\n        <div class=\"pronouns\" v-if=\"player.pronouns\">\n          <span>{{ player.pronouns }}</span>\n        </div>\n      </div>\n    </div>\n\n    <template v-if=\"player.reminders\">\n      <div\n        class=\"reminder\"\n        :key=\"reminder.role + ' ' + reminder.name\"\n        v-for=\"reminder in player.reminders\"\n        :class=\"{\n          custom: reminder.role === 'custom' && reminder.name.length > 15,\n          flipped: reminder.flipped,\n        }\"\n      >\n        <span\n          class=\"icon\"\n          :style=\"{\n            backgroundImage: `url(${\n              reminder.image && grimoire.isImageOptIn\n                ? Array.isArray(reminder.image)\n                  ? reminder.image[0]\n                  : reminder.image\n                : require(\n                    '../assets/icons/' +\n                      (reminder.imageAlt || reminder.role) +\n                      (reminder.team === 'townsfolk' ||\n                      reminder.team === 'outsider'\n                        ? '_g'\n                        : reminder.team === 'minion' ||\n                            reminder.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          }\"\n        ></span>\n        <svg\n          viewBox=\"0 0 140 140\"\n          class=\"name\"\n          v-if=\"reminder.role !== 'custom' || reminder.name.length <= 15\"\n        >\n          <path\n            d=\"M 70 70 M 27.5736 27.5736 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528\"\n            id=\"circle\"\n            fill=\"transparent\"\n          />\n          <text width=\"150\" x=\"100%\" text-anchor=\"middle\" class=\"text\">\n            <textPath xlink:href=\"#circle\">\n              {{ reminder.name }}\n            </textPath>\n          </text>\n        </svg>\n        <span class=\"customText\" v-else>{{ reminder.name }}</span>\n        <div class=\"overlay\">\n          <font-awesome-icon\n            @click=\"flipReminder(reminder)\"\n            icon=\"rotate-right\"\n            class=\"flip\"\n          />\n          <font-awesome-icon\n            @click=\"removeReminder(reminder)\"\n            icon=\"trash-can\"\n            class=\"remove\"\n          />\n        </div>\n      </div>\n    </template>\n    <div class=\"reminder add\" @click=\"$emit('trigger', ['openReminderModal'])\">\n      <span class=\"icon\"></span>\n    </div>\n    <div class=\"reminderHoverTarget\"></div>\n  </li>\n</template>\n\n<script>\nimport Token from \"./Token\";\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Token,\n  },\n  props: {\n    player: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    ...mapState(\"players\", [\"players\"]),\n    ...mapState([\"grimoire\", \"session\"]),\n    ...mapGetters({ nightOrder: \"players/nightOrder\" }),\n    index: function () {\n      return this.players.indexOf(this.player);\n    },\n    voteLocked: function () {\n      const session = this.session;\n      const players = this.players.length;\n      if (!session.nomination) return false;\n      const indexAdjusted =\n        (this.index - 1 + players - session.nomination[1]) % players;\n      return indexAdjusted < session.lockedVote - 1;\n    },\n    zoom: function () {\n      if (this.players.length < 7) {\n        return { width: 18 + this.grimoire.zoom + \"vh\" };\n      } else if (this.players.length <= 10) {\n        return { width: 16 + this.grimoire.zoom + \"vh\" };\n      } else if (this.players.length <= 15) {\n        return { width: 14 + this.grimoire.zoom + \"vh\" };\n      } else {\n        return { width: 12 + this.grimoire.zoom + \"vh\" };\n      }\n    },\n  },\n  data() {\n    return {\n      isMenuOpen: false,\n      isSwap: false,\n    };\n  },\n  methods: {\n    changeCharacter() {\n      if (this.session.reveal) return;\n      this.$emit(\"trigger\", [\"openRoleModal\"]);\n      this.isMenuOpen = !this.isMenuOpen;\n    },\n    changeAlignment() {\n      if (this.session.reveal) return;\n      let newAlignment = \"g\";\n      if (this.player.alignment === \"g\") {\n        newAlignment = \"e\";\n      } else if (this.player.alignment === \"e\") {\n        newAlignment = this.player.role.team === \"traveler\" ? \"n\" : \"g\";\n      }\n      this.updatePlayer(\"alignment\", newAlignment);\n    },\n    changePronouns() {\n      if (this.session.isSpectator && this.player.id !== this.session.playerId)\n        return;\n      const pronouns = prompt(\"Player Pronouns\", this.player.pronouns);\n      //Only update pronouns if not null (prompt was not cancelled)\n      if (pronouns !== null) {\n        this.updatePlayer(\"pronouns\", pronouns, true);\n      }\n    },\n    clickToken() {\n      if (this.session.reveal) {\n        this.reveal();\n      } else if (this.session.isSpectator) {\n        this.$emit(\"trigger\", [\"openRoleModal\"]);\n      } else {\n        this.isMenuOpen = !this.isMenuOpen;\n      }\n    },\n    clickShroud() {\n      if (this.grimoire.isNight) {\n        if (this.player.isDead) return;\n        this.updatePlayer(\"isInvisibleDead\", !this.player.isInvisibleDead);\n        if (this.player.isInvisibleDead) {\n          this.$emit(\"trigger\", [\"openDeathReminderModal\"]);\n        }\n      } else {\n        this.updatePlayer(\"isDead\", !this.player.isDead);\n        if (this.player.isDead) {\n          const reminders = [...this.player.reminders].filter(\n            (reminder) => reminder.name !== \"Dead\",\n          );\n          this.updatePlayer(\"reminders\", reminders, true);\n        }\n        if (this.session.markedPlayer === this.index) {\n          this.$store.commit(\"session/setMarkedPlayer\", -1);\n        }\n        if (this.player.isInvisibleDead) {\n          this.updatePlayer(\"isInvisibleDead\", false);\n        }\n        if (this.player.isVoteless) {\n          this.updatePlayer(\"isVoteless\", false);\n        }\n      }\n    },\n    reveal() {\n      if (\n        this.session.isSpectator ||\n        !this.session.reveal ||\n        this.session.revealedPlayers[this.index]\n      )\n        return;\n      this.$store.commit(\"session/reveal\", this.index);\n      if (\n        this.session.revealedPlayers.filter(Boolean).length >=\n        this.players.length\n      ) {\n        setTimeout(() => {\n          this.$store.commit(\"session/setReveal\", {\n            isRevealInProgress: false,\n          });\n        }, 3000);\n      }\n    },\n    toggleStatus() {\n      if (this.session.reveal) {\n        this.reveal();\n      } else if (!this.grimoire.isNight) {\n        if (!this.player.isDead) {\n          this.updatePlayer(\"isDead\", true);\n          if (this.session.markedPlayer === this.index) {\n            this.$store.commit(\"session/setMarkedPlayer\", -1);\n          }\n          if (this.player.isInvisibleDead) {\n            this.updatePlayer(\"isInvisibleDead\", false);\n          }\n        } else if (this.player.isVoteless) {\n          this.updatePlayer(\"isVoteless\", false);\n          this.updatePlayer(\"isDead\", false);\n        } else {\n          this.updatePlayer(\"isVoteless\", true);\n        }\n      }\n    },\n    changeName() {\n      if (this.session.isSpectator) return;\n      const name = prompt(\"Player Name\", this.player.name) || this.player.name;\n      this.updatePlayer(\"name\", name, true);\n    },\n    removeReminder(reminder) {\n      if (\n        !this.session.isSpectator &&\n        this.session.nomination &&\n        reminder.role === \"banshee\" &&\n        reminder.name === \"Has Ability\"\n      ) {\n        this.$store.commit(\"players/update\", {\n          player: this.player,\n          property: \"hasDoubleVotes\",\n          value: false,\n        });\n      }\n      const reminders = [...this.player.reminders];\n      reminders.splice(this.player.reminders.indexOf(reminder), 1);\n      this.updatePlayer(\"reminders\", reminders, true);\n    },\n    flipReminder(reminder) {\n      const reminders = [...this.player.reminders];\n      reminder.flipped = !reminder.flipped;\n      this.updatePlayer(\"reminders\", reminders, true);\n    },\n    updatePlayer(property, value, closeMenu = false) {\n      if (\n        this.session.isSpectator &&\n        property !== \"reminders\" &&\n        property !== \"pronouns\" &&\n        property !== \"alignment\"\n      )\n        return;\n      this.$store.commit(\"players/update\", {\n        player: this.player,\n        property,\n        value,\n      });\n      if (closeMenu) {\n        this.isMenuOpen = false;\n      }\n    },\n    removePlayer() {\n      if (this.session.reveal) return;\n      this.isMenuOpen = false;\n      this.$emit(\"trigger\", [\"removePlayer\"]);\n    },\n    swapPlayer(player) {\n      if (this.session.reveal) return;\n      this.isMenuOpen = false;\n      this.$emit(\"trigger\", [\"swapPlayer\", player]);\n    },\n    nominatePlayer(player) {\n      if (this.session.reveal) return;\n      this.isMenuOpen = false;\n      this.$emit(\"trigger\", [\"nominatePlayer\", player]);\n    },\n    cancel() {\n      this.$emit(\"trigger\", [\"cancel\"]);\n    },\n    claimSeat() {\n      this.isMenuOpen = false;\n      this.$emit(\"trigger\", [\"claimSeat\"]);\n    },\n    /**\n     * Allow the ST to override a locked vote.\n     */\n    vote() {\n      if (this.session.isSpectator || !this.voteLocked) return;\n      let votes = this.session.votes[this.index];\n      if (this.player.hasDoubleVotes && votes === 1) {\n        votes = 2;\n      } else if ((this.player.hasDoubleVotes && votes === 2) || votes === 1) {\n        votes = 0;\n      } else {\n        votes = 1;\n      }\n      this.$store.commit(\"session/voteSync\", [this.index, votes]);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../vars.scss\";\n\n.fold-enter-active,\n.fold-leave-active {\n  transition: transform 250ms ease-in-out;\n  transform-origin: right center;\n  transform: perspective(200px);\n}\n.fold-enter,\n.fold-leave-to {\n  transform: perspective(200px) rotateY(-90deg);\n}\n\n/***** Player token *****/\n.circle .player {\n  margin-bottom: 10px;\n\n  &:before {\n    content: \" \";\n    display: block;\n    padding-top: 50%;\n  }\n\n  &:focus {\n    outline: 0 solid rgba(0, 0, 0, 0);\n  }\n\n  .shroud {\n    top: 0;\n    left: 0;\n    position: absolute;\n    width: 100%;\n    height: 50%;\n    cursor: pointer;\n    transform: rotateX(0deg);\n    transform-origin: top center;\n    transition: transform 200ms ease-in-out;\n    z-index: 2;\n    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.8));\n\n    svg {\n      opacity: 0;\n      top: 0;\n      left: 50%;\n      transform: translateX(-50%);\n      transition: opacity 150ms ease-in-out;\n    }\n\n    &:before {\n      content: \" \";\n      background: url(\"../assets/shroud.webp\") center 0 no-repeat;\n      background-size: auto 100%;\n      position: absolute;\n      margin-left: -50%;\n      width: 100%;\n      height: 100%;\n      left: 50%;\n      top: -30%;\n      opacity: 0;\n      transform: perspective(400px) scale(1.5);\n      transform-origin: top center;\n      transition: all 200ms;\n      pointer-events: none;\n    }\n\n    #townsquare.spectator & {\n      pointer-events: none;\n    }\n\n    #townsquare:not(.spectator) &:hover:before {\n      opacity: 0.5;\n      top: -10%;\n      transform: scale(1);\n    }\n  }\n\n  &.invisible-dead .shroud {\n    &:before {\n      opacity: 0.5;\n      top: -10%;\n      transform: perspective(400px) scale(1);\n    }\n\n    svg {\n      opacity: 1;\n    }\n  }\n\n  &.dead .shroud:before {\n    opacity: 1;\n    top: 0;\n    transform: perspective(400px) scale(1);\n  }\n\n  #townsquare:not(.spectator) &.dead .shroud:hover:before {\n    opacity: 1;\n  }\n\n  #townsquare:not(.spectator).night &.dead .shroud {\n    pointer-events: none;\n    &:hover:before {\n      opacity: 1;\n      top: 0;\n    }\n  }\n}\n\n/****** Life token *******/\n.player {\n  z-index: 2;\n  .life {\n    border-radius: 50%;\n    width: 100%;\n    background: url(\"../assets/life.webp\") center center;\n    background-size: 100%;\n    border: 2px solid black;\n    cursor: pointer;\n    transition:\n      transform 200ms ease-in-out,\n      filter 200ms ease-in-out;\n    transform: perspective(400px) rotateY(0deg);\n    backface-visibility: hidden;\n    position: absolute;\n    left: 0;\n    top: 0;\n\n    &:before {\n      content: \" \";\n      display: block;\n      padding-top: 100%;\n    }\n  }\n\n  &.traveler .life {\n    background: url(\"../assets/traveler.webp\") center center;\n    background-size: 100%;\n  }\n\n  &.dead {\n    &.no-vote .life:after {\n      display: none;\n    }\n\n    .life {\n      background-image: url(\"../assets/death.webp\");\n\n      &:after {\n        content: \" \";\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        background: url(\"../assets/vote.webp\") center center no-repeat;\n        background-size: 70%;\n        height: 100%;\n        pointer-events: none;\n      }\n    }\n  }\n}\n\n#townsquare.spectator .player .life {\n  pointer-events: none;\n}\n\n#townsquare.public .player .shroud {\n  transform: perspective(400px) rotateX(90deg);\n  pointer-events: none;\n}\n#townsquare.reveal .player .shroud {\n  transform: perspective(400px) rotateX(90deg);\n  pointer-events: none;\n  transition-delay: 0s;\n}\n\n#townsquare:not(.public):not(.reveal) .player .life,\n#townsquare.reveal:not(.spectator) .player:not(.revealed):hover .life {\n  transform: perspective(400px) rotateY(180deg);\n}\n\n#townsquare.reveal .player .life {\n  filter: brightness(0.45);\n}\n\n#townsquare.reveal .player.revealed .life {\n  transform: perspective(400px) rotateY(180deg);\n  #app:not(.static) & {\n    animation: revealLife 300ms ease-in-out !important;\n\n    @keyframes revealLife {\n      0% {\n        transform: perspective(400px) rotateY(0deg);\n      }\n      100% {\n        transform: perspective(400px) rotateY(180deg);\n      }\n    }\n  }\n}\n\n#townsquare.reveal .player .life {\n  transition-delay: 0s;\n}\n\n.player .menu-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 50%;\n  #townsquare:not(.spectator):not(.reveal) &:hover ~ .name {\n    color: $gold;\n  }\n}\n\n/***** Role token ******/\n.player .menu-container .token {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  transition: transform 200ms ease-in-out;\n  transform: perspective(400px) rotateY(-180deg);\n  backface-visibility: hidden;\n}\n\n#townsquare:not(.public):not(.reveal) .circle .token,\n#townsquare.reveal:not(.spectator) .circle .player:not(.revealed):hover .token {\n  transform: perspective(400px) rotateY(0deg);\n}\n\n#townsquare.reveal .circle .player.revealed .token {\n  transform: perspective(400px) rotateY(0deg);\n  #app:not(.static) & {\n    animation: revealToken 400ms ease-in-out !important;\n\n    @keyframes revealToken {\n      0% {\n        transform: perspective(400px) rotateY(-180deg);\n      }\n      50% {\n        filter: brightness(1.5);\n      }\n      75% {\n        filter: brightness(1.375);\n      }\n      100% {\n        transform: perspective(400px) rotateY(0deg);\n        filter: brightness(1);\n      }\n    }\n  }\n\n  & .name,\n  & .icon {\n    animation: revealRole 500ms ease-in-out;\n\n    @keyframes revealRole {\n      0%,\n      50% {\n        transform: scale(1.75);\n      }\n      100% {\n        transform: scale(1);\n      }\n    }\n  }\n}\n\n#townsquare.reveal .circle .player .token {\n  transition-delay: 0s;\n}\n\n#townsquare:not(.public):not(.reveal).spin .player.you {\n  .menu-container .token {\n    transform-style: preserve-3d;\n    animation:\n      spinRole 3s cubic-bezier(0.52, 0.1, 0.34, 1),\n      fadeToken 1.85s linear;\n    > *:not(.ability) {\n      animation: fadeRole 1.85s linear;\n    }\n    .ability {\n      opacity: 0;\n    }\n  }\n\n  #app.tb & .menu-container .token {\n    animation:\n      spinRole 3s cubic-bezier(0.52, 0.1, 0.34, 1),\n      fadeTokenTb 1.85s linear;\n  }\n\n  #app.bmr & .menu-container .token {\n    animation:\n      spinRole 3s cubic-bezier(0.52, 0.1, 0.34, 1),\n      fadeTokenBmr 1.85s linear;\n  }\n\n  #app.snv & .menu-container .token {\n    animation:\n      spinRole 3s cubic-bezier(0.52, 0.1, 0.34, 1),\n      fadeTokenSnv 1.85s linear;\n  }\n\n  .life {\n    animation: spinLife 3s cubic-bezier(0.52, 0.1, 0.34, 1);\n  }\n\n  @keyframes spinRole {\n    0% {\n      transform: perspective(400px) rotateY(0deg);\n    }\n    100% {\n      transform: perspective(400px) rotateY(-3600deg);\n    }\n  }\n  @keyframes fadeToken {\n    0%,\n    60% {\n      background: url(\"../assets/tokens/token.webp\") center center;\n      background-size: 113%;\n    }\n  }\n  @keyframes fadeTokenTb {\n    0%,\n    60% {\n      background: url(\"../assets/tokens/tb/token.webp\") center center;\n      background-size: 113%;\n    }\n  }\n  @keyframes fadeTokenBmr {\n    0%,\n    60% {\n      background: url(\"../assets/tokens/bmr/token.webp\") center center;\n      background-size: 113%;\n    }\n  }\n  @keyframes fadeTokenSnv {\n    0%,\n    60% {\n      background: url(\"../assets/tokens/snv/token.webp\") center center;\n      background-size: 113%;\n    }\n  }\n  @keyframes fadeRole {\n    0%,\n    60% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n  @keyframes spinLife {\n    0% {\n      transform: perspective(400px) rotateY(180deg);\n    }\n    100% {\n      transform: perspective(400px) rotateY(-3420deg);\n    }\n  }\n}\n\n/****** Player choice icons *******/\n.player .overlay {\n  width: 100%;\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  &:after {\n    content: \" \";\n    display: block;\n    padding-top: 100%;\n  }\n}\n.player .overlay svg {\n  position: absolute;\n  filter: drop-shadow(0 0 3px black);\n  z-index: 2;\n  cursor: pointer;\n  &.hand,\n  &.swap,\n  &.nominate,\n  &.vote,\n  &.cancel {\n    width: 50%;\n    height: 60%;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 250ms;\n    transform: scale(0.2);\n    * {\n      stroke-width: 10px;\n      stroke: black;\n      fill: url(#gold-overlay);\n    }\n    &:hover * {\n      fill: url(#default-overlay);\n    }\n    &.fa-hand * {\n      fill: url(#gold-overlay);\n    }\n    &.hand.fa-hand {\n      width: 60%;\n      height: 72%;\n      transform: none;\n      transform-origin: center 150%;\n      transition: all 350ms;\n    }\n    &.fa-xmark * {\n      fill: url(#purple-overlay);\n    }\n    &.fa-question * {\n      fill: url(#default-overlay);\n    }\n  }\n}\n\n.player.hand-raised .overlay svg.hand.fa-hand {\n  opacity: 1;\n  transform: rotateZ(45deg) translateY(-25%);\n}\n\n#townsquare.reveal .player .overlay svg.hand.fa-hand,\n#townsquare.vote .player .overlay svg.hand.fa-hand {\n  opacity: 0;\n}\n\n#townsquare.vote .player .overlay svg.first-hand.fa-hand {\n  right: 25%;\n}\n#townsquare.vote .player .overlay svg.second-hand.fa-hand {\n  left: 25%;\n}\n\n#townsquare.vote .player.vote-double .overlay svg.first-hand.fa-hand {\n  right: 0;\n  width: 48%;\n}\n#townsquare.vote .player.vote-double .overlay svg.second-hand.fa-hand {\n  left: 0;\n  width: 48%;\n}\n\n// other player voted yes, but is not locked yet\n#townsquare.vote .player.vote-yes .overlay svg.first-hand.fa-hand,\n#townsquare.vote .player.vote-double .overlay svg.vote.fa-hand {\n  opacity: 0.75;\n  transform: scale(0.85);\n}\n#townsquare.vote .player.vote-double .overlay svg.second-hand.fa-hand {\n  transform: scale(-0.85, 0.85);\n}\n\n// you are st, a locked vote yes | you are st, a locked vote no\n#townsquare.vote:not(.spectator)\n  .player.vote-lock.vote-yes\n  .overlay\n  svg.first-hand.fa-hand,\n#townsquare.vote:not(.spectator)\n  .player.vote-lock.vote-double\n  .overlay\n  svg.vote.fa-hand,\n#townsquare.vote:not(.spectator)\n  .player.vote-lock:not(.vote-yes):not(.vote-double)\n  .overlay\n  svg.vote.fa-xmark {\n  opacity: 1;\n  transform: scale(1);\n  pointer-events: all;\n}\n#townsquare.vote:not(.spectator)\n  .player.vote-lock.vote-double\n  .overlay\n  svg.second-hand.fa-hand {\n  transform: scale(-1, 1);\n}\n\n// you are st, vote Watching disabled, an unlocked vote yes | you are st, vote Watching disabled, a vote no\n#townsquare.vote:not(.spectator):not(.voteWatching)\n  .player:not(.vote-lock)\n  .overlay\n  svg.vote.fa-hand\n  *,\n#townsquare.vote:not(.spectator):not(.voteWatching)\n  .player\n  .overlay\n  svg.vote.fa-xmark\n  * {\n  fill: url(#default-overlay);\n}\n\n// you voted yes | a locked vote yes | Vote Watching enabled, a locked vote no | Vote Watching disabled, your locked vote no\n#townsquare.vote .player.you.vote-yes .overlay svg.first-hand.fa-hand,\n#townsquare.vote .player.you.vote-double .overlay svg.vote.fa-hand,\n#townsquare.vote .player.vote-lock.vote-yes .overlay svg.first-hand.fa-hand,\n#townsquare.vote .player.vote-lock.vote-double .overlay svg.vote.fa-hand,\n#townsquare.vote.voteWatching\n  .player.vote-lock:not(.vote-yes):not(.vote-double)\n  .overlay\n  svg.vote.fa-xmark,\n#townsquare.vote:not(voteWatching)\n  .player.you.vote-lock:not(.vote-yes):not(.vote-double)\n  .overlay\n  svg.vote.fa-xmark {\n  opacity: 1;\n  transform: scale(1);\n}\n#townsquare.vote .player.you.vote-double .overlay svg.second-hand.fa-hand,\n#townsquare.vote\n  .player.vote-lock.vote-double\n  .overlay\n  svg.second-hand.fa-hand {\n  transform: scale(-1, 1);\n}\n\n// Vote Watching disabled, a locked vote\n#townsquare.vote.spectator:not(.voteWatching)\n  .player:not(.you).vote-lock\n  .overlay\n  svg.vote.fa-question {\n  opacity: 1;\n  transform: scale(0.8);\n}\n\nli.from:not(.nominate) .player .overlay svg.cancel {\n  opacity: 1;\n  transform: scale(1);\n  pointer-events: all;\n}\n\nli.swap:not(.from) .player .overlay svg.swap,\nli.nominate .player .overlay svg.nominate {\n  opacity: 1;\n  transform: scale(1);\n  pointer-events: all;\n}\n\n/****** Vote icon ********/\n.player .has-vote {\n  color: #fff;\n  filter: drop-shadow(0 0 3px black);\n  transition: opacity 250ms;\n  z-index: 2;\n\n  #townsquare.public &,\n  #townsquare.reveal & {\n    opacity: 0;\n    pointer-events: none;\n  }\n}\n\n.has-vote {\n  position: absolute;\n  margin-top: -15%;\n  right: 2px;\n}\n\n/****** Session seat glow *****/\n@mixin glow($name, $color) {\n  @keyframes #{$name}-glow {\n    0% {\n      box-shadow: 0 0 rgba($color, 1);\n      border-color: $color;\n    }\n    50% {\n      border-color: black;\n    }\n    100% {\n      box-shadow: 0 0 20px 16px transparent;\n      border-color: $color;\n    }\n  }\n\n  .player.you.#{$name} .token {\n    animation: #{$name}-glow 5s ease-in-out infinite;\n  }\n}\n\n@include glow(\"townsfolk\", $townsfolk);\n@include glow(\"outsider\", $outsider);\n@include glow(\"minion\", $minion);\n@include glow(\"demon\", $demon);\n@include glow(\"traveler\", $traveler);\n@include glow(\"none\", #f4c560);\n\n@mixin glow($name, $alignment, $color) {\n  @keyframes #{$name + $alignment}-glow {\n    0% {\n      box-shadow: 0 0 rgba($color, 1);\n      border-color: $color;\n    }\n    50% {\n      border-color: black;\n    }\n    100% {\n      box-shadow: 0 0 20px 16px transparent;\n      border-color: $color;\n    }\n  }\n\n  .player.you.#{$name}.#{$alignment} .token {\n    animation: #{$name + $alignment}-glow 5s ease-in-out infinite;\n  }\n}\n\n@include glow(\"townsfolk\", \"e\", $minion);\n@include glow(\"outsider\", \"e\", $minion);\n@include glow(\"minion\", \"g\", $outsider);\n@include glow(\"demon\", \"g\", $outsider);\n\n.player.you .token {\n  animation: none-glow 5s ease-in-out infinite;\n}\n\n/****** Marked icon ******/\n.player .marked {\n  position: absolute;\n  width: 100%;\n  top: 0;\n  filter: drop-shadow(0px 0px 3px black);\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 250ms;\n  opacity: 0;\n  &:before {\n    content: \" \";\n    padding-top: 100%;\n    display: block;\n  }\n  svg {\n    height: 55%;\n    width: 55%;\n    position: absolute;\n    stroke: black;\n    stroke-width: 10px;\n    path {\n      fill: white;\n    }\n  }\n}\n.player.marked .marked {\n  opacity: 0.5;\n}\n\n/****** Seat icon ********/\n.player .seat {\n  position: absolute;\n  left: 2px;\n  margin-top: -15%;\n  color: #fff;\n  filter: drop-shadow(0 0 3px black);\n  cursor: default;\n  transition: opacity 250ms;\n  z-index: 2;\n  &.highlight {\n    animation-iteration-count: 1;\n    animation: purpleToWhite 1s normal forwards;\n  }\n  #townsquare.reveal & {\n    opacity: 0;\n  }\n}\n\n// highlight animation\n@keyframes purpleToWhite {\n  from {\n    color: $purple;\n  }\n  to {\n    color: white;\n  }\n}\n\n.player.you .seat {\n  color: $gold;\n}\n\n/***** Player name *****/\n.player > .name {\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  justify-content: center;\n  font-size: 95%;\n  font-family: \"Goudy StM\", sans-serif;\n  line-height: 120%;\n  cursor: pointer;\n  white-space: nowrap;\n  width: fit-content;\n  background: rgba(0, 0, 0, 0.55);\n  border: 2px solid black;\n  border-radius: 10px;\n  top: 5px;\n  padding: 0 4px;\n  max-width: 160px;\n  transition: all 250ms ease-in-out;\n\n  svg {\n    top: 3px;\n    margin-right: 2px;\n  }\n\n  span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    text-align: center;\n    flex-grow: 1;\n  }\n\n  &:hover,\n  &.active {\n    color: $gold;\n  }\n\n  &:hover .pronouns {\n    opacity: 1;\n  }\n\n  .pronouns {\n    display: flex;\n    position: absolute;\n    right: 110%;\n    max-width: 250px;\n    z-index: 25;\n    background: rgba(0, 0, 0, 0.625);\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n    border-radius: 10px;\n    border: 2px solid black;\n    align-items: center;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    padding: 0 4px;\n    bottom: -2px;\n    color: white;\n\n    &:before {\n      content: \" \";\n      border: 10px solid transparent;\n      width: 0;\n      height: 0;\n      border-left-color: black;\n      position: absolute;\n      margin-left: 1px;\n      left: 100%;\n    }\n  }\n}\n\n#townsquare.reveal .player > .name {\n  pointer-events: none;\n  background: none;\n  border: 2px solid transparent;\n  top: 0;\n}\n#townsquare.reveal.spectator .player:not(.revealed) > .name {\n  opacity: 0;\n}\n\n/***** Player menu *****/\n.player > .menu-container > .menu {\n  position: absolute;\n  right: 110%;\n  text-align: left;\n  font-family: \"Goudy StM\", sans-serif;\n  font-size: 90%;\n  white-space: nowrap;\n  background: rgba(0, 0, 0, 0.625);\n  padding: 2px 5px;\n  border-radius: 10px;\n  border: 3px solid #000;\n  margin-right: 15px;\n  cursor: pointer;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n\n  &:before {\n    content: \" \";\n    width: 0;\n    height: 0;\n    position: absolute;\n    border: 10px solid transparent;\n    border-left-color: black;\n    left: 100%;\n    margin-left: 1px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  li:hover {\n    color: $gold;\n  }\n\n  li.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    &:hover {\n      color: white;\n    }\n  }\n\n  svg {\n    margin-right: 2px;\n    vertical-align: middle;\n  }\n}\n\n/***** Ability text *****/\n#townsquare.public .circle .ability,\n#townsquare.reveal .circle .ability {\n  display: none;\n}\n\n.circle .player .shroud:hover ~ .menu-container .token .ability,\n.circle .player .token:hover .ability {\n  opacity: 0;\n}\n\n.circle .player:not(.menu-open) .shroud:hover ~ .menu-container .token .ability,\n.circle .player:not(.menu-open) .token:hover .ability {\n  opacity: 1;\n}\n\n/**** Night reminders ****/\n.player .night-order {\n  z-index: 3;\n}\n\n.player.dead .night-order em,\n.player.invisible-dead .night-order em {\n  color: #ddd;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, gray 100%);\n}\n\n.player .night-order em:hover + .description {\n  opacity: 0;\n}\n\n.player:not(.menu-open) .night-order em:hover + .description {\n  opacity: 1;\n}\n\n/***** Reminder token *****/\n.circle .reminder {\n  background: url(\"../assets/reminder.webp\") center center;\n  background-size: 113%;\n  width: 50%;\n  height: 0;\n  padding-bottom: 50%;\n  box-sizing: content-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px 0 0 -25%;\n  border-radius: 50%;\n  border: 2px solid black;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  transition: all 250ms;\n  cursor: pointer;\n  transform: none;\n\n  .name {\n    margin-top: 100%;\n    position: absolute;\n    .text {\n      fill: white;\n      font-family: \"Trade Gothic LT Std\", sans-serif;\n      font-size: 22px;\n      font-weight: bold;\n      letter-spacing: 1px;\n      text-align: center;\n      height: 100%;\n      width: 100%;\n    }\n  }\n\n  .icon {\n    content: \" \";\n    position: absolute;\n    top: 0;\n    width: 90%;\n    height: 90%;\n    background-size: 100%;\n    background-position: center 0;\n    background-repeat: no-repeat;\n  }\n\n  & .overlay {\n    position: absolute;\n    display: flex;\n    justify-content: space-evenly;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    transform: none;\n    opacity: 0;\n    transition: all 250ms;\n    & * {\n      width: 45%;\n      height: 100%;\n      stroke: black;\n      stroke-width: 10px;\n      &:hover * {\n        fill: url(#gold-overlay);\n      }\n    }\n  }\n\n  &.add {\n    opacity: 0;\n    top: 30px;\n    &:after {\n      display: none;\n    }\n    .icon {\n      top: 5%;\n    }\n  }\n\n  &.custom {\n    .icon {\n      display: none;\n    }\n    .customText {\n      color: white;\n      text-shadow:\n        0 1px 1px #000,\n        0 -1px 1px #000,\n        1px 0 1px #000,\n        -1px 0 1px #000;\n      font-family: \"Trade Gothic LT Std\", sans-serif;\n      font-size: 60%;\n      font-weight: bold;\n      text-align: center;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      word-break: break-word;\n      margin-top: 0;\n      display: flex;\n      align-items: center;\n      align-content: center;\n      justify-content: center;\n      border-radius: 50%;\n      top: 0;\n      line-height: 90%;\n    }\n  }\n\n  &:hover .overlay {\n    opacity: 1;\n  }\n}\n\n.circle .reminderHoverTarget {\n  opacity: 0;\n  width: calc(50% + 8px);\n  padding-top: calc(50% + 38px);\n  margin-top: calc(-25% - 33px);\n  margin-left: calc(-25% - 4px);\n  border-radius: 0 0 999px 999px;\n  pointer-events: auto;\n  transform: none !important;\n  z-index: -1;\n}\n\n.circle .reminder.add:has(+ .reminderHoverTarget:hover),\n.circle .reminder:hover + .reminder.add,\n.circle .reminder.add:hover {\n  opacity: 1;\n  top: 0;\n}\n\n#townsquare.public .circle .reminder,\n#townsquare.reveal .circle .reminder {\n  opacity: 0;\n  pointer-events: none;\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Player.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Player.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Player.vue?vue&type=template&id=39fba21e\"\nimport script from \"./Player.vue?vue&type=script&lang=js\"\nexport * from \"./Player.vue?vue&type=script&lang=js\"\nimport style0 from \"./Player.vue?vue&type=style&index=0&id=39fba21e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{style:(_vm.zoom)},[_c('div',{ref:\"storyteller\",staticClass:\"storyteller\",class:[{ 'menu-open': _vm.isMenuOpen }, _vm.storyteller.role.team],attrs:{\"tabindex\":\"-1\"},on:{\"focusout\":function($event){_vm.isMenuOpen = false}}},[_c('div',{staticClass:\"night-order first\",class:{\n        shown:\n          _vm.nightOrder.get(_vm.storyteller).first &&\n          _vm.grimoire.isNightOrder &&\n          !_vm.session.reveal,\n      }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(_vm.storyteller).first))]),(_vm.storyteller.role.firstNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.storyteller.role.firstNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"night-order other\",class:{\n        shown:\n          _vm.nightOrder.get(_vm.storyteller).other &&\n          _vm.grimoire.isNightOrder &&\n          !_vm.session.reveal,\n      }},[_c('em',[_vm._v(_vm._s(_vm.nightOrder.get(_vm.storyteller).other))]),(_vm.storyteller.role.otherNightReminder)?_c('span',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.storyteller.role.otherNightReminder)}})]):_vm._e()]),_c('div',{staticClass:\"menu-container\"},[_c('Token',{attrs:{\"role\":_vm.storyteller.role},on:{\"click-token\":function($event){_vm.isMenuOpen = !_vm.isMenuOpen}}}),_c('transition',{attrs:{\"name\":\"fold\"}},[(_vm.isMenuOpen)?_c('ul',{staticClass:\"menu\"},[_c('li',{on:{\"click\":function($event){_vm.$emit('trigger', ['openRoleModal']);\n              _vm.isMenuOpen = !_vm.isMenuOpen;}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"masks-theater\"}}),_vm._v(\"Change Ability \")],1),(_vm.session.isSpectator)?_c('li',{on:{\"click\":function($event){_vm.$emit('trigger', ['openReminderModal']);\n              _vm.isMenuOpen = false;}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-plus\"}}),_vm._v(\"Add Reminder \")],1):_vm._e(),(!_vm.session.isSpectator)?_c('li',{on:{\"click\":_vm.changePronouns}},[_c('font-awesome-icon',{attrs:{\"icon\":\"venus-mars\"}}),_vm._v(\"Change Pronouns \")],1):_vm._e(),(!_vm.session.isSpectator)?_c('li',{on:{\"click\":_vm.changeName}},[_c('font-awesome-icon',{attrs:{\"icon\":\"user-pen\"}}),_vm._v(\"Rename \")],1):_vm._e()]):_vm._e()])],1),_c('div',{staticClass:\"name\",class:{ active: _vm.isMenuOpen },on:{\"click\":function($event){_vm.isMenuOpen = !_vm.isMenuOpen}}},[_c('span',[_vm._v(_vm._s(_vm.storyteller.name))]),(_vm.storyteller.pronouns)?_c('span',[_vm._v(\"\")]):_vm._e(),(_vm.storyteller.pronouns)?_c('font-awesome-icon',{attrs:{\"icon\":\"venus-mars\"}}):_vm._e(),(_vm.storyteller.pronouns)?_c('div',{staticClass:\"pronouns\"},[_c('span',[_vm._v(_vm._s(_vm.storyteller.pronouns))])]):_vm._e()],1)]),(_vm.storyteller.reminders)?_vm._l((_vm.storyteller.reminders),function(reminder){return _c('div',{key:reminder.role + ' ' + reminder.name,staticClass:\"reminder\",class:{\n        custom: reminder.role === 'custom' && reminder.name.length > 15,\n        flipped: reminder.flipped,\n      }},[_c('span',{staticClass:\"icon\",style:({\n          backgroundImage: `url(${\n            reminder.image && _vm.grimoire.isImageOptIn\n              ? reminder.image\n              : require(\n                  '../assets/icons/' +\n                    (reminder.imageAlt || reminder.role) +\n                    (reminder.team === 'townsfolk' ||\n                    reminder.team === 'outsider'\n                      ? '_g'\n                      : reminder.team === 'minion' ||\n                          reminder.team === 'demon'\n                        ? '_e'\n                        : '') +\n                    '.webp',\n                )\n          })`,\n        })}),(reminder.role !== 'custom' || reminder.name.length <= 15)?_c('svg',{staticClass:\"name\",attrs:{\"viewBox\":\"10 10 180 180\"}},[_c('path',{attrs:{\"d\":\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\",\"id\":\"circle\",\"fill\":\"transparent\",\"transform\":\"rotate(48, 100, 100)\"}}),_c('text',{staticClass:\"text\",attrs:{\"width\":\"150\",\"dx\":\"100%\",\"text-anchor\":\"middle\"}},[_c('textPath',{attrs:{\"xlink:href\":\"#circle\"}},[_vm._v(\" \"+_vm._s(reminder.name)+\" \")])])]):_c('span',{staticClass:\"customText\"},[_vm._v(_vm._s(reminder.name))]),_c('div',{staticClass:\"overlay\"},[_c('font-awesome-icon',{staticClass:\"flip\",attrs:{\"icon\":\"rotate-right\"},on:{\"click\":function($event){return _vm.flipReminder(reminder)}}}),_c('font-awesome-icon',{staticClass:\"remove\",attrs:{\"icon\":\"trash-can\"},on:{\"click\":function($event){return _vm.removeReminder(reminder)}}})],1)])}):_vm._e(),(!_vm.session.isSpectator)?_c('div',{staticClass:\"reminder add\",on:{\"click\":function($event){return _vm.$emit('trigger', ['openReminderModal'])}}},[_c('span',{staticClass:\"icon\"})]):_vm._e(),(!_vm.session.isSpectator)?_c('div',{staticClass:\"reminderHoverTarget\"}):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <li :style=\"zoom\">\n    <div\n      ref=\"storyteller\"\n      class=\"storyteller\"\n      @focusout=\"isMenuOpen = false\"\n      tabindex=\"-1\"\n      :class=\"[{ 'menu-open': isMenuOpen }, storyteller.role.team]\"\n    >\n      <div\n        class=\"night-order first\"\n        :class=\"{\n          shown:\n            nightOrder.get(storyteller).first &&\n            grimoire.isNightOrder &&\n            !session.reveal,\n        }\"\n      >\n        <em>{{ nightOrder.get(storyteller).first }}</em>\n        <span class=\"description\" v-if=\"storyteller.role.firstNightReminder\">\n          <span v-html=\"storyteller.role.firstNightReminder\"></span>\n        </span>\n      </div>\n      <div\n        class=\"night-order other\"\n        :class=\"{\n          shown:\n            nightOrder.get(storyteller).other &&\n            grimoire.isNightOrder &&\n            !session.reveal,\n        }\"\n      >\n        <em>{{ nightOrder.get(storyteller).other }}</em>\n        <span class=\"description\" v-if=\"storyteller.role.otherNightReminder\">\n          <span v-html=\"storyteller.role.otherNightReminder\"></span>\n        </span>\n      </div>\n\n      <div class=\"menu-container\">\n        <Token\n          :role=\"storyteller.role\"\n          @click-token=\"isMenuOpen = !isMenuOpen\"\n        />\n\n        <transition name=\"fold\">\n          <ul class=\"menu\" v-if=\"isMenuOpen\">\n            <li\n              @click=\"\n                $emit('trigger', ['openRoleModal']);\n                isMenuOpen = !isMenuOpen;\n              \"\n            >\n              <font-awesome-icon icon=\"masks-theater\" />Change Ability\n            </li>\n            <li\n              @click=\"\n                $emit('trigger', ['openReminderModal']);\n                isMenuOpen = false;\n              \"\n              v-if=\"session.isSpectator\"\n            >\n              <font-awesome-icon icon=\"circle-plus\" />Add Reminder\n            </li>\n            <li @click=\"changePronouns\" v-if=\"!session.isSpectator\">\n              <font-awesome-icon icon=\"venus-mars\" />Change Pronouns\n            </li>\n            <li @click=\"changeName\" v-if=\"!session.isSpectator\">\n              <font-awesome-icon icon=\"user-pen\" />Rename\n            </li>\n          </ul>\n        </transition>\n      </div>\n\n      <div\n        class=\"name\"\n        @click=\"isMenuOpen = !isMenuOpen\"\n        :class=\"{ active: isMenuOpen }\"\n      >\n        <span>{{ storyteller.name }}</span>\n        <span v-if=\"storyteller.pronouns\">&emsp13;</span>\n        <font-awesome-icon icon=\"venus-mars\" v-if=\"storyteller.pronouns\" />\n        <div class=\"pronouns\" v-if=\"storyteller.pronouns\">\n          <span>{{ storyteller.pronouns }}</span>\n        </div>\n      </div>\n    </div>\n\n    <template v-if=\"storyteller.reminders\">\n      <div\n        class=\"reminder\"\n        :key=\"reminder.role + ' ' + reminder.name\"\n        v-for=\"reminder in storyteller.reminders\"\n        :class=\"{\n          custom: reminder.role === 'custom' && reminder.name.length > 15,\n          flipped: reminder.flipped,\n        }\"\n      >\n        <span\n          class=\"icon\"\n          :style=\"{\n            backgroundImage: `url(${\n              reminder.image && grimoire.isImageOptIn\n                ? reminder.image\n                : require(\n                    '../assets/icons/' +\n                      (reminder.imageAlt || reminder.role) +\n                      (reminder.team === 'townsfolk' ||\n                      reminder.team === 'outsider'\n                        ? '_g'\n                        : reminder.team === 'minion' ||\n                            reminder.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          }\"\n        ></span>\n        <svg\n          viewBox=\"10 10 180 180\"\n          class=\"name\"\n          v-if=\"reminder.role !== 'custom' || reminder.name.length <= 15\"\n        >\n          <path\n            d=\"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0\"\n            id=\"circle\"\n            fill=\"transparent\"\n            transform=\"rotate(48, 100, 100)\"\n          />\n          <text width=\"150\" dx=\"100%\" text-anchor=\"middle\" class=\"text\">\n            <textPath xlink:href=\"#circle\">\n              {{ reminder.name }}\n            </textPath>\n          </text>\n        </svg>\n        <span class=\"customText\" v-else>{{ reminder.name }}</span>\n        <div class=\"overlay\">\n          <font-awesome-icon\n            @click=\"flipReminder(reminder)\"\n            icon=\"rotate-right\"\n            class=\"flip\"\n          />\n          <font-awesome-icon\n            @click=\"removeReminder(reminder)\"\n            icon=\"trash-can\"\n            class=\"remove\"\n          />\n        </div>\n      </div>\n    </template>\n    <div\n      class=\"reminder add\"\n      @click=\"$emit('trigger', ['openReminderModal'])\"\n      v-if=\"!session.isSpectator\"\n    >\n      <span class=\"icon\"></span>\n    </div>\n    <div class=\"reminderHoverTarget\" v-if=\"!session.isSpectator\"></div>\n  </li>\n</template>\n\n<script>\nimport Token from \"./Token\";\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Token,\n  },\n  props: {\n    storyteller: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    ...mapState(\"players\", [\"players\"]),\n    ...mapState([\"grimoire\", \"session\"]),\n    ...mapGetters({ nightOrder: \"players/nightOrder\" }),\n    zoom: function () {\n      if (this.players.length < 7) {\n        return { width: 18 + this.grimoire.zoom + \"vh\" };\n      } else if (this.players.length <= 10) {\n        return { width: 16 + this.grimoire.zoom + \"vh\" };\n      } else {\n        return { width: 14 + this.grimoire.zoom + \"vh\" };\n      }\n    },\n  },\n  data() {\n    return {\n      isMenuOpen: false,\n    };\n  },\n  methods: {\n    changePronouns() {\n      if (this.session.isSpectator) return;\n      const pronouns = prompt(\n        \"Storyteller Pronouns\",\n        this.storyteller.pronouns,\n      );\n      //Only update pronouns if not null (prompt was not cancelled)\n      if (pronouns !== null) {\n        this.updateStoryteller(\"pronouns\", pronouns, true);\n      }\n    },\n    changeName() {\n      if (this.session.isSpectator) return;\n      const name =\n        prompt(\"Storyteller Name\", this.storyteller.name) ||\n        this.storyteller.name;\n      this.updateStoryteller(\"name\", name, true);\n    },\n    removeReminder(reminder) {\n      const reminders = [...this.storyteller.reminders];\n      reminders.splice(this.storyteller.reminders.indexOf(reminder), 1);\n      this.updateStoryteller(\"reminders\", reminders, true);\n    },\n    flipReminder(reminder) {\n      const reminders = [...this.storyteller.reminders];\n      reminder.flipped = !reminder.flipped;\n      this.updateStoryteller(\"reminders\", reminders, true);\n    },\n    updateStoryteller(property, value, closeMenu = false) {\n      if (\n        this.session.isSpectator &&\n        property !== \"reminders\" &&\n        property !== \"pronouns\"\n      )\n        return;\n      this.$store.commit(\"players/updateStoryteller\", {\n        property,\n        value,\n      });\n      if (closeMenu) {\n        this.isMenuOpen = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../vars.scss\";\n\n.top-left .fold-enter-active,\n.top-left .fold-leave-active {\n  transition: transform 250ms ease-in-out;\n  transform-origin: left center;\n  transform: perspective(200px);\n}\n.top-left .fold-enter,\n.top-left .fold-leave-to {\n  transform: perspective(200px) rotateY(90deg);\n}\n\n.top-left .storyteller {\n  margin-bottom: 10px;\n\n  &:before {\n    content: \" \";\n    display: block;\n    padding-top: 50%;\n  }\n\n  &:focus {\n    outline: 0 solid rgba(0, 0, 0, 0);\n  }\n}\n\n.storyteller {\n  z-index: 22;\n}\n\n.storyteller .menu-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 50%;\n  &:hover ~ .name {\n    color: $gold;\n  }\n}\n\n/***** Role token ******/\n.storyteller .menu-container .token {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  transition: transform 200ms ease-in-out;\n  transform: perspective(400px) rotateY(0deg);\n  backface-visibility: hidden;\n}\n\n.storyteller .menu-container .token.blank {\n  background: url(\"../assets/storyteller.webp\") center center;\n  background-size: 113%;\n}\n\n/****** Session seat glow *****/\n@mixin glow($name, $color) {\n  @keyframes #{$name}-glow {\n    0% {\n      box-shadow: 0 0 rgba($color, 1);\n      border-color: $color;\n    }\n    50% {\n      border-color: black;\n    }\n    100% {\n      box-shadow: 0 0 20px 16px transparent;\n      border-color: $color;\n    }\n  }\n}\n\n@include glow(\"minion\", $minion);\n@include glow(\"none\", #f4c560);\n\n#townsquare.host .storyteller.minion .token {\n  animation: minion-glow 5s ease-in-out infinite;\n}\n\n#townsquare.host .storyteller .token {\n  animation: none-glow 5s ease-in-out infinite;\n}\n\n/***** Storyteller name *****/\n.storyteller > .name {\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  justify-content: center;\n  font-size: 95%;\n  font-family: \"Goudy StM\", sans-serif;\n  line-height: 120%;\n  cursor: pointer;\n  white-space: nowrap;\n  width: fit-content;\n  background: rgba(0, 0, 0, 0.55);\n  border: 2px solid black;\n  border-radius: 10px;\n  top: 5px;\n  padding: 0 4px;\n  max-width: 145px;\n  transition: all 250ms ease-in-out;\n\n  svg {\n    top: 3px;\n    margin-right: 2px;\n  }\n\n  span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    text-align: center;\n    flex-grow: 1;\n  }\n\n  &:hover,\n  &.active {\n    color: $gold;\n  }\n\n  &:hover .pronouns {\n    opacity: 1;\n  }\n\n  .pronouns {\n    display: flex;\n    position: absolute;\n    left: 110%;\n    max-width: 250px;\n    z-index: 25;\n    background: rgba(0, 0, 0, 0.625);\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n    border-radius: 10px;\n    border: 2px solid black;\n    align-items: center;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    padding: 0 4px;\n    bottom: -2px;\n    color: white;\n\n    &:before {\n      content: \" \";\n      border: 10px solid transparent;\n      width: 0;\n      height: 0;\n      border-right-color: black;\n      position: absolute;\n      margin-right: 1px;\n      right: 100%;\n    }\n  }\n}\n\n/***** Storyteller menu *****/\n.storyteller > .menu-container > .menu {\n  position: absolute;\n  left: 110%;\n  text-align: left;\n  font-family: \"Goudy StM\", sans-serif;\n  font-size: 90%;\n  white-space: nowrap;\n  background: rgba(0, 0, 0, 0.625);\n  padding: 2px 5px;\n  border-radius: 10px;\n  border: 3px solid #000;\n  margin-left: 15px;\n  cursor: pointer;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n\n  &:before {\n    content: \" \";\n    width: 0;\n    height: 0;\n    position: absolute;\n    border: 10px solid transparent;\n    border-right-color: black;\n    right: 100%;\n    margin-right: 1px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  li:hover {\n    color: $gold;\n  }\n\n  li.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    &:hover {\n      color: white;\n    }\n  }\n\n  svg {\n    margin-right: 2px;\n    vertical-align: middle;\n  }\n}\n\n/***** Ability text *****/\n.top-left .storyteller .token:hover .ability {\n  opacity: 0;\n}\n\n.top-left .storyteller:not(.menu-open) .token:hover .ability {\n  opacity: 1;\n}\n\n/**** Night reminders ****/\n.storyteller .night-order {\n  z-index: 3;\n}\n\n.storyteller .night-order em:hover + .description {\n  opacity: 0;\n}\n\n.storyteller:not(.menu-open) .night-order em:hover + .description {\n  opacity: 1;\n}\n\n/***** Reminder token *****/\n.top-left .reminder {\n  background: url(\"../assets/reminder.webp\") center center;\n  background-size: 113%;\n  width: 50%;\n  height: 0;\n  padding-bottom: 50%;\n  box-sizing: content-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px 0 0 -25%;\n  border-radius: 50%;\n  border: 2px solid black;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  transition: all 250ms;\n  cursor: pointer;\n  z-index: 51;\n\n  .name {\n    margin-top: 100%;\n    position: absolute;\n    .text {\n      fill: white;\n      font-family: \"Trade Gothic LT Std\", sans-serif;\n      font-size: 28px;\n      font-weight: bold;\n      letter-spacing: 1px;\n      text-align: center;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n    }\n  }\n\n  .icon {\n    content: \" \";\n    position: absolute;\n    top: 0;\n    width: 90%;\n    height: 90%;\n    background-size: 100%;\n    background-position: center 0;\n    background-repeat: no-repeat;\n  }\n\n  & .overlay {\n    position: absolute;\n    display: flex;\n    justify-content: space-evenly;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    transform: none;\n    opacity: 0;\n    transition: all 250ms;\n    & * {\n      width: 45%;\n      height: 100%;\n      stroke: black;\n      stroke-width: 10px;\n      &:hover * {\n        fill: url(#gold-overlay);\n      }\n    }\n  }\n\n  &.flipped {\n    transform: rotate(180deg);\n    & .overlay {\n      transform: rotate(-180deg);\n    }\n  }\n\n  &.add {\n    opacity: 0;\n    top: 30px;\n    .icon {\n      top: 5%;\n    }\n  }\n\n  &.custom {\n    .icon {\n      display: none;\n    }\n    .customText {\n      color: white;\n      font-family: \"Trade Gothic LT Std\", sans-serif;\n      font-size: 12px;\n      font-weight: bold;\n      text-align: center;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      word-break: break-word;\n      margin-top: 0;\n      display: flex;\n      align-items: center;\n      align-content: center;\n      justify-content: center;\n      border-radius: 50%;\n      top: 0;\n      line-height: 90%;\n    }\n  }\n\n  &:hover .overlay {\n    opacity: 1;\n  }\n}\n\n.top-left .reminderHoverTarget {\n  opacity: 0;\n  width: calc(50% + 8px);\n  padding-top: calc(50% + 38px);\n  margin-top: calc(-25% - 33px);\n  margin-left: calc(25% - 4px);\n  border-radius: 0 0 999px 999px;\n  pointer-events: auto;\n  transform: none !important;\n  z-index: 50;\n}\n\n.top-left .reminder.add:has(+ .reminderHoverTarget:hover),\n.top-left .reminder:hover + .reminder.add,\n.top-left .reminder.add:hover {\n  opacity: 1;\n  top: 0;\n}\n\n#townsquare.public .top-left .reminder,\n#townsquare.reveal .top-left .reminder {\n  opacity: 0;\n  pointer-events: none;\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Storyteller.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Storyteller.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Storyteller.vue?vue&type=template&id=5e9cb2a4\"\nimport script from \"./Storyteller.vue?vue&type=script&lang=js\"\nexport * from \"./Storyteller.vue?vue&type=script&lang=js\"\nimport style0 from \"./Storyteller.vue?vue&type=style&index=0&id=5e9cb2a4&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.reminder)?_c('Modal',{staticClass:\"reminder\",on:{\"close\":_vm.close}},[_c('h3',[_vm._v(\"Choose a Reminder Token:\")]),_c('ul',{staticClass:\"reminders\"},_vm._l((_vm.availableReminders),function(reminder){return _c('li',{key:reminder.role + ' ' + reminder.name,staticClass:\"reminder\",class:[reminder.role],on:{\"click\":function($event){return _vm.addReminder(reminder)}}},[_c('span',{staticClass:\"icon\",style:({\n          backgroundImage: `url(${\n            reminder.image && _vm.grimoire.isImageOptIn\n              ? Array.isArray(reminder.image)\n                ? reminder.image[0]\n                : reminder.image\n              : require(\n                  '../../assets/icons/' +\n                    (reminder.imageAlt || reminder.role) +\n                    (reminder.team === 'townsfolk' ||\n                    reminder.team === 'outsider'\n                      ? '_g'\n                      : reminder.team === 'minion' ||\n                          reminder.team === 'demon'\n                        ? '_e'\n                        : '') +\n                    '.webp',\n                )\n          })`,\n        })}),_c('svg',{attrs:{\"viewBox\":\"0 0 140 140\"}},[_c('path',{attrs:{\"d\":\"M 70 70 M 27.5736 27.5736 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528\",\"id\":\"circle\",\"fill\":\"transparent\"}}),_c('text',{staticClass:\"text\",attrs:{\"width\":\"150\",\"x\":\"100%\",\"text-anchor\":\"middle\"}},[_c('textPath',{attrs:{\"xlink:href\":\"#circle\"}},[_vm._v(\" \"+_vm._s(reminder.name)+\" \")])])])])}),0),_c('div',{staticClass:\"button-group\"},[_c('span',{staticClass:\"button purple-hover\",class:{ purple: _vm.tab === 'relevantReminders' },on:{\"click\":function($event){_vm.tab = 'relevantReminders'}}},[_vm._v(\"Relevant Reminders\")]),_c('span',{staticClass:\"button purple-hover\",class:{ purple: _vm.tab === 'otherReminders' },on:{\"click\":function($event){_vm.tab = 'otherReminders'}}},[_vm._v(\"Other Reminders\")])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('transition',{attrs:{\"name\":\"modal-fade\"}},[_c('div',{staticClass:\"modal-backdrop\",on:{\"click\":_vm.close}},[_c('div',{staticClass:\"modal\",attrs:{\"role\":\"dialog\",\"aria-labelledby\":\"modalTitle\",\"aria-describedby\":\"modalDescription\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"slot\"},[_vm._t(\"default\")],2)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"modal-fade\">\n    <div class=\"modal-backdrop\" @click=\"close\">\n      <div\n        class=\"modal\"\n        role=\"dialog\"\n        aria-labelledby=\"modalTitle\"\n        aria-describedby=\"modalDescription\"\n        @click.stop=\"\"\n      >\n        <div class=\"slot\">\n          <slot></slot>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  data: function () {\n    return {\n      isMaximized: false,\n    };\n  },\n  methods: {\n    close() {\n      this.$emit(\"close\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.modal {\n  background: rgba(0, 0, 0, 0.8);\n  padding: 10px 20px;\n  border: 3px solid black;\n  border-radius: 10px;\n  box-shadow: 2px 2px 20px 1px black;\n  display: flex;\n  flex-direction: column;\n  max-height: 80%;\n  max-width: 80%;\n\n  .vote-history &,\n  .night-reference &,\n  .characters & {\n    overflow-y: auto;\n  }\n\n  .characters & {\n    max-height: 95%;\n    max-width: 60%;\n  }\n\n  .roles &,\n  .reminder &,\n  .vote-history & {\n    max-height: 95%;\n    max-width: 45%;\n  }\n\n  ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: center;\n    align-items: center;\n    justify-content: center;\n    line-height: 100%;\n  }\n\n  > .slot {\n    max-height: 100%;\n    position: initial;\n  }\n}\n\n.modal-fade-enter,\n.modal-fade-leave-active {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=5bb6af5a\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&id=5bb6af5a&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Modal class=\"reminder\" v-if=\"modals.reminder\" @close=\"close\">\n    <h3>Choose a Reminder Token:</h3>\n    <ul class=\"reminders\">\n      <li\n        v-for=\"reminder in availableReminders\"\n        class=\"reminder\"\n        :class=\"[reminder.role]\"\n        :key=\"reminder.role + ' ' + reminder.name\"\n        @click=\"addReminder(reminder)\"\n      >\n        <span\n          class=\"icon\"\n          :style=\"{\n            backgroundImage: `url(${\n              reminder.image && grimoire.isImageOptIn\n                ? Array.isArray(reminder.image)\n                  ? reminder.image[0]\n                  : reminder.image\n                : require(\n                    '../../assets/icons/' +\n                      (reminder.imageAlt || reminder.role) +\n                      (reminder.team === 'townsfolk' ||\n                      reminder.team === 'outsider'\n                        ? '_g'\n                        : reminder.team === 'minion' ||\n                            reminder.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          }\"\n        ></span>\n        <svg viewBox=\"0 0 140 140\">\n          <path\n            d=\"M 70 70 M 27.5736 27.5736 a 60 60 315 1 0 84.8528 84.8528 a 60 60 315 1 0 -84.8528 -84.8528\"\n            id=\"circle\"\n            fill=\"transparent\"\n          />\n          <text width=\"150\" x=\"100%\" text-anchor=\"middle\" class=\"text\">\n            <textPath xlink:href=\"#circle\">\n              {{ reminder.name }}\n            </textPath>\n          </text>\n        </svg>\n      </li>\n    </ul>\n    <div class=\"button-group\">\n      <span\n        class=\"button purple-hover\"\n        :class=\"{ purple: tab === 'relevantReminders' }\"\n        @click=\"tab = 'relevantReminders'\"\n        >Relevant Reminders</span\n      >\n      <span\n        class=\"button purple-hover\"\n        :class=\"{ purple: tab === 'otherReminders' }\"\n        @click=\"tab = 'otherReminders'\"\n        >Other Reminders</span\n      >\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport { mapMutations, mapState } from \"vuex\";\n\n/**\n * Helper function that maps a reminder name with a role-based object that provides necessary visual data.\n * @param role The role for which the reminder should be generated\n * @return {function(*): {image: string|string[]|string|*, role: *, name: *, imageAlt: string|*}}\n */\nconst mapReminder =\n  ({ id, image, imageAlt, team }) =>\n  (name) => ({\n    role: id,\n    image,\n    imageAlt,\n    team,\n    name,\n  });\n\nexport default {\n  components: { Modal },\n  props: [\"playerIndex\", \"isDeath\"],\n  computed: {\n    availableReminders() {\n      let relevantReminders = [];\n      let otherReminders = [];\n      const { players } = this.$store.state.players;\n      this.$store.state.roles.forEach((role) => {\n        // add reminders from player roles, storyteller ability, and extra roles\n        if (\n          players.some((p) => p.role.id === role.id) ||\n          this.$store.state.players.storyteller.role.id === role.id ||\n          this.$store.state.players.extraRoles.some((r) => r.id === role.id)\n        ) {\n          role.reminders.map(mapReminder(role)).forEach((reminder1) => {\n            if (\n              !relevantReminders.some(\n                (reminder2) =>\n                  reminder2.name === reminder1.name &&\n                  reminder2.role === reminder1.role,\n              )\n            ) {\n              relevantReminders.push(reminder1);\n            }\n          });\n        } else {\n          role.reminders.map(mapReminder(role)).forEach((reminder1) => {\n            if (\n              !otherReminders.some(\n                (reminder2) =>\n                  reminder2.name === reminder1.name &&\n                  reminder2.role === reminder1.role,\n              )\n            ) {\n              otherReminders.push(reminder1);\n            }\n          });\n        }\n        // add global reminders\n        if (role.remindersGlobal && role.remindersGlobal.length) {\n          role.remindersGlobal.map(mapReminder(role)).forEach((reminder1) => {\n            if (\n              !relevantReminders.some(\n                (reminder2) =>\n                  reminder2.name === reminder1.name &&\n                  reminder2.role === reminder1.role,\n              )\n            ) {\n              relevantReminders.push(reminder1);\n            }\n          });\n        }\n      });\n      // add fabled reminders\n      this.$store.state.players.fabled.forEach((role) => {\n        role.reminders.map(mapReminder(role)).forEach((reminder1) => {\n          if (\n            !relevantReminders.some(\n              (reminder2) =>\n                reminder2.name === reminder1.name &&\n                reminder2.role === reminder1.role,\n            )\n          ) {\n            relevantReminders.push(reminder1);\n          }\n        });\n      });\n      // add out of script traveler reminders\n      this.$store.state.otherTravelers.forEach((role) => {\n        if (players.some((p) => p.role.id === role.id)) {\n          role.reminders.map(mapReminder(role)).forEach((reminder1) => {\n            if (\n              !relevantReminders.some(\n                (reminder2) =>\n                  reminder2.name === reminder1.name &&\n                  reminder2.role === reminder1.role,\n              )\n            ) {\n              relevantReminders.push(reminder1);\n            }\n          });\n        }\n      });\n\n      relevantReminders.push({ role: \"good\", name: \"Good\" });\n      relevantReminders.push({ role: \"evil\", name: \"Evil\" });\n      relevantReminders.push({ role: \"custom\", name: \"Custom Note\" });\n      otherReminders.push({ role: \"good\", name: \"Good\" });\n      otherReminders.push({ role: \"evil\", name: \"Evil\" });\n      otherReminders.push({ role: \"custom\", name: \"Custom Note\" });\n\n      if (this.isDeath) {\n        relevantReminders = relevantReminders.filter(\n          (reminder) => reminder.name === \"Dead\",\n        );\n        otherReminders = otherReminders.filter(\n          (reminder) => reminder.name === \"Dead\",\n        );\n      }\n\n      if (this.tab === \"relevantReminders\") return relevantReminders;\n      else return otherReminders;\n    },\n    ...mapState([\"modals\", \"grimoire\", \"session\"]),\n    ...mapState(\"players\", [\"players\"]),\n  },\n  data() {\n    return {\n      tab: \"relevantReminders\",\n    };\n  },\n  methods: {\n    addReminder(reminder) {\n      let player;\n      if (this.playerIndex > 19) {\n        player = this.$store.state.players.storyteller;\n      } else {\n        player = this.$store.state.players.players[this.playerIndex];\n      }\n      const newReminder = { ...reminder };\n      let value;\n      if (newReminder.role === \"custom\") {\n        const name = prompt(\"Add a custom reminder note\");\n        if (!name) return;\n        value = [...player.reminders, { role: \"custom\", name }];\n      } else {\n        value = [...player.reminders, newReminder];\n      }\n      if (this.playerIndex > 19) {\n        this.$store.commit(\"players/updateStoryteller\", {\n          property: \"reminders\",\n          value,\n        });\n      } else {\n        if (\n          !this.session.isSpectator &&\n          this.session.nomination &&\n          newReminder.role === \"banshee\" &&\n          newReminder.name === \"Has Ability\"\n        ) {\n          this.$store.commit(\"players/update\", {\n            player: player,\n            property: \"hasDoubleVotes\",\n            value: true,\n          });\n        }\n        this.$store.commit(\"players/update\", {\n          player,\n          property: \"reminders\",\n          value,\n        });\n      }\n      this.close();\n    },\n    close() {\n      this.tab = \"relevantReminders\";\n      this.toggleModal(\"reminder\");\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\nul.reminders .reminder {\n  background: url(\"../../assets/reminder.webp\") center center;\n  background-size: 100%;\n  width: 14vh;\n  height: 14vh;\n  max-width: 100px;\n  max-height: 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 1%;\n  padding-bottom: 0;\n\n  border-radius: 50%;\n  border: 2px solid black;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n  line-height: 100%;\n  transition: transform 500ms ease;\n\n  .icon {\n    position: absolute;\n    top: 0;\n    width: 90%;\n    height: 90%;\n    background-size: 100%;\n    background-position: center center;\n    background-repeat: no-repeat;\n  }\n\n  .text {\n    fill: white;\n    font-family: \"Trade Gothic LT Std\", sans-serif;\n    font-size: 22px;\n    font-weight: bold;\n    letter-spacing: 1px;\n    text-align: center;\n    height: 100%;\n    width: 100%;\n    position: absolute;\n  }\n\n  &:hover {\n    transform: scale(1.2);\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReminderModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReminderModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ReminderModal.vue?vue&type=template&id=690fca88&scoped=true\"\nimport script from \"./ReminderModal.vue?vue&type=script&lang=js\"\nexport * from \"./ReminderModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ReminderModal.vue?vue&type=style&index=0&id=690fca88&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"690fca88\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isDisplayed)?_c('Modal',{on:{\"close\":_vm.close}},[_c('h3',[_vm._v(\" Choose a New \"+_vm._s(_vm.playerIndex > 19 ? \"Minion Ability for the Storyteller\" : _vm.playerIndex >= 0 && _vm.players.length ? \"Character for \" + _vm.players[_vm.playerIndex].name : \"Demon Bluff\")+\": \")]),_c('ul',{staticClass:\"tokens\"},_vm._l((_vm.displayedRoles),function(role){return _c('li',{key:role.id,class:[role.team, { match: _vm.queryMatches(role.name) }],on:{\"click\":function($event){return _vm.setRole(role)}}},[_c('Token',{attrs:{\"role\":role}})],1)}),0),(\n      _vm.playerIndex >= 0 &&\n      _vm.playerIndex <= 19 &&\n      _vm.otherTravelers.size &&\n      !_vm.session.isSpectator\n    )?_c('div',{staticClass:\"button-group\"},[_c('span',{staticClass:\"button purple-hover\",class:{ purple: _vm.tab === 'editionRoles' },on:{\"click\":function($event){_vm.tab = 'editionRoles'}}},[_vm._v(\"Edition Roles\")]),_c('span',{staticClass:\"button purple-hover\",class:{ purple: _vm.tab === 'otherTravelers' },on:{\"click\":function($event){_vm.tab = 'otherTravelers'}}},[_vm._v(\"Other Travellers\")])]):_vm._e(),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"searchInput\",staticClass:\"role-search\",attrs:{\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.query)},on:{\"keyup\":_vm.keyup,\"input\":function($event){if($event.target.composing)return;_vm.query=$event.target.value}}})]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal v-if=\"isDisplayed\" @close=\"close\">\n    <h3>\n      Choose a New\n      {{\n        playerIndex > 19\n          ? \"Minion Ability for the Storyteller\"\n          : playerIndex >= 0 && players.length\n            ? \"Character for \" + players[playerIndex].name\n            : \"Demon Bluff\"\n      }}:\n    </h3>\n    <ul class=\"tokens\">\n      <li\n        v-for=\"role in displayedRoles\"\n        :class=\"[role.team, { match: queryMatches(role.name) }]\"\n        :key=\"role.id\"\n        @click=\"setRole(role)\"\n      >\n        <Token :role=\"role\" />\n      </li>\n    </ul>\n    <div\n      class=\"button-group\"\n      v-if=\"\n        playerIndex >= 0 &&\n        playerIndex <= 19 &&\n        otherTravelers.size &&\n        !session.isSpectator\n      \"\n    >\n      <span\n        class=\"button purple-hover\"\n        :class=\"{ purple: tab === 'editionRoles' }\"\n        @click=\"tab = 'editionRoles'\"\n        >Edition Roles</span\n      >\n      <span\n        class=\"button purple-hover\"\n        :class=\"{ purple: tab === 'otherTravelers' }\"\n        @click=\"tab = 'otherTravelers'\"\n        >Other Travellers</span\n      >\n    </div>\n    <input\n      ref=\"searchInput\"\n      class=\"role-search\"\n      placeholder=\"Search\"\n      v-model=\"query\"\n      @keyup=\"keyup\"\n    />\n  </Modal>\n</template>\n\n<script>\nimport { mapMutations, mapState } from \"vuex\";\nimport Modal from \"./Modal\";\nimport Token from \"../Token\";\n\nexport default {\n  components: { Token, Modal },\n  props: [\"playerIndex\"],\n  computed: {\n    availableRoles() {\n      const availableRoles = [];\n      const players = this.$store.state.players.players;\n      const bluffs = this.$store.state.players.bluffs;\n      this.$store.state.roles.forEach((role) => {\n        // don't show bluff roles that are already assigned to players, or are not townsfolk/outsiders\n        if (\n          (this.playerIndex >= 0 && this.playerIndex <= 19) ||\n          (this.playerIndex > 19 && role.team === \"minion\") ||\n          (this.playerIndex < 0 &&\n            role.team !== \"minion\" &&\n            role.team !== \"demon\" &&\n            role.team !== \"traveler\" &&\n            (this.playerIndex < -3 ||\n              (!players.some((player) => player.role.id === role.id) &&\n                !(\n                  this.grimoire.isExtraBluffs ? bluffs : bluffs.slice(0, 3)\n                ).some((bluff) => bluff.id === role.id))))\n        ) {\n          availableRoles.push(role);\n        }\n      });\n      availableRoles.push({});\n      return availableRoles;\n    },\n    isDisplayed() {\n      return this.modals.role && this.availableRoles.length;\n    },\n    displayedRoles() {\n      if (this.tab === \"editionRoles\" || !this.otherTravelers.size)\n        return this.availableRoles;\n      else return [...this.otherTravelers.values()];\n    },\n    ...mapState([\"grimoire\", \"modals\", \"roles\", \"session\"]),\n    ...mapState(\"players\", [\"players\"]),\n    ...mapState([\"otherTravelers\"]),\n  },\n  data() {\n    return {\n      tab: \"editionRoles\",\n      query: \"\",\n    };\n  },\n  methods: {\n    setRole(role) {\n      if (this.playerIndex < 0) {\n        // assign to bluff slot (index < 0)\n        this.$store.commit(\"players/setBluff\", {\n          index: this.playerIndex * -1 - 1,\n          role,\n        });\n      } else {\n        if (\n          (this.session.isSpectator && role.team === \"traveler\") ||\n          (this.playerIndex > 19 && role.team && role.team !== \"minion\")\n        )\n          return;\n        // assign to player\n        if (this.playerIndex > 19) {\n          this.$store.commit(\"players/updateStoryteller\", {\n            property: \"role\",\n            value: role,\n          });\n        } else {\n          const player = this.$store.state.players.players[this.playerIndex];\n          if (this.session.isSpectator && player.role.team === \"traveler\") {\n            this.close();\n            return;\n          }\n          this.$store.commit(\"players/update\", {\n            player,\n            property: \"role\",\n            value: role,\n          });\n        }\n      }\n      this.close();\n    },\n    close() {\n      this.tab = \"editionRoles\";\n      this.query = \"\";\n      this.toggleModal(\"role\");\n    },\n    queryMatches(name) {\n      // A search query matches if, after removing all non-word characters,\n      // it is a case-insensitive prefix of the character name.\n      const simplify = (str) => str.replaceAll(/\\W+/g, \"\").toLowerCase();\n      return simplify(name || \"\").startsWith(simplify(this.query));\n    },\n    keyup(event) {\n      // Allow Escape for modal dialog dismissal.\n      if (event.key === \"Esc\" || event.key === \"Escape\") return;\n\n      event.stopPropagation();\n\n      // If there's a unique match and the user presses Enter, select that role.\n      if (event.key === \"Enter\") {\n        const matchingRoles = this.displayedRoles.filter((r) =>\n          this.queryMatches(r.name),\n        );\n        if (matchingRoles.length === 1) {\n          this.setRole(matchingRoles[0]);\n        }\n      }\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n  watch: {\n    isDisplayed(shown) {\n      if (shown) this.$nextTick(() => this.$refs.searchInput.focus());\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../vars.scss\";\n\nul.tokens li {\n  border-radius: 50%;\n  width: 6vw;\n  margin: 1%;\n  transition: transform 500ms ease;\n\n  &.townsfolk {\n    box-shadow:\n      0 0 10px $townsfolk,\n      0 0 10px #004cff;\n  }\n  &.outsider {\n    box-shadow:\n      0 0 10px $outsider,\n      0 0 10px $outsider;\n  }\n  &.minion {\n    box-shadow:\n      0 0 10px $minion,\n      0 0 10px $minion;\n  }\n  &.demon {\n    box-shadow:\n      0 0 10px $demon,\n      0 0 10px $demon;\n  }\n  &.traveler {\n    box-shadow:\n      0 0 10px $traveler,\n      0 0 10px $traveler;\n  }\n  &:hover {\n    transform: scale(1.2);\n    z-index: 10;\n  }\n  &:not(.match) {\n    opacity: 0.4;\n  }\n}\n\n#townsquare.spectator ul.tokens li.traveler {\n  display: none;\n}\n\ninput.role-search {\n  display: block;\n  width: 20%;\n  background: transparent;\n  border: solid white;\n  border-width: 0 0 1px 0;\n  outline: none;\n  color: white;\n  font-size: 1em;\n  font-family: \"Goudy StM\", sans-serif;\n\n  &:not(:focus) {\n    border-bottom-color: #777;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RoleModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RoleModal.vue?vue&type=template&id=25800ca6&scoped=true\"\nimport script from \"./RoleModal.vue?vue&type=script&lang=js\"\nexport * from \"./RoleModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./RoleModal.vue?vue&type=style&index=0&id=25800ca6&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25800ca6\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    id=\"townsquare\"\n    class=\"square\"\n    :class=\"{\n      public: grimoire.isPublic,\n      reveal: session.reveal,\n      night: grimoire.isNight,\n      spectator: session.isSpectator,\n      host: session.sessionId && !session.isSpectator,\n      spin: session.isTokenSpinning,\n      vote: session.nomination,\n      voteWatching: session.isVoteWatchingAllowed,\n    }\"\n  >\n    <ul class=\"circle\" :class=\"['size-' + players.length]\">\n      <Player\n        v-for=\"(player, index) in players\"\n        :key=\"index\"\n        :player=\"player\"\n        @trigger=\"handleTrigger(index, $event)\"\n        :class=\"{\n          from: Math.max(swap, nominate) === index,\n          swap: swap > -1,\n          nominate: nominate > -1,\n        }\"\n      ></Player>\n    </ul>\n\n    <div class=\"top-left\" v-if=\"players.length\">\n      <Storyteller\n        :key=\"-1\"\n        :storyteller=\"storyteller\"\n        @trigger=\"handleTrigger(20, $event)\"\n      ></Storyteller>\n      <div\n        class=\"fabled\"\n        :class=\"{ closed: !grimoire.isFabledOpen }\"\n        v-if=\"fabled.length\"\n      >\n        <ul>\n          <li\n            v-for=\"(role, index) in fabled\"\n            :key=\"index\"\n            @click=\"removeFabled(index)\"\n          >\n            <div\n              class=\"night-order first\"\n              :class=\"{\n                shown:\n                  nightOrder.get(role).first &&\n                  grimoire.isNightOrder &&\n                  !session.reveal,\n              }\"\n            >\n              <em>{{ nightOrder.get(role).first }}</em>\n              <span class=\"description\" v-if=\"role.firstNightReminder\">\n                <span v-html=\"role.firstNightReminder\"></span>\n              </span>\n            </div>\n            <div\n              class=\"night-order other\"\n              :class=\"{\n                shown:\n                  nightOrder.get(role).other &&\n                  grimoire.isNightOrder &&\n                  !session.reveal,\n              }\"\n            >\n              <em>{{ nightOrder.get(role).other }}</em>\n              <span class=\"description\" v-if=\"role.otherNightReminder\">\n                <span v-html=\"role.otherNightReminder\"></span>\n              </span>\n            </div>\n            <Token :role=\"role\"></Token>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div\n      class=\"bluffs\"\n      v-if=\"players.length\"\n      ref=\"bluffs\"\n      :class=\"{\n        closed: !grimoire.isBluffsOpen,\n        double: grimoire.isExtraBluffs,\n      }\"\n    >\n      <ul>\n        <li v-for=\"index1 in bluffSets\" :key=\"index1\">\n          <ul>\n            <li\n              v-for=\"index2 in 3\"\n              :key=\"index2\"\n              @click=\"openRoleModal((3 * (index1 - 1) + index2) * -1)\"\n            >\n              <Token :role=\"bluffs[3 * (index1 - 1) + index2 - 1]\"></Token>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n\n    <div\n      class=\"extra-roles\"\n      v-if=\"players.length && extraRoles.length\"\n      ref=\"extra-roles\"\n    >\n      <ul>\n        <li\n          v-for=\"(role, index) in extraRoles\"\n          :key=\"index\"\n          @click=\"removeExtraRoles(index)\"\n        >\n          <div\n            class=\"night-order first\"\n            :class=\"{\n              shown:\n                nightOrder.get(role).first &&\n                grimoire.isNightOrder &&\n                !session.reveal,\n            }\"\n          >\n            <em>{{ nightOrder.get(role).first }}</em>\n            <span class=\"description\" v-if=\"role.firstNightReminder\">\n              <span v-html=\"role.firstNightReminder\"></span>\n            </span>\n          </div>\n          <div\n            class=\"night-order other\"\n            :class=\"{\n              shown:\n                nightOrder.get(role).other &&\n                grimoire.isNightOrder &&\n                !session.reveal,\n            }\"\n          >\n            <em>{{ nightOrder.get(role).other }}</em>\n            <span class=\"description\" v-if=\"role.otherNightReminder\">\n              <span v-html=\"role.otherNightReminder\"></span>\n            </span>\n          </div>\n          <Token :role=\"role\"></Token>\n        </li>\n      </ul>\n    </div>\n\n    <ReminderModal\n      :player-index=\"selectedPlayer\"\n      :is-death=\"deathReminder\"\n    ></ReminderModal>\n    <RoleModal :player-index=\"selectedPlayer\"></RoleModal>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\nimport Player from \"./Player\";\nimport Storyteller from \"./Storyteller\";\nimport Token from \"./Token\";\nimport ReminderModal from \"./modals/ReminderModal\";\nimport RoleModal from \"./modals/RoleModal\";\n\nexport default {\n  components: {\n    Player,\n    Storyteller,\n    Token,\n    RoleModal,\n    ReminderModal,\n  },\n  computed: {\n    ...mapGetters({ nightOrder: \"players/nightOrder\" }),\n    ...mapState([\"grimoire\", \"roles\", \"session\"]),\n    ...mapState(\"players\", [\n      \"players\",\n      \"storyteller\",\n      \"bluffs\",\n      \"extraRoles\",\n      \"fabled\",\n    ]),\n    bluffSets() {\n      return this.grimoire.isExtraBluffs ? 2 : 1;\n    },\n  },\n  data() {\n    return {\n      selectedPlayer: 0,\n      deathReminder: false,\n      swap: -1,\n      nominate: -1,\n    };\n  },\n  methods: {\n    removeExtraRoles(index) {\n      this.$store.commit(\"players/setExtraRoles\", { index });\n    },\n    removeFabled(index) {\n      if (this.session.isSpectator) return;\n      this.$store.commit(\"players/setFabled\", { index });\n      this.$store.commit(\"toggleFabled\", true);\n    },\n    handleTrigger(playerIndex, [method, params]) {\n      if (typeof this[method] === \"function\") {\n        this[method](playerIndex, params);\n      }\n    },\n    claimSeat(playerIndex) {\n      if (!this.session.isSpectator) return;\n      if (this.session.playerId === this.players[playerIndex].id) {\n        this.$store.commit(\"session/claimSeat\", -1);\n      } else {\n        this.$store.commit(\"session/claimSeat\", playerIndex);\n      }\n    },\n    openReminderModal(playerIndex) {\n      this.selectedPlayer = playerIndex;\n      this.deathReminder = false;\n      this.$store.commit(\"toggleModal\", \"reminder\");\n    },\n    openDeathReminderModal(playerIndex) {\n      this.selectedPlayer = playerIndex;\n      this.deathReminder = true;\n      this.$store.commit(\"toggleModal\", \"reminder\");\n    },\n    openRoleModal(playerIndex) {\n      const player = this.players[playerIndex];\n      if (this.session.isSpectator && player && player.role.team === \"traveler\")\n        return;\n      this.selectedPlayer = playerIndex;\n      this.$store.commit(\"toggleModal\", \"role\");\n    },\n    removePlayer(playerIndex) {\n      if (this.session.isSpectator || this.session.lockedVote) return;\n      if (\n        confirm(\n          `Do you really want to remove ${this.players[playerIndex].name}?`,\n        )\n      ) {\n        const { nomination } = this.session;\n        if (nomination) {\n          if (nomination.includes(playerIndex)) {\n            // abort vote if removed player is either nominator or nominee\n            this.$store.commit(\"session/nomination\");\n          } else if (\n            nomination[0] > playerIndex ||\n            nomination[1] > playerIndex\n          ) {\n            // update nomination array if removed player has lower index\n            this.$store.commit(\"session/setNomination\", [\n              nomination[0] > playerIndex ? nomination[0] - 1 : nomination[0],\n              nomination[1] > playerIndex ? nomination[1] - 1 : nomination[1],\n            ]);\n          }\n        }\n        this.$store.commit(\"players/remove\", playerIndex);\n      }\n    },\n    swapPlayer(from, to) {\n      if (this.session.isSpectator || this.session.lockedVote) return;\n      if (to === undefined) {\n        this.cancel();\n        this.swap = from;\n      } else {\n        if (this.session.nomination) {\n          // update nomination if one of the involved players is swapped\n          const swapTo = this.players.indexOf(to);\n          const updatedNomination = this.session.nomination.map((nom) => {\n            if (nom === this.swap) return swapTo;\n            if (nom === swapTo) return this.swap;\n            return nom;\n          });\n          if (\n            this.session.nomination[0] !== updatedNomination[0] ||\n            this.session.nomination[1] !== updatedNomination[1]\n          ) {\n            this.$store.commit(\"session/setNomination\", updatedNomination);\n          }\n        }\n        this.$store.commit(\"players/swap\", [\n          this.swap,\n          this.players.indexOf(to),\n        ]);\n        this.cancel();\n      }\n    },\n    nominatePlayer(from, to) {\n      if (this.session.isSpectator || this.session.lockedVote) return;\n      if (to === undefined) {\n        this.cancel();\n        if (from !== this.nominate) {\n          this.nominate = from;\n        }\n      } else {\n        let players = [...this.players];\n        for (const player of players) {\n          player.hasDoubleVotes = player.reminders.some(\n            (reminder) =>\n              reminder.role === \"banshee\" && reminder.name === \"Has Ability\",\n          );\n        }\n        this.$store.commit(\"players/set\", players);\n        const nomination = [this.nominate, this.players.indexOf(to)];\n        this.$store.commit(\"session/nomination\", { nomination });\n        this.cancel();\n      }\n    },\n    cancel() {\n      this.swap = -1;\n      this.nominate = -1;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@use \"sass:math\";\n@import \"../vars.scss\";\n\n#townsquare {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n}\n\n.circle {\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  list-style: none;\n  margin: 0;\n\n  > li {\n    position: absolute;\n    left: 50%;\n    height: 50%;\n    transform-origin: 0 100%;\n    pointer-events: none;\n\n    &:hover {\n      z-index: 25 !important;\n    }\n\n    &:has(.player.menu-open) {\n      z-index: 26 !important;\n    }\n\n    > .player {\n      margin-left: -50%;\n      width: 100%;\n      pointer-events: all;\n    }\n    > .reminder {\n      margin-left: calc(-25% - 1px);\n      width: 50%;\n      pointer-events: all;\n    }\n  }\n}\n\n.top-left {\n  position: absolute;\n  left: 12.25px;\n  top: 12.25px;\n  display: flex;\n  list-style: none;\n  > li {\n    > .reminder {\n      margin-left: calc(25% - 1px);\n      width: 50%;\n      pointer-events: all;\n    }\n  }\n}\n\n@mixin on-circle($item-count) {\n  $angle: math.div(360, $item-count);\n  $rot: 0;\n\n  // rotation and tooltip placement\n  @for $i from 1 through $item-count {\n    &:nth-child(#{$i}) {\n      transform: rotate($rot * 1deg);\n      @if $i <= math.ceil(math.div($item-count, 2)) {\n        // first half of players\n        z-index: $item-count - $i + 1;\n        // open menu on the right\n        .player > .menu-container > .menu {\n          right: auto;\n          left: 110%;\n          margin-left: 15px;\n          &:before {\n            border-right-color: black;\n            border-left-color: transparent;\n            left: auto;\n            right: 100%;\n            margin-right: 1px;\n          }\n        }\n        .player .overlay svg.hand.fa-hand {\n          transform: scaleX(-100%);\n        }\n        .player.hand-raised .overlay svg.hand.fa-hand {\n          transform: scaleX(-100%) rotateZ(45deg) translateY(-25%);\n        }\n        .fold-enter-active,\n        .fold-leave-active {\n          transform-origin: left center;\n        }\n        .fold-enter,\n        .fold-leave-to {\n          transform: perspective(200px) rotateY(90deg);\n        }\n        // show ability tooltip on the left\n        .ability {\n          right: 120%;\n          left: auto;\n          &:before {\n            border-right-color: transparent;\n            border-left-color: black;\n            right: auto;\n            left: 100%;\n            margin-left: 2px;\n          }\n        }\n        .pronouns {\n          left: 110%;\n          right: auto;\n          &:before {\n            border-left-color: transparent;\n            border-right-color: black;\n            left: auto;\n            right: 100%;\n            margin-right: 1px;\n          }\n        }\n      } @else {\n        // second half of players\n        z-index: $i - 1;\n      }\n\n      > * {\n        transform: rotate($rot * -1deg);\n        &.reminder.flipped {\n          transform: rotate($rot * -1deg) rotate(180deg);\n          & .overlay {\n            transform: rotate(-180deg);\n          }\n        }\n      }\n\n      // animation cascade\n      .life,\n      .token,\n      .shroud,\n      .night-order em,\n      .seat {\n        animation-delay: ($i - 1) * 50ms;\n        transition-delay: ($i - 1) * 50ms;\n      }\n\n      // move reminders closer to the sides of the circle\n      $q: math.div($item-count, 4);\n      $x: $i - 1;\n      @if $x < $q or ($x >= math.div($item-count, 2) and $x < $q * 3) {\n        .player {\n          margin-bottom: -10% + 20% * (1 - math.div($x % $q, $q));\n        }\n      } @else {\n        .player {\n          margin-bottom: -10% + 20% * math.div($x % $q, $q);\n        }\n      }\n    }\n    $rot: $rot + $angle;\n  }\n}\n\n@mixin reveal-circle($item-count) {\n  @for $i from 1 through $item-count {\n    &:nth-child(#{$i}) {\n      $duration: 125 * $item-count + 500;\n      $startFlipPercentage: calc(50 * ($i - 1) / ($item-count + 3)) + \"%\";\n      $stopFlipPercentage: calc(50 * ($i + 3) / ($item-count + 3)) + \"%\";\n      $startFlash: calc(50 * ($i - 1) / ($item-count + 3) + 50);\n      $stopFlash: calc(50 * ($i + 3) / ($item-count + 3) + 50);\n      $startFlashPercentage: $startFlash + \"%\";\n      $maxFlashPercentage: calc((7 * $startFlash + $stopFlash) / 8) + \"%\";\n      $stopFlashPercentage: $stopFlash + \"%\";\n      .token {\n        animation: beginRevealToken- +\n          $item-count +\n          \"-\" +\n          $i\n          $duration +\n          ms\n          ease-in-out;\n\n        @keyframes beginRevealToken-#{$item-count}-#{$i} {\n          0%,\n          #{$startFlipPercentage} {\n            transform: perspective(400px) rotateY(0deg);\n            pointer-events: none;\n          }\n          #{$stopFlipPercentage},\n          100% {\n            transform: perspective(400px) rotateY(-180deg);\n            pointer-events: none;\n          }\n        }\n      }\n      .life {\n        animation: beginRevealLife- +\n          $item-count +\n          \"-\" +\n          $i\n          $duration +\n          ms\n          ease-in-out;\n\n        @keyframes beginRevealLife-#{$item-count}-#{$i} {\n          0%,\n          #{$startFlipPercentage} {\n            transform: perspective(400px) rotateY(180deg);\n            pointer-events: none;\n          }\n          #{$stopFlipPercentage} {\n            transform: perspective(400px) rotateY(0deg);\n          }\n          #{$startFlashPercentage} {\n            filter: brightness(0.45);\n          }\n          #{$maxFlashPercentage} {\n            filter: brightness(0.9);\n          }\n          #{$stopFlashPercentage} {\n            filter: brightness(0.45);\n          }\n          100% {\n            transform: perspective(400px) rotateY(0deg);\n            pointer-events: none;\n          }\n        }\n      }\n    }\n  }\n}\n\n@for $i from 1 through 20 {\n  .circle.size-#{$i} > li {\n    @include on-circle($item-count: $i);\n  }\n  #townsquare.reveal > .circle.size-#{$i} > li {\n    @include reveal-circle($item-count: $i);\n  }\n}\n\n/***** Demon bluffs / Fabled *******/\n#townsquare > .bluffs,\n#townsquare > .extra-roles,\n#townsquare > .top-left > .fabled {\n  &.extra-roles {\n    left: auto;\n    right: 10px;\n    transform-origin: bottom right;\n    ul {\n      flex-direction: row-reverse;\n    }\n  }\n  &.fabled {\n    top: -2.5px;\n    bottom: auto;\n    transform-origin: top left;\n    position: relative;\n    height: 100%;\n  }\n  &.bluffs {\n    &.double {\n      border-radius: 7.2vh;\n    }\n    ul {\n      flex-direction: column-reverse;\n      li {\n        width: auto;\n        height: auto;\n        ul {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-direction: row;\n          li {\n            width: 14vh;\n            height: 14vh;\n            display: inline-block;\n            transition: all 250ms;\n          }\n        }\n      }\n    }\n  }\n  position: absolute;\n  left: 10px;\n  bottom: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 100vh;\n  border: 3px solid black;\n  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.5));\n  transform-origin: bottom left;\n  transform: scale(1);\n  opacity: 1;\n  transition:\n    all 200ms ease-in-out,\n    border-radius 0s;\n  z-index: 21;\n  ul {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    li {\n      width: 14vh;\n      height: 14vh;\n      display: inline-block;\n      transition: all 250ms;\n    }\n  }\n  &.closed {\n    opacity: 0;\n    transform: scale(0.1);\n  }\n}\n\n#townsquare.reveal > .top-left > .fabled,\n#townsquare.reveal > .bluffs,\n#townsquare.reveal > .extra-roles {\n  opacity: 0;\n  transform: scale(0.1);\n}\n\n.extra-roles ul li .token .ability {\n  right: 120%;\n  left: auto;\n  &:before {\n    border-right-color: transparent;\n    border-left-color: black;\n    right: auto;\n    left: 100%;\n    margin-left: 2px;\n  }\n}\n\n.extra-roles ul li .token:before,\n.fabled ul li .token:before {\n  content: \" \";\n  opacity: 0;\n  transition: opacity 250ms;\n  background-image: url(\"../assets/icons/x.webp\");\n  background-size: 100% 115%;\n  background-position: center center;\n  z-index: 2;\n}\n\n/**** Night reminders ****/\n.night-order {\n  position: absolute;\n  width: 100%;\n  cursor: pointer;\n  opacity: 1;\n  display: flex;\n  top: 0;\n  align-items: center;\n  pointer-events: none;\n  font-family: \"Goudy StM\", sans-serif;\n\n  &:after {\n    content: \" \";\n    display: block;\n    padding-top: 100%;\n  }\n\n  &:hover ~ .token .ability {\n    opacity: 0;\n  }\n\n  .description {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    padding: 5px 10px 5px 30px;\n    width: 275px;\n    z-index: 25;\n    font-size: 65%;\n    min-height: 75px;\n    background: rgba(0, 0, 0, 0.625);\n    border-radius: 10px;\n    border: 3px solid black;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n    text-align: left;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n\n    i.reminder-token {\n      display: inline-block;\n      vertical-align: middle;\n      height: 20px;\n      width: 20px;\n      border: 1px solid white;\n      border-radius: 50%;\n      top: -2px;\n      background: url(\"../assets/reminder.webp\") no-repeat 50%;\n      background-size: 100%;\n    }\n\n    &:before {\n      transform: rotate(-90deg);\n      transform-origin: center top;\n      left: -98px;\n      top: 50%;\n      font-size: 85%;\n      letter-spacing: -1.25px;\n      position: absolute;\n      font-weight: bold;\n      text-shadow: 0 0 4px black;\n      text-align: center;\n      width: 200px;\n    }\n\n    &:after {\n      content: \" \";\n      border: 10px solid transparent;\n      width: 0;\n      height: 0;\n      position: absolute;\n    }\n  }\n\n  &.first .description {\n    right: 120%;\n    background: linear-gradient(to right, $gold 0%, rgba(0, 0, 0, 0.625) 20%);\n    &:before {\n      content: \"First Night\";\n    }\n    &:after {\n      border-left-color: black;\n      margin-left: 2px;\n      left: 100%;\n    }\n  }\n\n  &.other .description {\n    left: 120%;\n    background: linear-gradient(to right, $purple 0%, rgba(0, 0, 0, 0.625) 20%);\n    &:before {\n      content: \"Other Nights\";\n    }\n    &:after {\n      right: 100%;\n      margin-right: 2px;\n      border-right-color: black;\n    }\n  }\n\n  em {\n    font-style: normal;\n    position: absolute;\n    width: 28px;\n    height: 28px;\n    border-radius: 50%;\n    border: 2px solid black;\n    filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.5));\n    font-weight: bold;\n    font-size: 80%;\n    opacity: 0;\n    transform: scale(0);\n    will-change: opacity, transform;\n    pointer-events: all;\n    transition: all 300ms;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 3;\n  }\n\n  &.shown em {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  &.first em {\n    left: -1%;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, $gold 100%);\n  }\n\n  &.other em {\n    right: -1%;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, $purple 100%);\n  }\n\n  em:hover + .description {\n    opacity: 1;\n  }\n\n  // adjustment for storyteller and fabled\n  .fabled &.first,\n  .storyteller &.first {\n    &:hover {\n      z-index: 4;\n    }\n    .description {\n      right: auto;\n      left: 40px;\n      &:after {\n        left: auto;\n        right: 100%;\n        margin-left: 0;\n        margin-right: 2px;\n        border-left-color: transparent;\n        border-right-color: black;\n      }\n    }\n  }\n  // adjustment for extra characters\n  .extra-roles &.other {\n    &:hover {\n      z-index: 4;\n    }\n    .description {\n      right: 40px;\n      left: auto;\n\n      &:after {\n        left: 100%;\n        right: auto;\n        margin-left: 2px;\n        margin-right: 0;\n        border-left-color: black;\n        border-right-color: transparent;\n      }\n    }\n  }\n}\n\n#townsquare.reveal .player .night-order em {\n  transition-delay: 0s;\n}\n\n.extra-roles ul li:hover .token:before,\n#townsquare:not(.spectator) .fabled ul li:hover .token:before {\n  opacity: 0.75;\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TownSquare.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TownSquare.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TownSquare.vue?vue&type=template&id=10a5c0f0\"\nimport script from \"./TownSquare.vue?vue&type=script&lang=js\"\nexport * from \"./TownSquare.vue?vue&type=script&lang=js\"\nimport style0 from \"./TownSquare.vue?vue&type=style&index=0&id=10a5c0f0&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"center\"},[(_vm.grimoire.defaultBaseBackgroundIndex > 4 || !_vm.edition.isOfficial)?_c('div',{staticClass:\"edition\",class:[\n      {\n        custom:\n          (_vm.edition.logo && _vm.grimoire.isImageOptIn) ||\n          (_vm.edition.name && !_vm.edition.isOfficial),\n      },\n      'edition-' + _vm.edition.id,\n    ],style:({\n      backgroundImage: `url(${\n        _vm.edition.logo && _vm.grimoire.isImageOptIn\n          ? _vm.edition.logo\n          : require(\n              '../assets/editions/' +\n                (!_vm.edition.isOfficial && _vm.edition.name\n                  ? 'custom-label'\n                  : _vm.edition.id) +\n                '.webp',\n            )\n      })`,\n    })}):_vm._e(),(\n      !(_vm.edition.logo && _vm.grimoire.isImageOptIn) &&\n      _vm.edition.name &&\n      !_vm.edition.isOfficial\n    )?_c('span',{staticClass:\"meta\"},[_vm._v(\" \"+_vm._s(_vm.edition.name)+\" \"+_vm._s(_vm.edition.author ? \"by \" + _vm.edition.author : \"\")+\" \")]):_vm._e(),_c('div',{staticClass:\"info\"},[_c('table',[(_vm.players.length - _vm.teams.traveler < 5)?_c('tr',[_c('td',{attrs:{\"colspan\":\"4\"}},[_vm._v(\"Five or more players are required\")])]):_vm._e(),_c('tr',[_c('td',[_vm._v(\"Players\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.players.length)+\" \")]),_c('td',[_vm._v(\"Alive\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.teams.alive)+\" \")])]),(_vm.players.length - _vm.teams.traveler >= 5)?_c('tr',[_c('td',{staticClass:\"townsfolk\"},[_vm._v(\"Townsfolk\")]),_c('td',{staticClass:\"townsfolk\"},[_vm._v(\" \"+_vm._s(_vm.teams.townsfolk)+\" \")]),_c('td',{staticClass:\"demon\"},[_vm._v(\"Minions\")]),_c('td',{staticClass:\"demon\"},[_vm._v(\" \"+_vm._s(_vm.teams.minion)+\" \")])]):_vm._e(),(_vm.players.length - _vm.teams.traveler >= 5)?_c('tr',[_c('td',{staticClass:\"townsfolk\"},[_vm._v(\"Outsiders\")]),_c('td',{staticClass:\"townsfolk\"},[_vm._v(\" \"+_vm._s(_vm.teams.outsider)+\" \")]),_c('td',{staticClass:\"demon\"},[_vm._v(\"Demons\")]),_c('td',{staticClass:\"demon\"},[_vm._v(\" \"+_vm._s(_vm.teams.demon)+\" \")])]):_vm._e(),(_vm.teams.traveler)?_c('tr',{staticClass:\"traveler\"},[_c('td',{attrs:{\"colspan\":\"3\"}},[_vm._v(\"Travellers\")]),_c('td',[_vm._v(\" \"+_vm._s(_vm.teams.traveler)+\" \")])]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"center\">\n    <div\n      class=\"edition\"\n      v-if=\"grimoire.defaultBaseBackgroundIndex > 4 || !edition.isOfficial\"\n      :class=\"[\n        {\n          custom:\n            (edition.logo && grimoire.isImageOptIn) ||\n            (edition.name && !edition.isOfficial),\n        },\n        'edition-' + edition.id,\n      ]\"\n      :style=\"{\n        backgroundImage: `url(${\n          edition.logo && grimoire.isImageOptIn\n            ? edition.logo\n            : require(\n                '../assets/editions/' +\n                  (!edition.isOfficial && edition.name\n                    ? 'custom-label'\n                    : edition.id) +\n                  '.webp',\n              )\n        })`,\n      }\"\n    ></div>\n    <span\n      class=\"meta\"\n      v-if=\"\n        !(edition.logo && grimoire.isImageOptIn) &&\n        edition.name &&\n        !edition.isOfficial\n      \"\n    >\n      {{ edition.name }}\n      {{ edition.author ? \"by \" + edition.author : \"\" }}\n    </span>\n\n    <div class=\"info\">\n      <table>\n        <tr v-if=\"players.length - teams.traveler < 5\">\n          <td colspan=\"4\">Five or more players are required</td>\n        </tr>\n        <tr>\n          <td>Players</td>\n          <td>\n            {{ players.length }}\n          </td>\n          <td>Alive</td>\n          <td>\n            {{ teams.alive }}\n          </td>\n        </tr>\n        <tr v-if=\"players.length - teams.traveler >= 5\">\n          <td class=\"townsfolk\">Townsfolk</td>\n          <td class=\"townsfolk\">\n            {{ teams.townsfolk }}\n          </td>\n          <td class=\"demon\">Minions</td>\n          <td class=\"demon\">\n            {{ teams.minion }}\n          </td>\n        </tr>\n        <tr v-if=\"players.length - teams.traveler >= 5\">\n          <td class=\"townsfolk\">Outsiders</td>\n          <td class=\"townsfolk\">\n            {{ teams.outsider }}\n          </td>\n          <td class=\"demon\">Demons</td>\n          <td class=\"demon\">\n            {{ teams.demon }}\n          </td>\n        </tr>\n        <tr class=\"traveler\" v-if=\"teams.traveler\">\n          <td colspan=\"3\">Travellers</td>\n          <td>\n            {{ teams.traveler }}\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gameJSON from \"./../game\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  computed: {\n    teams: function () {\n      const { players } = this.$store.state.players;\n      const nonTravelers = this.$store.getters[\"players/nonTravelers\"];\n      const alive = players.filter((player) => player.isDead !== true).length;\n      return {\n        ...gameJSON[nonTravelers - 5],\n        traveler: players.length - nonTravelers,\n        alive,\n        votes:\n          alive +\n          players.filter(\n            (player) => player.isDead === true && player.isVoteless !== true,\n          ).length,\n      };\n    },\n    ...mapState([\"edition\", \"grimoire\"]),\n    ...mapState(\"players\", [\"players\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../vars.scss\";\n\n.center {\n  position: absolute;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n\n  .edition {\n    position: absolute;\n    height: 260px;\n    width: 300px;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.8));\n    &.custom {\n      height: 195px;\n      width: 225px;\n    }\n  }\n  .meta {\n    flex-basis: 100%;\n    text-align: center;\n    top: 37px;\n    max-width: 185px;\n    padding: 2px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-height: 60px;\n    font-family: \"LHF Unlovable\", sans-serif;\n    font-size: 120%;\n    line-height: 1;\n    text-shadow:\n      0 2px 1px #000,\n      0 -2px 1px #000,\n      2px 0 1px #000,\n      -2px 0 1px #000;\n  }\n\n  .info {\n    position: absolute;\n    opacity: 0;\n    transition: opacity 250ms;\n    border: 20px solid;\n    border-image: url(\"../assets/towninfo.webp\") 40 fill/20px stretch;\n    padding: 1vh calc(1vh + 10px) 1vh 1vh;\n    font-size: 80%;\n    color: black;\n    font-weight: 700;\n    line-height: 1.1;\n    font-family: \"Goudy StM\", sans-serif;\n    display: flex;\n    align-items: center;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n\n    .townsfolk {\n      color: $townsfolk;\n    }\n    .demon {\n      color: $demon;\n    }\n    .traveler {\n      color: $traveler;\n    }\n\n    table {\n      border-collapse: collapse;\n      tr {\n        white-space: nowrap;\n        td:nth-child(2n + 1) {\n          text-align: center;\n          padding: 0 10px;\n        }\n        td:nth-child(2n) {\n          text-align: center;\n          font-size: 120%;\n          border-left: 1px dotted #806151;\n          border-right: 1px dotted #806151;\n          padding: 0 10px;\n        }\n      }\n    }\n  }\n\n  .info:hover {\n    opacity: 1;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TownInfo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TownInfo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TownInfo.vue?vue&type=template&id=3583da4e&scoped=true\"\nimport script from \"./TownInfo.vue?vue&type=script&lang=js\"\nexport * from \"./TownInfo.vue?vue&type=script&lang=js\"\nimport style0 from \"./TownInfo.vue?vue&type=style&index=0&id=3583da4e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3583da4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"controls\"}},[(_vm.session.sessionId)?_c('span',{staticClass:\"session\",class:{\n      spectator: _vm.session.isSpectator,\n      reconnecting: _vm.session.isReconnecting,\n    },attrs:{\"title\":`${_vm.session.playerCount} other players in this session${\n      _vm.session.ping ? ' (' + _vm.session.ping + 'ms latency)' : ''\n    }`},on:{\"click\":_vm.leaveSession}},[_c('font-awesome-icon',{attrs:{\"icon\":\"tower-cell\"}}),_vm._v(\" \"+_vm._s(_vm.session.playerCount)+\" \")],1):_vm._e(),_c('div',{staticClass:\"menu\",class:{ open: _vm.grimoire.isMenuOpen }},[_c('font-awesome-icon',{attrs:{\"icon\":\"gear\"},on:{\"click\":_vm.toggleMenu}}),_c('ul',[_c('li',{staticClass:\"tabs\",class:_vm.tab},[_c('font-awesome-icon',{attrs:{\"icon\":\"book-open\"},on:{\"click\":function($event){_vm.tab = 'grimoire'}}}),_c('font-awesome-icon',{attrs:{\"icon\":\"tower-cell\"},on:{\"click\":function($event){_vm.tab = 'session'}}}),(!_vm.session.isSpectator)?_c('font-awesome-icon',{attrs:{\"icon\":\"users\"},on:{\"click\":function($event){_vm.tab = 'players'}}}):_vm._e(),(!_vm.session.isSpectator)?_c('font-awesome-icon',{attrs:{\"icon\":\"masks-theater\"},on:{\"click\":function($event){_vm.tab = 'characters'}}}):_vm._e(),_c('font-awesome-icon',{attrs:{\"icon\":\"question\"},on:{\"click\":function($event){_vm.tab = 'help'}}})],1),(_vm.tab === 'grimoire')?[_c('li',{staticClass:\"headline\"},[_vm._v(\"Grimoire\")]),(_vm.players.length && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.clearRoles}},[_vm._v(\" Reset Grimoire \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"trash-can\"}})],1)]):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.toggleGrimoire}},[(!_vm.grimoire.isPublic)?[_vm._v(\"Show Town Square\")]:_vm._e(),(_vm.grimoire.isPublic)?[_vm._v(\"Show Grimoire\")]:_vm._e(),_c('em',[_vm._v(\"[G]\")])],2):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.toggleFabled}},[(!_vm.grimoire.isFabledOpen)?[_vm._v(\"Show Fabled\")]:_vm._e(),(_vm.grimoire.isFabledOpen)?[_vm._v(\"Hide Fabled\")]:_vm._e(),_c('em',[_vm._v(\"[F]\")])],2):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.toggleBluffs}},[(!_vm.grimoire.isBluffsOpen)?[_vm._v(\"Show Demon Bluffs\")]:_vm._e(),(_vm.grimoire.isBluffsOpen)?[_vm._v(\"Hide Demon Bluffs\")]:_vm._e(),_c('em',[_vm._v(\"[B]\")])],2):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.toggleExtraBluffs}},[_vm._v(\" Extra Bluffs \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":[\n                'fas',\n                _vm.grimoire.isExtraBluffs ? 'square-check' : 'square',\n              ]}})],1)]):_vm._e(),(!_vm.session.isSpectator)?_c('li',{on:{\"click\":_vm.toggleNight}},[(!_vm.grimoire.isNight)?[_vm._v(\"Switch to Night\")]:_vm._e(),(_vm.grimoire.isNight)?[_vm._v(\"Switch to Day\")]:_vm._e(),_c('em',[_vm._v(\"[S]\")])],2):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.toggleNightOrder}},[_vm._v(\" Night Order \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":[\n                'fas',\n                _vm.grimoire.isNightOrder ? 'square-check' : 'square',\n              ]}})],1)]):_vm._e(),(_vm.players.length)?_c('li',[_vm._v(\" Token Scale \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"magnifying-glass-minus\"},on:{\"click\":function($event){_vm.setZoom(Math.min(Math.max(_vm.grimoire.zoom - 1, -8), 10))}}}),_vm._v(\" \"+_vm._s(Math.round(100 + _vm.grimoire.zoom * 10))+\"% \"),_c('font-awesome-icon',{attrs:{\"icon\":\"magnifying-glass-plus\"},on:{\"click\":function($event){_vm.setZoom(Math.min(Math.max(_vm.grimoire.zoom + 1, -8), 10))}}})],1)]):_vm._e(),_c('li',[_c('small',[_vm._v(\"Default Background\")]),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-chevron-left\"},on:{\"click\":function($event){_vm.setDefaultBackgroundIndex(\n                  (_vm.edition.isOfficial\n                    ? _vm.grimoire.defaultBaseBackgroundIndex\n                    : _vm.grimoire.defaultCustomBackgroundIndex) - 1,\n                )}}}),_vm._v(\" \"+_vm._s((_vm.edition.isOfficial ? _vm.grimoire.defaultBaseBackgroundIndex : _vm.grimoire.defaultCustomBackgroundIndex) + 1)+\" \"),_c('font-awesome-icon',{attrs:{\"icon\":\"circle-chevron-right\"},on:{\"click\":function($event){_vm.setDefaultBackgroundIndex(\n                  (_vm.edition.isOfficial\n                    ? _vm.grimoire.defaultBaseBackgroundIndex\n                    : _vm.grimoire.defaultCustomBackgroundIndex) + 1,\n                )}}})],1)]),_c('li',{on:{\"click\":_vm.setBackground}},[_vm._v(\" Custom Background \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"image\"}})],1)]),(!_vm.edition.isOfficial)?_c('li',{on:{\"click\":_vm.imageOptIn}},[_vm._v(\" Show Custom Images \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":[\n                'fas',\n                _vm.grimoire.isImageOptIn ? 'square-check' : 'square',\n              ]}})],1)]):_vm._e(),_c('li',{on:{\"click\":_vm.toggleStatic}},[_vm._v(\" Disable Animations \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":['fas', _vm.grimoire.isStatic ? 'square-check' : 'square']}})],1)]),_c('li',{on:{\"click\":_vm.toggleMuted}},[(!_vm.grimoire.isMuted)?[_vm._v(\"Mute Sounds\")]:_vm._e(),(_vm.grimoire.isMuted)?[_vm._v(\"Unmute Sounds\")]:_vm._e(),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":[\n                'fas',\n                _vm.grimoire.isMuted ? 'volume-xmark' : 'volume-high',\n              ]}})],1)],2)]:_vm._e(),(_vm.tab === 'session')?[(_vm.session.sessionId)?_c('li',{staticClass:\"headline\"},[_vm._v(\" \"+_vm._s(_vm.session.isSpectator ? \"Playing\" : \"Hosting\")+\" \")]):_c('li',{staticClass:\"headline\"},[_vm._v(\"Live Session\")]),(!_vm.session.sessionId)?[_c('li',{on:{\"click\":_vm.hostSession}},[_vm._v(\"Host (Storyteller)\"),_c('em',[_vm._v(\"[H]\")])]),_c('li',{on:{\"click\":_vm.joinSession}},[_vm._v(\"Join (Player)\"),_c('em',[_vm._v(\"[J]\")])])]:[(_vm.session.ping)?_c('li',[_vm._v(\" Delay to \"+_vm._s(_vm.session.isSpectator ? \"Host\" : \"Players\")+\" \"),_c('em',[_vm._v(_vm._s(_vm.session.ping)+\"ms\")])]):_vm._e(),_c('li',{on:{\"click\":_vm.copySessionUrl}},[_vm._v(\" Copy Player Link \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"copy\"}})],1)]),(_vm.session.voteHistory.length || !_vm.session.isSpectator)?_c('li',{on:{\"click\":function($event){return _vm.toggleModal('voteHistory')}}},[_vm._v(\" Vote History\"),_c('em',[_vm._v(\"[V]\")])]):_vm._e(),_c('li',{on:{\"click\":_vm.leaveSession}},[_vm._v(\" Leave Session \"),_c('em',[_vm._v(_vm._s(_vm.session.sessionId))])])]]:_vm._e(),(_vm.tab === 'players' && !_vm.session.isSpectator)?[_c('li',{staticClass:\"headline\"},[_vm._v(\"Players\")]),(_vm.players.length < 20 && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.addPlayer}},[_vm._v(\" Add\"),_c('em',[_vm._v(\"[A]\")])]):_vm._e(),(_vm.players.length > 2 && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.randomizeSeatings}},[_vm._v(\" Randomize Seating \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"dice\"}})],1)]):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.clearPronouns}},[_vm._v(\" Clear Pronouns \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"venus-mars\"}})],1)]):_vm._e(),(_vm.players.length)?_c('li',{on:{\"click\":_vm.forceHandsDown}},[_vm._v(\" Force Hands Down \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"hand\"}})],1)]):_vm._e(),(_vm.players.length && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.clearPlayers}},[_vm._v(\" Remove All \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"trash-can\"}})],1)]):_vm._e()]:_vm._e(),(_vm.tab === 'characters' && !_vm.session.isSpectator)?[_c('li',{staticClass:\"headline\"},[_vm._v(\"Characters\")]),(!_vm.session.reveal)?_c('li',{on:{\"click\":function($event){return _vm.toggleModal('edition')}}},[_vm._v(\" Select Edition \"),_c('em',[_vm._v(\"[E]\")])]):_vm._e(),(_vm.players.length > 4 && !_vm.session.reveal)?_c('li',{on:{\"click\":function($event){return _vm.toggleModal('roles')}}},[_vm._v(\" Choose & Assign \"),_c('em',[_vm._v(\"[C]\")])]):_vm._e(),_c('li',{on:{\"click\":function($event){return _vm.toggleModal('fabled')}}},[_vm._v(\" Add Fabled \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"dragon\"}})],1)]),_c('li',{on:{\"click\":function($event){return _vm.toggleModal('extraRoles')}}},[_vm._v(\" Add Extra Characters \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-plus\"}})],1)]),(_vm.session.sessionId && _vm.players.length > 4 && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.distributeRoles}},[_vm._v(\" Send Characters \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"paper-plane\"}})],1)]):_vm._e(),(_vm.session.sessionId && _vm.players.length > 4 && !_vm.session.reveal)?_c('li',{on:{\"click\":_vm.revealGrimoire}},[_vm._v(\" Reveal Grimoire \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"book-skull\"}})],1)]):_vm._e()]:_vm._e(),(_vm.tab === 'help')?[_c('li',{staticClass:\"headline\"},[_vm._v(\"Help\")]),_c('li',{on:{\"click\":function($event){return _vm.toggleModal('reference')}}},[_vm._v(\" Reference Sheet \"),_c('em',[_vm._v(\"[R]\")])]),_c('li',{on:{\"click\":function($event){return _vm.toggleModal('nightOrder')}}},[_vm._v(\" Night Order Sheet \"),_c('em',[_vm._v(\"[N]\")])]),_c('li',{on:{\"click\":function($event){return _vm.toggleModal('gameState')}}},[_vm._v(\" Game State JSON \"),_c('em',[_c('font-awesome-icon',{attrs:{\"icon\":\"file-code\"}})],1)])]:_vm._e()],2)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"controls\">\n    <span\n      class=\"session\"\n      :class=\"{\n        spectator: session.isSpectator,\n        reconnecting: session.isReconnecting,\n      }\"\n      v-if=\"session.sessionId\"\n      @click=\"leaveSession\"\n      :title=\"`${session.playerCount} other players in this session${\n        session.ping ? ' (' + session.ping + 'ms latency)' : ''\n      }`\"\n    >\n      <font-awesome-icon icon=\"tower-cell\" />\n      {{ session.playerCount }}\n    </span>\n    <div class=\"menu\" :class=\"{ open: grimoire.isMenuOpen }\">\n      <font-awesome-icon icon=\"gear\" @click=\"toggleMenu\" />\n      <ul>\n        <li class=\"tabs\" :class=\"tab\">\n          <font-awesome-icon icon=\"book-open\" @click=\"tab = 'grimoire'\" />\n          <font-awesome-icon icon=\"tower-cell\" @click=\"tab = 'session'\" />\n          <font-awesome-icon\n            icon=\"users\"\n            v-if=\"!session.isSpectator\"\n            @click=\"tab = 'players'\"\n          />\n          <font-awesome-icon\n            icon=\"masks-theater\"\n            v-if=\"!session.isSpectator\"\n            @click=\"tab = 'characters'\"\n          />\n          <font-awesome-icon icon=\"question\" @click=\"tab = 'help'\" />\n        </li>\n\n        <template v-if=\"tab === 'grimoire'\">\n          <!-- Grimoire -->\n          <li class=\"headline\">Grimoire</li>\n          <li @click=\"clearRoles\" v-if=\"players.length && !session.reveal\">\n            Reset Grimoire\n            <em><font-awesome-icon icon=\"trash-can\" /></em>\n          </li>\n          <li @click=\"toggleGrimoire\" v-if=\"players.length\">\n            <template v-if=\"!grimoire.isPublic\">Show Town Square</template>\n            <template v-if=\"grimoire.isPublic\">Show Grimoire</template>\n            <em>[G]</em>\n          </li>\n          <li @click=\"toggleFabled\" v-if=\"players.length\">\n            <template v-if=\"!grimoire.isFabledOpen\">Show Fabled</template>\n            <template v-if=\"grimoire.isFabledOpen\">Hide Fabled</template>\n            <em>[F]</em>\n          </li>\n          <li @click=\"toggleBluffs\" v-if=\"players.length\">\n            <template v-if=\"!grimoire.isBluffsOpen\">Show Demon Bluffs</template>\n            <template v-if=\"grimoire.isBluffsOpen\">Hide Demon Bluffs</template>\n            <em>[B]</em>\n          </li>\n          <li @click=\"toggleExtraBluffs\" v-if=\"players.length\">\n            Extra Bluffs\n            <em>\n              <font-awesome-icon\n                :icon=\"[\n                  'fas',\n                  grimoire.isExtraBluffs ? 'square-check' : 'square',\n                ]\"\n              />\n            </em>\n          </li>\n          <li @click=\"toggleNight\" v-if=\"!session.isSpectator\">\n            <template v-if=\"!grimoire.isNight\">Switch to Night</template>\n            <template v-if=\"grimoire.isNight\">Switch to Day</template>\n            <em>[S]</em>\n          </li>\n          <li @click=\"toggleNightOrder\" v-if=\"players.length\">\n            Night Order\n            <em>\n              <font-awesome-icon\n                :icon=\"[\n                  'fas',\n                  grimoire.isNightOrder ? 'square-check' : 'square',\n                ]\"\n              />\n            </em>\n          </li>\n          <li v-if=\"players.length\">\n            Token Scale\n            <em>\n              <font-awesome-icon\n                @click=\"setZoom(Math.min(Math.max(grimoire.zoom - 1, -8), 10))\"\n                icon=\"magnifying-glass-minus\"\n              />\n              {{ Math.round(100 + grimoire.zoom * 10) }}%\n              <font-awesome-icon\n                @click=\"setZoom(Math.min(Math.max(grimoire.zoom + 1, -8), 10))\"\n                icon=\"magnifying-glass-plus\"\n              />\n            </em>\n          </li>\n          <li>\n            <small>Default Background</small>\n            <em>\n              <font-awesome-icon\n                @click=\"\n                  setDefaultBackgroundIndex(\n                    (edition.isOfficial\n                      ? grimoire.defaultBaseBackgroundIndex\n                      : grimoire.defaultCustomBackgroundIndex) - 1,\n                  )\n                \"\n                icon=\"circle-chevron-left\"\n              />\n              {{\n                (edition.isOfficial\n                  ? grimoire.defaultBaseBackgroundIndex\n                  : grimoire.defaultCustomBackgroundIndex) + 1\n              }}\n              <font-awesome-icon\n                @click=\"\n                  setDefaultBackgroundIndex(\n                    (edition.isOfficial\n                      ? grimoire.defaultBaseBackgroundIndex\n                      : grimoire.defaultCustomBackgroundIndex) + 1,\n                  )\n                \"\n                icon=\"circle-chevron-right\"\n              />\n            </em>\n          </li>\n          <li @click=\"setBackground\">\n            Custom Background\n            <em><font-awesome-icon icon=\"image\" /></em>\n          </li>\n          <li v-if=\"!edition.isOfficial\" @click=\"imageOptIn\">\n            Show Custom Images\n            <em\n              ><font-awesome-icon\n                :icon=\"[\n                  'fas',\n                  grimoire.isImageOptIn ? 'square-check' : 'square',\n                ]\"\n            /></em>\n          </li>\n          <li @click=\"toggleStatic\">\n            Disable Animations\n            <em\n              ><font-awesome-icon\n                :icon=\"['fas', grimoire.isStatic ? 'square-check' : 'square']\"\n            /></em>\n          </li>\n          <li @click=\"toggleMuted\">\n            <template v-if=\"!grimoire.isMuted\">Mute Sounds</template>\n            <template v-if=\"grimoire.isMuted\">Unmute Sounds</template>\n            <em\n              ><font-awesome-icon\n                :icon=\"[\n                  'fas',\n                  grimoire.isMuted ? 'volume-xmark' : 'volume-high',\n                ]\"\n            /></em>\n          </li>\n        </template>\n\n        <template v-if=\"tab === 'session'\">\n          <!-- Session -->\n          <li class=\"headline\" v-if=\"session.sessionId\">\n            {{ session.isSpectator ? \"Playing\" : \"Hosting\" }}\n          </li>\n          <li class=\"headline\" v-else>Live Session</li>\n          <template v-if=\"!session.sessionId\">\n            <li @click=\"hostSession\">Host (Storyteller)<em>[H]</em></li>\n            <li @click=\"joinSession\">Join (Player)<em>[J]</em></li>\n          </template>\n          <template v-else>\n            <li v-if=\"session.ping\">\n              Delay to {{ session.isSpectator ? \"Host\" : \"Players\" }}\n              <em>{{ session.ping }}ms</em>\n            </li>\n            <li @click=\"copySessionUrl\">\n              Copy Player Link\n              <em><font-awesome-icon icon=\"copy\" /></em>\n            </li>\n            <li\n              v-if=\"session.voteHistory.length || !session.isSpectator\"\n              @click=\"toggleModal('voteHistory')\"\n            >\n              Vote History<em>[V]</em>\n            </li>\n            <li @click=\"leaveSession\">\n              Leave Session\n              <em>{{ session.sessionId }}</em>\n            </li>\n          </template>\n        </template>\n\n        <template v-if=\"tab === 'players' && !session.isSpectator\">\n          <!-- Users -->\n          <li class=\"headline\">Players</li>\n          <li @click=\"addPlayer\" v-if=\"players.length < 20 && !session.reveal\">\n            Add<em>[A]</em>\n          </li>\n          <li\n            @click=\"randomizeSeatings\"\n            v-if=\"players.length > 2 && !session.reveal\"\n          >\n            Randomize Seating\n            <em><font-awesome-icon icon=\"dice\" /></em>\n          </li>\n          <li @click=\"clearPronouns\" v-if=\"players.length\">\n            Clear Pronouns\n            <em><font-awesome-icon icon=\"venus-mars\" /></em>\n          </li>\n          <li @click=\"forceHandsDown\" v-if=\"players.length\">\n            Force Hands Down\n            <em><font-awesome-icon icon=\"hand\" /></em>\n          </li>\n          <li @click=\"clearPlayers\" v-if=\"players.length && !session.reveal\">\n            Remove All\n            <em><font-awesome-icon icon=\"trash-can\" /></em>\n          </li>\n        </template>\n\n        <template v-if=\"tab === 'characters' && !session.isSpectator\">\n          <!-- Characters -->\n          <li class=\"headline\">Characters</li>\n          <li @click=\"toggleModal('edition')\" v-if=\"!session.reveal\">\n            Select Edition\n            <em>[E]</em>\n          </li>\n          <li\n            @click=\"toggleModal('roles')\"\n            v-if=\"players.length > 4 && !session.reveal\"\n          >\n            Choose & Assign\n            <em>[C]</em>\n          </li>\n          <li @click=\"toggleModal('fabled')\">\n            Add Fabled\n            <em><font-awesome-icon icon=\"dragon\" /></em>\n          </li>\n          <li @click=\"toggleModal('extraRoles')\">\n            Add Extra Characters\n            <em><font-awesome-icon icon=\"circle-plus\" /></em>\n          </li>\n          <li\n            v-if=\"session.sessionId && players.length > 4 && !session.reveal\"\n            @click=\"distributeRoles\"\n          >\n            Send Characters\n            <em><font-awesome-icon icon=\"paper-plane\" /></em>\n          </li>\n          <li\n            v-if=\"session.sessionId && players.length > 4 && !session.reveal\"\n            @click=\"revealGrimoire\"\n          >\n            Reveal Grimoire\n            <em><font-awesome-icon icon=\"book-skull\" /></em>\n          </li>\n        </template>\n\n        <template v-if=\"tab === 'help'\">\n          <!-- Help -->\n          <li class=\"headline\">Help</li>\n          <li @click=\"toggleModal('reference')\">\n            Reference Sheet\n            <em>[R]</em>\n          </li>\n          <li @click=\"toggleModal('nightOrder')\">\n            Night Order Sheet\n            <em>[N]</em>\n          </li>\n          <li @click=\"toggleModal('gameState')\">\n            Game State JSON\n            <em><font-awesome-icon icon=\"file-code\" /></em>\n          </li>\n        </template>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapState } from \"vuex\";\n\nexport default {\n  computed: {\n    ...mapState([\"grimoire\", \"session\", \"edition\"]),\n    ...mapState(\"players\", [\"players\"]),\n  },\n  data() {\n    return {\n      tab: \"grimoire\",\n    };\n  },\n  methods: {\n    setDefaultBackgroundIndex(newBackground) {\n      if (this.edition.isOfficial) {\n        this.$store.commit(\"setDefaultBaseBackgroundIndex\", newBackground);\n      } else {\n        this.$store.commit(\"setDefaultCustomBackgroundIndex\", newBackground);\n      }\n    },\n    setBackground() {\n      const background = prompt(\n        \"Enter a custom background URL or leave blank to reset to default background\",\n      );\n      if (background || background === \"\") {\n        this.$store.commit(\"setBackground\", background);\n      }\n    },\n    hostSession() {\n      if (this.session.sessionId) return;\n      const sessionId = prompt(\n        \"Enter a channel number / name for your session\",\n        Math.round(Math.random() * 10000),\n      );\n      if (sessionId) {\n        this.$store.commit(\"session/clearVoteHistory\");\n        this.$store.commit(\"session/setSpectator\", false);\n        this.$store.commit(\"session/setSessionId\", sessionId);\n        this.copySessionUrl();\n      }\n    },\n    copySessionUrl() {\n      const url = window.location.href.split(\"#\")[0];\n      const link = url + \"#\" + this.session.sessionId;\n      navigator.clipboard.writeText(link);\n    },\n    distributeRoles() {\n      if (this.session.isSpectator || this.session.reveal) return;\n      const popup =\n        \"Do you want to distribute assigned characters to all SEATED players? Note that this will not inform players of any modified alignments.\";\n      if (confirm(popup)) {\n        this.$store.commit(\"session/distributeRoles\", true);\n        setTimeout(\n          (() => {\n            this.$store.commit(\"session/distributeRoles\", false);\n          }).bind(this),\n          2000,\n        );\n      }\n    },\n    revealGrimoire() {\n      if (this.session.isSpectator || this.session.reveal) return;\n      this.$store.commit(\"session/setReveal\", { isRevealInProgress: true });\n      this.$store.commit(\"session/setMarkedPlayer\", -1);\n      setTimeout(\n        (() => {\n          this.players.forEach((player) => {\n            player.reminders.toReversed().forEach((reminder) => {\n              const role =\n                this.$store.state.roles.get(reminder.role) ||\n                this.$store.getters.rolesJSONbyId.get(reminder.role) ||\n                {};\n              if (\n                role &&\n                role.remindersGlobal &&\n                role.remindersGlobal[0] === reminder.name\n              ) {\n                const alignment = player.alignment;\n                this.$store.commit(\"players/update\", {\n                  player,\n                  property: \"role\",\n                  value: role,\n                });\n                this.$store.commit(\"players/update\", {\n                  player,\n                  property: \"alignment\",\n                  value: alignment,\n                });\n              }\n            });\n          });\n        }).bind(this),\n        62.5 * this.players.length + 250,\n      );\n    },\n    imageOptIn() {\n      const popup =\n        \"Are you sure you want to allow custom images? A malicious script file author might track your IP address this way.\";\n      if (this.grimoire.isImageOptIn || confirm(popup)) {\n        this.toggleImageOptIn();\n      }\n    },\n    joinSession() {\n      if (this.session.sessionId) return this.leaveSession();\n      let sessionId = prompt(\n        \"Enter the channel number / name of the session you want to join\",\n      );\n      if (sessionId.match(/^https?:\\/\\//i)) {\n        sessionId = sessionId.split(\"#\").pop();\n      }\n      if (sessionId) {\n        this.$store.commit(\"session/clearVoteHistory\");\n        this.$store.commit(\"session/setSpectator\", true);\n        this.$store.commit(\"toggleGrimoire\", false);\n        this.$store.commit(\"session/setSessionId\", sessionId);\n      }\n    },\n    leaveSession() {\n      if (confirm(\"Are you sure you want to leave the active live game?\")) {\n        this.$store.commit(\"session/setSpectator\", false);\n        this.$store.commit(\"session/setSessionId\", \"\");\n      }\n    },\n    addPlayer() {\n      if (\n        this.session.isSpectator ||\n        this.players.length >= 20 ||\n        this.session.reveal\n      )\n        return;\n      const name = prompt(\"Player name\");\n      if (name) {\n        this.$store.commit(\"players/add\", name);\n      }\n    },\n    randomizeSeatings() {\n      if (this.session.isSpectator || this.session.reveal) return;\n      if (confirm(\"Are you sure you want to randomize seatings?\")) {\n        this.$store.dispatch(\"players/randomize\");\n      }\n    },\n    clearPlayers() {\n      if (this.session.isSpectator || this.session.reveal) return;\n      if (confirm(\"Are you sure you want to remove all players?\")) {\n        // abort vote if in progress\n        if (this.session.nomination) {\n          this.$store.commit(\"session/nomination\");\n        }\n        this.$store.commit(\"players/clear\");\n        this.$store.commit(\"session/setMarkedPlayer\", -1);\n        this.$store.commit(\"toggleFabled\", true);\n        this.$store.commit(\"toggleBluffs\", true);\n        this.$store.commit(\"toggleExtraBluffs\", false);\n      }\n    },\n    clearPronouns() {\n      if (this.session.isSpectator) return;\n      if (confirm(\"Are you sure you want to remove all player pronouns?\")) {\n        const property = \"pronouns\";\n        const value = \"\";\n        this.players.forEach((player) => {\n          this.$store.commit(\"players/update\", {\n            player: player,\n            property,\n            value,\n          });\n        });\n      }\n    },\n    clearRoles() {\n      if (\n        !this.session.reveal &&\n        ((this.session.isSpectator &&\n          confirm(\"Are you sure you want to reset the grimoire?\")) ||\n          (!this.session.isSpectator &&\n            confirm(\n              \"Are you sure you want to reset the grimoire? This will also reset the grimoire for all players.\",\n            )))\n      ) {\n        this.$store.dispatch(\"players/clearRoles\");\n        this.$store.commit(\"session/setMarkedPlayer\", -1);\n        this.$store.commit(\"toggleFabled\", true);\n        this.$store.commit(\"toggleBluffs\", true);\n        this.$store.commit(\"toggleExtraBluffs\", false);\n      }\n    },\n    forceHandsDown() {\n      if (this.session.isSpectator) return;\n      if (\n        confirm(\n          \"Are you sure you want to force all players to lower their hands?\",\n        )\n      ) {\n        this.$store.commit(\"session/setHandsRaised\", []);\n      }\n    },\n    toggleNight() {\n      this.$store.commit(\"toggleNight\");\n      this.grimoire.isNightOrder = this.grimoire.isNight;\n      if (this.grimoire.isNight) {\n        this.$store.commit(\"session/setMarkedPlayer\", -1);\n      }\n    },\n    ...mapMutations([\n      \"toggleGrimoire\",\n      \"toggleFabled\",\n      \"toggleBluffs\",\n      \"toggleExtraBluffs\",\n      \"toggleMenu\",\n      \"toggleImageOptIn\",\n      \"toggleMuted\",\n      \"toggleNightOrder\",\n      \"toggleStatic\",\n      \"setZoom\",\n      \"toggleModal\",\n    ]),\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../vars.scss\";\n\n// success animation\n@keyframes greenToWhite {\n  from {\n    color: green;\n  }\n  to {\n    color: white;\n  }\n}\n\n// Controls\n#controls {\n  position: absolute;\n  right: 3px;\n  top: 3px;\n  text-align: right;\n  padding-right: 60px;\n  z-index: 75;\n\n  svg {\n    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 1));\n    &.success {\n      animation: greenToWhite 1s normal forwards;\n      animation-iteration-count: 1;\n    }\n  }\n\n  > span {\n    display: inline-block;\n    cursor: pointer;\n    z-index: 5;\n    margin-top: 9px;\n    margin-left: 10px;\n    filter: drop-shadow(0 0 2px rgba(0, 0, 0, 1));\n    text-shadow: 0 0 5px black;\n  }\n\n  span.session {\n    color: $light-purple;\n    font-weight: bold;\n    &.spectator {\n      color: $gold;\n    }\n    &.reconnecting {\n      animation: blink 1s infinite;\n    }\n  }\n}\n\n@keyframes blink {\n  50% {\n    opacity: 0.5;\n    color: gray;\n  }\n}\n\n.menu {\n  width: 245px;\n  transform-origin: 219.5px 24.6px;\n  transition: transform 500ms cubic-bezier(0.68, -0.55, 0.27, 1.55);\n  transform: rotate(-90deg);\n  position: absolute;\n  right: 0;\n  top: 0;\n\n  &.open {\n    transform: rotate(0deg);\n  }\n\n  &.open ul {\n    box-shadow: 0 0 10px black;\n  }\n\n  > svg {\n    cursor: pointer;\n    background: rgba(0, 0, 0, 0.5);\n    border: 3px solid black;\n    width: 29.5px;\n    height: 26px;\n    margin-bottom: -6px;\n    border-bottom: 0;\n    border-radius: 10px 10px 0 0;\n    padding: 9px 8px 18px;\n  }\n\n  a {\n    color: white;\n    text-decoration: none;\n    &:hover {\n      color: $gold;\n    }\n  }\n\n  ul {\n    display: flex;\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    flex-direction: column;\n    overflow: hidden;\n    border: 3px solid black;\n    border-radius: 10px 0 10px 10px;\n    transition: box-shadow 500ms ease-in-out;\n\n    li {\n      padding: 2px 5px;\n      color: white;\n      text-align: left;\n      font-family: \"Goudy StM\", sans-serif;\n      font-size: 90%;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      min-height: 30px;\n\n      &.tabs {\n        display: flex;\n        padding: 0;\n        svg {\n          flex: 100%;\n          height: 23px;\n          border-bottom: 3px solid black;\n          border-left: 3px solid black;\n          padding: 5px 0;\n          cursor: pointer;\n          transition: color 250ms;\n          &:hover {\n            color: $gold;\n          }\n          &:first-child {\n            border-left: 0;\n          }\n        }\n        &.grimoire .fa-book-open,\n        &.players .fa-users,\n        &.characters .fa-masks-theater,\n        &.session .fa-tower-cell,\n        &.help .fa-question {\n          background: linear-gradient(\n            to bottom,\n            $gold 0%,\n            rgba(0, 0, 0, 0.5) 100%\n          );\n        }\n      }\n\n      &:not(.headline):not(.tabs):hover {\n        cursor: pointer;\n        color: $gold;\n      }\n\n      em {\n        flex-grow: 0;\n        font-style: normal;\n        margin-left: 10px;\n        font-size: 80%;\n        svg {\n          vertical-align: middle;\n        }\n      }\n    }\n\n    .headline {\n      font-family:\n        Goudy StM,\n        sans-serif;\n      letter-spacing: 1px;\n      padding: 0 10px;\n      text-align: center;\n      justify-content: center;\n      background: linear-gradient(\n        to right,\n        $gold 0%,\n        rgba(0, 0, 0, 0.5) 20%,\n        rgba(0, 0, 0, 0.5) 80%,\n        $purple 100%\n      );\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Menu.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Menu.vue?vue&type=template&id=290d7332&scoped=true\"\nimport script from \"./Menu.vue?vue&type=script&lang=js\"\nexport * from \"./Menu.vue?vue&type=script&lang=js\"\nimport style0 from \"./Menu.vue?vue&type=style&index=0&id=290d7332&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"290d7332\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.roles && _vm.nonTravelers >= 5)?_c('Modal',{staticClass:\"roles\",on:{\"close\":function($event){return _vm.toggleModal('roles')}}},[_c('font-awesome-icon',{staticClass:\"clear\",attrs:{\"icon\":\"trash-can\",\"title\":\"Clear Selections\"},on:{\"click\":_vm.resetRoles}}),_c('h3',[_vm._v(\"Select Characters for \"+_vm._s(_vm.nonTravelers)+\" Players:\")]),_vm._l((_vm.roleSelection),function(teamRoles,team){return _c('ul',{key:team,staticClass:\"tokens\"},[_c('li',{staticClass:\"count\",class:[team]},[_vm._v(\" \"+_vm._s(teamRoles.reduce((a, { selected }) => a + selected, 0))+\" / \"+_vm._s(_vm.game[_vm.nonTravelers - 5][team])+\" \")]),_vm._l((teamRoles),function(role){return _c('li',{key:role.id,class:[\n        {\n          selected: role.selected,\n          disabled:\n            role.special &&\n            role.special.some(\n              (special) =>\n                special.type === 'selection' &&\n                special.name === 'bag-disabled',\n            ),\n        },\n        role.team,\n      ],on:{\"click\":function($event){role.selected =\n          role.special &&\n          role.special.some(\n            (special) =>\n              special.type === 'selection' && special.name === 'bag-disabled',\n          )\n            ? 0\n            : role.selected\n              ? 0\n              : 1}}},[_c('Token',{attrs:{\"role\":role}}),(role.setup)?_c('font-awesome-icon',{attrs:{\"icon\":\"triangle-exclamation\"}}):_vm._e(),(_vm.allowMultiple)?_c('div',{staticClass:\"buttons\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-minus\"},on:{\"click\":function($event){$event.stopPropagation();role.selected--}}}),_c('span',[_vm._v(_vm._s(role.selected > 1 ? \"x\" + role.selected : \"\"))]),_c('font-awesome-icon',{attrs:{\"icon\":\"circle-plus\"},on:{\"click\":function($event){$event.stopPropagation();role.selected++}}})],1):_vm._e()],1)})],2)}),(_vm.hasSelectedSetupRoles)?_c('div',{staticClass:\"warning\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"triangle-exclamation\"}}),_c('span',[_vm._v(\" Warning! There are characters selected that modify the game setup. \")])],1):_vm._e(),_c('label',{staticClass:\"multiple\",class:{ checked: _vm.allowMultiple }},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.allowMultiple ? 'square-check' : 'square'}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.allowMultiple),expression:\"allowMultiple\"}],attrs:{\"type\":\"checkbox\",\"name\":\"allow-multiple\"},domProps:{\"checked\":Array.isArray(_vm.allowMultiple)?_vm._i(_vm.allowMultiple,null)>-1:(_vm.allowMultiple)},on:{\"change\":function($event){var $$a=_vm.allowMultiple,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.allowMultiple=$$a.concat([$$v]))}else{$$i>-1&&(_vm.allowMultiple=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.allowMultiple=$$c}}}}),_vm._v(\" Allow Duplicate Characters \")],1),_c('div',{staticClass:\"button-group\"},[_c('div',{staticClass:\"button\",class:{\n        disabled: _vm.selectedRoles !== _vm.nonTravelers || !_vm.selectedRoles,\n      },on:{\"click\":_vm.assignRoles}},[_c('font-awesome-icon',{attrs:{\"icon\":\"people-arrows\"}}),_vm._v(\" Assign \"+_vm._s(_vm.selectedRoles)+\" Characters Randomly \")],1),_c('div',{staticClass:\"button\",on:{\"click\":_vm.shuffleRoles}},[_c('font-awesome-icon',{attrs:{\"icon\":\"shuffle\"}}),_vm._v(\" Shuffle Characters \")],1)])],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    class=\"roles\"\n    v-if=\"modals.roles && nonTravelers >= 5\"\n    @close=\"toggleModal('roles')\"\n  >\n    <font-awesome-icon\n      @click=\"resetRoles\"\n      icon=\"trash-can\"\n      class=\"clear\"\n      title=\"Clear Selections\"\n    />\n    <h3>Select Characters for {{ nonTravelers }} Players:</h3>\n    <ul class=\"tokens\" v-for=\"(teamRoles, team) in roleSelection\" :key=\"team\">\n      <li class=\"count\" :class=\"[team]\">\n        {{ teamRoles.reduce((a, { selected }) => a + selected, 0) }} /\n        {{ game[nonTravelers - 5][team] }}\n      </li>\n      <li\n        v-for=\"role in teamRoles\"\n        :class=\"[\n          {\n            selected: role.selected,\n            disabled:\n              role.special &&\n              role.special.some(\n                (special) =>\n                  special.type === 'selection' &&\n                  special.name === 'bag-disabled',\n              ),\n          },\n          role.team,\n        ]\"\n        :key=\"role.id\"\n        @click=\"\n          role.selected =\n            role.special &&\n            role.special.some(\n              (special) =>\n                special.type === 'selection' && special.name === 'bag-disabled',\n            )\n              ? 0\n              : role.selected\n                ? 0\n                : 1\n        \"\n      >\n        <Token :role=\"role\" />\n        <font-awesome-icon icon=\"triangle-exclamation\" v-if=\"role.setup\" />\n        <div class=\"buttons\" v-if=\"allowMultiple\">\n          <font-awesome-icon\n            icon=\"circle-minus\"\n            @click.stop=\"role.selected--\"\n          />\n          <span>{{ role.selected > 1 ? \"x\" + role.selected : \"\" }}</span>\n          <font-awesome-icon icon=\"circle-plus\" @click.stop=\"role.selected++\" />\n        </div>\n      </li>\n    </ul>\n    <div class=\"warning\" v-if=\"hasSelectedSetupRoles\">\n      <font-awesome-icon icon=\"triangle-exclamation\" />\n      <span>\n        Warning! There are characters selected that modify the game setup.\n      </span>\n    </div>\n    <label class=\"multiple\" :class=\"{ checked: allowMultiple }\">\n      <font-awesome-icon :icon=\"allowMultiple ? 'square-check' : 'square'\" />\n      <input type=\"checkbox\" name=\"allow-multiple\" v-model=\"allowMultiple\" />\n      Allow Duplicate Characters\n    </label>\n    <div class=\"button-group\">\n      <div\n        class=\"button\"\n        @click=\"assignRoles\"\n        :class=\"{\n          disabled: selectedRoles !== nonTravelers || !selectedRoles,\n        }\"\n      >\n        <font-awesome-icon icon=\"people-arrows\" />\n        Assign {{ selectedRoles }} Characters Randomly\n      </div>\n      <div class=\"button\" @click=\"shuffleRoles\">\n        <font-awesome-icon icon=\"shuffle\" />\n        Shuffle Characters\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport gameJSON from \"./../../game\";\nimport Token from \"./../Token\";\nimport { mapGetters, mapMutations, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Token,\n    Modal,\n  },\n  data: function () {\n    return {\n      roleSelection: {},\n      game: gameJSON,\n      allowMultiple: false,\n    };\n  },\n  computed: {\n    selectedRoles: function () {\n      return Object.values(this.roleSelection)\n        .map((roles) => roles.reduce((a, { selected }) => a + selected, 0))\n        .reduce((a, b) => a + b, 0);\n    },\n    hasSelectedSetupRoles: function () {\n      return Object.values(this.roleSelection).some((roles) =>\n        roles.some((role) => role.selected && role.setup),\n      );\n    },\n    ...mapState([\"roles\", \"modals\"]),\n    ...mapState(\"players\", [\"players\"]),\n    ...mapGetters({ nonTravelers: \"players/nonTravelers\" }),\n  },\n  methods: {\n    resetRoles() {\n      this.roleSelection = {};\n      this.roles.forEach((role) => {\n        if (!this.roleSelection[role.team]) {\n          this.$set(this.roleSelection, role.team, []);\n        }\n        this.roleSelection[role.team].push(role);\n        this.$set(role, \"selected\", 0);\n      });\n      delete this.roleSelection[\"traveler\"];\n    },\n    shuffleRoles() {\n      this.roleSelection = {};\n      this.roles.forEach((role) => {\n        if (!this.roleSelection[role.team]) {\n          this.$set(this.roleSelection, role.team, []);\n        }\n        this.roleSelection[role.team].push(role);\n        let currentIndex = this.roleSelection[role.team].length,\n          randomIndex;\n        while (currentIndex > 0) {\n          randomIndex = Math.floor(Math.random() * currentIndex);\n          currentIndex--;\n          [\n            this.roleSelection[role.team][currentIndex],\n            this.roleSelection[role.team][randomIndex],\n          ] = [\n            this.roleSelection[role.team][randomIndex],\n            this.roleSelection[role.team][currentIndex],\n          ];\n        }\n      });\n      delete this.roleSelection[\"traveler\"];\n    },\n    assignRoles() {\n      if (this.selectedRoles === this.nonTravelers && this.selectedRoles) {\n        // generate list of selected roles and randomize it\n        const roles = Object.values(this.roleSelection)\n          .map((roles) =>\n            roles\n              // duplicate roles selected more than once and filter unselected\n              .reduce((a, r) => [...a, ...Array(r.selected).fill(r)], []),\n          )\n          // flatten into a single array\n          .reduce((a, b) => [...a, ...b], [])\n          .map((a) => [Math.random(), a])\n          .sort((a, b) => a[0] - b[0])\n          .map((a) => a[1]);\n        this.players.forEach((player) => {\n          if (player.role.team !== \"traveler\" && roles.length) {\n            const value = roles.pop();\n            this.$store.commit(\"players/update\", {\n              player,\n              property: \"role\",\n              value,\n            });\n          }\n        });\n        this.$store.commit(\"toggleModal\", \"roles\");\n      }\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n  mounted: function () {\n    if (!Object.keys(this.roleSelection).length) {\n      this.resetRoles();\n    }\n  },\n  watch: {\n    roles() {\n      this.resetRoles();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../vars.scss\";\n\n.clear {\n  position: absolute;\n  left: 25px;\n  top: 20px;\n  cursor: pointer;\n  &:hover {\n    color: $gold;\n  }\n}\n\nh3 {\n  margin: 0 40px;\n}\n\nul.tokens {\n  padding-left: 5%;\n  li {\n    border-radius: 50%;\n    width: 5vw;\n    margin: 5px;\n    transition: all 250ms;\n    font-family: \"Goudy StM\", sans-serif;\n    &.count {\n      &.townsfolk {\n        box-shadow:\n          0 0 10px $townsfolk,\n          0 0 10px $townsfolk;\n      }\n      &.outsider {\n        box-shadow:\n          0 0 10px $outsider,\n          0 0 10px $outsider;\n      }\n      &.minion {\n        box-shadow:\n          0 0 10px $minion,\n          0 0 10px $minion;\n      }\n      &.demon {\n        box-shadow:\n          0 0 10px $demon,\n          0 0 10px $demon;\n      }\n    }\n    &.disabled {\n      filter: grayscale(1);\n    }\n    &.selected {\n      &.townsfolk {\n        box-shadow:\n          0 0 8px $townsfolk,\n          0 0 8px $townsfolk,\n          0 0 8px $townsfolk,\n          0 0 8px $townsfolk,\n          0 0 8px $townsfolk,\n          0 0 8px $townsfolk;\n      }\n      &.outsider {\n        box-shadow:\n          0 0 8px $outsider,\n          0 0 8px $outsider,\n          0 0 8px $outsider,\n          0 0 8px $outsider,\n          0 0 8px $outsider,\n          0 0 8px $outsider;\n      }\n      &.minion {\n        box-shadow:\n          0 0 8px $minion,\n          0 0 8px $minion,\n          0 0 8px $minion,\n          0 0 8px $minion,\n          0 0 8px $minion,\n          0 0 8px $minion;\n      }\n      &.demon {\n        box-shadow:\n          0 0 8px $demon,\n          0 0 8px $demon,\n          0 0 8px $demon,\n          0 0 8px $demon,\n          0 0 8px $demon,\n          0 0 8px $demon;\n      }\n      .buttons {\n        display: flex;\n      }\n      .fa-triangle-exclamation {\n        display: block;\n      }\n    }\n    &:has(.token:hover) {\n      transform: scale(1.2);\n      z-index: 10;\n    }\n    .token {\n      border: 3px solid black;\n    }\n    .fa-triangle-exclamation {\n      position: absolute;\n      color: red;\n      filter: drop-shadow(0 0 3px black) drop-shadow(0 0 3px black);\n      top: 2px;\n      right: -2px;\n      font-size: 125%;\n      display: none;\n    }\n    .buttons {\n      display: none;\n      position: absolute;\n      top: 95%;\n      text-align: center;\n      font-family: \"Goudy StM\", sans-serif;\n      width: 100%;\n      z-index: 30;\n      font-weight: bold;\n      filter: drop-shadow(0 0 5px rgba(0, 0, 0, 1));\n      span {\n        flex-grow: 1;\n      }\n      svg {\n        opacity: 0.25;\n        cursor: pointer;\n        &:hover {\n          opacity: 1;\n          color: $gold;\n        }\n      }\n    }\n  }\n  .count {\n    opacity: 1;\n    position: absolute;\n    left: 0;\n    font-weight: bold;\n    font-size: 75%;\n    width: 5%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &:after {\n      content: \" \";\n      display: block;\n      padding-top: 100%;\n    }\n    &.townsfolk {\n      color: $townsfolk;\n    }\n    &.outsider {\n      color: $outsider;\n    }\n    &.minion {\n      color: $minion;\n    }\n    &.demon {\n      color: $demon;\n    }\n  }\n}\n\n.roles .modal {\n  max-width: 45%;\n  .multiple {\n    display: block;\n    text-align: center;\n    font-family: \"Goudy StM\", sans-serif;\n    cursor: pointer;\n    margin-top: 10px;\n    &.checked,\n    &:hover {\n      color: $gold;\n    }\n    &.checked {\n      margin-top: 10px;\n    }\n    svg {\n      margin-right: 5px;\n    }\n    input {\n      display: none;\n    }\n  }\n\n  .warning {\n    font-family: \"Goudy StM\", sans-serif;\n    color: red;\n    position: absolute;\n    bottom: 20px;\n    right: 20px;\n    z-index: 10;\n    svg {\n      font-size: 125%;\n      vertical-align: middle;\n    }\n    span {\n      opacity: 0;\n      display: block;\n      text-align: center;\n      position: absolute;\n      right: -10px;\n      bottom: 40px;\n      width: 300px;\n      font-size: 80%;\n      background: rgba(0, 0, 0, 0.6);\n      padding: 5px;\n      border-radius: 10px;\n      border: 2px solid black;\n      transition: opacity 250ms ease-in-out;\n    }\n    svg:hover + span {\n      opacity: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RolesModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RolesModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RolesModal.vue?vue&type=template&id=00bbf181&scoped=true\"\nimport script from \"./RolesModal.vue?vue&type=script&lang=js\"\nexport * from \"./RolesModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./RolesModal.vue?vue&type=style&index=0&id=00bbf181&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00bbf181\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.edition)?_c('Modal',{staticClass:\"editions\",on:{\"close\":function($event){return _vm.toggleModal('edition')}}},[(!_vm.isCustom)?_c('div',[_c('h3',[_vm._v(\"Select an Edition:\")]),_c('ul',{staticClass:\"editions\"},[_vm._l((_vm.editions),function(edition){return _c('li',{key:edition.id,staticClass:\"edition\",class:['edition-' + edition.id],style:({\n          backgroundImage: `url(${require(\n            '../../assets/editions/' + edition.id + '.webp',\n          )})`,\n        }),on:{\"click\":function($event){return _vm.setBaseEdition(edition)}}},[_vm._v(\" \"+_vm._s(edition.name)+\" \")])}),_c('li',{staticClass:\"edition edition-custom\",style:({\n          backgroundImage: `url(${require('../../assets/editions/custom.webp')})`,\n        }),on:{\"click\":function($event){_vm.isCustom = true}}},[_vm._v(\" Custom Script \")])],2)]):_c('div',{staticClass:\"custom\"},[_c('h3',[_vm._v(\"Load Custom Script / Characters\")]),_vm._v(\" To play with a custom script, you need to select the characters you want to play\"),_c('br'),_vm._v(\" with in the official \"),_c('a',{attrs:{\"href\":\"https://script.bloodontheclocktower.com/\",\"target\":\"_blank\"}},[_vm._v(\"Script Tool\")]),_vm._v(\" and then upload the generated JSON here.\"),_c('br'),_c('br'),_vm._v(\" To play with custom characters, please read \"),_c('a',{attrs:{\"href\":\"https://github.com/bra1n/townsquare#custom-characters\",\"target\":\"_blank\"}},[_vm._v(\"the documentation\")]),_vm._v(\" on how to write a custom\"),_c('br'),_vm._v(\" character definition file. \"),_c('b',[_vm._v(\"Only load custom JSON files from sources that you trust!\")]),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\",\"accept\":\"application/json\"},on:{\"change\":_vm.handleUpload}}),_c('div',{staticClass:\"button-group\"},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.openUpload}},[_c('font-awesome-icon',{attrs:{\"icon\":\"file-arrow-up\"}}),_vm._v(\" Upload JSON \")],1),_c('div',{staticClass:\"button\",on:{\"click\":_vm.promptURL}},[_c('font-awesome-icon',{attrs:{\"icon\":\"link\"}}),_vm._v(\" Enter URL \")],1),_c('div',{staticClass:\"button\",on:{\"click\":_vm.readFromClipboard}},[_c('font-awesome-icon',{attrs:{\"icon\":\"clipboard\"}}),_vm._v(\" Use JSON from Clipboard \")],1),_c('div',{staticClass:\"button\",on:{\"click\":function($event){_vm.isCustom = false}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"rotate-left\"}}),_vm._v(\" Back \")],1)])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal class=\"editions\" v-if=\"modals.edition\" @close=\"toggleModal('edition')\">\n    <div v-if=\"!isCustom\">\n      <h3>Select an Edition:</h3>\n      <ul class=\"editions\">\n        <li\n          v-for=\"edition in editions\"\n          class=\"edition\"\n          :class=\"['edition-' + edition.id]\"\n          :style=\"{\n            backgroundImage: `url(${require(\n              '../../assets/editions/' + edition.id + '.webp',\n            )})`,\n          }\"\n          :key=\"edition.id\"\n          @click=\"setBaseEdition(edition)\"\n        >\n          {{ edition.name }}\n        </li>\n        <li\n          class=\"edition edition-custom\"\n          @click=\"isCustom = true\"\n          :style=\"{\n            backgroundImage: `url(${require('../../assets/editions/custom.webp')})`,\n          }\"\n        >\n          Custom Script\n        </li>\n      </ul>\n    </div>\n    <div class=\"custom\" v-else>\n      <h3>Load Custom Script / Characters</h3>\n      To play with a custom script, you need to select the characters you want\n      to play<br />\n      with in the official\n      <a href=\"https://script.bloodontheclocktower.com/\" target=\"_blank\"\n        >Script Tool</a\n      >\n      and then upload the generated JSON here.<br />\n      <br />\n      To play with custom characters, please read\n      <a\n        href=\"https://github.com/bra1n/townsquare#custom-characters\"\n        target=\"_blank\"\n        >the documentation</a\n      >\n      on how to write a custom<br />\n      character definition file.\n      <b>Only load custom JSON files from sources that you trust!</b>\n      <input\n        type=\"file\"\n        ref=\"upload\"\n        accept=\"application/json\"\n        @change=\"handleUpload\"\n      />\n      <div class=\"button-group\">\n        <div class=\"button\" @click=\"openUpload\">\n          <font-awesome-icon icon=\"file-arrow-up\" /> Upload JSON\n        </div>\n        <div class=\"button\" @click=\"promptURL\">\n          <font-awesome-icon icon=\"link\" /> Enter URL\n        </div>\n        <div class=\"button\" @click=\"readFromClipboard\">\n          <font-awesome-icon icon=\"clipboard\" /> Use JSON from Clipboard\n        </div>\n        <div class=\"button\" @click=\"isCustom = false\">\n          <font-awesome-icon icon=\"rotate-left\" /> Back\n        </div>\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport editionJSON from \"../../editions\";\nimport { mapMutations, mapState } from \"vuex\";\nimport Modal from \"./Modal\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  data: function () {\n    return {\n      editions: editionJSON,\n      isCustom: false,\n      scripts: [],\n    };\n  },\n  computed: mapState([\"modals\"]),\n  methods: {\n    openUpload() {\n      this.$refs.upload.click();\n    },\n    handleUpload() {\n      const file = this.$refs.upload.files[0];\n      if (file && file.size) {\n        const reader = new FileReader();\n        reader.addEventListener(\"load\", () => {\n          try {\n            const roles = JSON.parse(reader.result);\n            this.parseRoles(roles);\n          } catch (e) {\n            console.log(e);\n            alert(\"Error reading custom script: \" + e.message);\n          }\n          this.$refs.upload.value = \"\";\n        });\n        reader.readAsText(file);\n      }\n    },\n    promptURL() {\n      const url = prompt(\"Enter URL to a custom-script.json file\");\n      if (url) {\n        this.handleURL(url);\n      }\n    },\n    async handleURL(url) {\n      const res = await fetch(url);\n      if (res && res.json) {\n        try {\n          const script = await res.json();\n          this.parseRoles(script);\n        } catch (e) {\n          console.log(e);\n          alert(\"Error loading custom script: \" + e.message);\n        }\n      }\n    },\n    async readFromClipboard() {\n      const text = await navigator.clipboard.readText();\n      try {\n        const roles = JSON.parse(text);\n        this.parseRoles(roles);\n      } catch (e) {\n        console.log(e);\n        alert(\"Error reading custom script: \" + e.message);\n      }\n    },\n    setBaseEdition(edition) {\n      this.$store.commit(\"players/setFabled\", {});\n      this.setEdition(edition);\n    },\n    parseRoles(roles) {\n      if (!roles || !roles.length) return;\n      roles = roles.map((role) =>\n        typeof role === \"string\" ? { id: role } : role,\n      );\n      const metaIndex = roles.findIndex(({ id }) => id === \"_meta\");\n      let meta = {};\n      if (metaIndex > -1) {\n        meta = roles.splice(metaIndex, 1).pop();\n      }\n      this.$store.commit(\"setCustomRoles\", roles);\n      this.$store.commit(\n        \"setEdition\",\n        Object.assign({}, meta, { id: \"custom\" }),\n      );\n      // check for fabled and set those too, if present\n      const fabled = [];\n      roles.forEach((role) => {\n        if (this.$store.state.fabled.has(role.id || role)) {\n          fabled.push(this.$store.state.fabled.get(role.id || role));\n        }\n      });\n      const jinxed = [];\n      this.$store.state.roles.forEach((role) => {\n        if (this.$store.state.jinxes.get(role.id)) {\n          this.$store.state.jinxes.get(role.id).forEach((reason, second) => {\n            if (this.$store.state.roles.get(second)) {\n              jinxed.push({\n                first: role,\n                second: this.$store.state.roles.get(second),\n                reason,\n              });\n            }\n          });\n        }\n      });\n      // if jinxes or homebrew are present, the djinn and bootlegger are added by default\n      if (\n        jinxed.length &&\n        !fabled.includes(this.$store.state.fabled.get(\"djinn\"))\n      ) {\n        fabled.push(this.$store.state.fabled.get(\"djinn\"));\n      }\n      this.$store.state.roles.forEach((role) => {\n        if (\n          role.isCustom &&\n          !fabled.includes(this.$store.state.fabled.get(\"bootlegger\"))\n        ) {\n          fabled.push(this.$store.state.fabled.get(\"bootlegger\"));\n        }\n      });\n      this.$store.commit(\"players/setFabled\", { fabled });\n      this.isCustom = false;\n    },\n    ...mapMutations([\"toggleModal\", \"setEdition\"]),\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\nul.editions .edition {\n  font-family:\n    Goudy StM,\n    sans-serif;\n  text-align: center;\n  padding-top: 22%;\n  background-position: center center;\n  background-size: 65% auto;\n  background-repeat: no-repeat;\n  width: 30%;\n  margin: 5px;\n  font-size: 120%;\n  text-shadow:\n    -1px -1px 0 #000,\n    1px -1px 0 #000,\n    -1px 1px 0 #000,\n    1px 1px 0 #000,\n    0 0 5px rgba(0, 0, 0, 0.75);\n  cursor: pointer;\n  &:hover {\n    color: #ffb300;\n  }\n}\n\n.custom {\n  text-align: center;\n  font-family: \"Goudy StM\", sans-serif;\n  input[type=\"file\"] {\n    display: none;\n  }\n  .scripts {\n    list-style-type: disc;\n    font-size: 120%;\n    cursor: pointer;\n    display: block;\n    width: 50%;\n    text-align: left;\n    margin: 10px auto;\n    li:hover {\n      color: #ffb300;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditionModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EditionModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditionModal.vue?vue&type=template&id=6821350b&scoped=true\"\nimport script from \"./EditionModal.vue?vue&type=script&lang=js\"\nexport * from \"./EditionModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditionModal.vue?vue&type=style&index=0&id=6821350b&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6821350b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"intro\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../assets/intro-icon.webp\"),\"alt\":\"\"}}),_c('div',[_vm._v(\" Welcome to the (unofficial) \"),_c('b',[_vm._v(\"Virtual Town Square and Grimoire\")]),_vm._v(\" for Blood on the Clocktower! Please add more players through the \"),_c('span',{staticClass:\"button\",on:{\"click\":_vm.toggleMenu}},[_c('font-awesome-icon',{attrs:{\"icon\":\"gear\"}}),_vm._v(\" Menu \")],1),_vm._v(\" on the top right or by pressing \"),_c('b',[_vm._v(\"[A]\")]),_vm._v(\". You can also join a game session by pressing \"),_c('b',[_vm._v(\"[J]\")]),_vm._v(\".\"),_c('br'),_c('div',{staticClass:\"footer\"},[_vm._v(\" This project is not affiliated with The Pandemonium Institute. \\\"Blood on the Clocktower\\\" is a trademark of Steven Medway and The Pandemonium Institute. \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"intro\">\n    <img src=\"../assets/intro-icon.webp\" alt=\"\" class=\"logo\" />\n    <div>\n      Welcome to the (unofficial)\n      <b>Virtual Town Square and Grimoire</b> for Blood on the Clocktower!\n      Please add more players through the\n      <span class=\"button\" @click=\"toggleMenu\">\n        <font-awesome-icon icon=\"gear\" /> Menu\n      </span>\n      on the top right or by pressing <b>[A]</b>. You can also join a game\n      session by pressing <b>[J]</b>.<br />\n      <div class=\"footer\">\n        This project is not affiliated with The Pandemonium Institute. \"Blood on\n        the Clocktower\" is a trademark of Steven Medway and The Pandemonium\n        Institute.\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      language: window.navigator.userLanguage || window.navigator.language,\n    };\n  },\n  methods: mapMutations([\"toggleMenu\"]),\n};\n</script>\n\n<style scoped lang=\"scss\">\n// Intro\n.intro {\n  text-align: center;\n  width: 50%;\n  font-size: 120%;\n  position: absolute;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  border: 3px solid black;\n  border-radius: 10px;\n  z-index: 3;\n  display: flex;\n  justify-content: center;\n  svg {\n    vertical-align: middle;\n  }\n\n  img.logo {\n    position: absolute;\n    bottom: 100%;\n    width: 25vh;\n    margin-bottom: 2vh;\n    max-width: 256px;\n    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));\n  }\n  .footer {\n    font-size: 60%;\n    opacity: 0.75;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Intro.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Intro.vue?vue&type=template&id=2ea5c555&scoped=true\"\nimport script from \"./Intro.vue?vue&type=script&lang=js\"\nexport * from \"./Intro.vue?vue&type=script&lang=js\"\nimport style0 from \"./Intro.vue?vue&type=style&index=0&id=2ea5c555&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ea5c555\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.reference && _vm.roles.size)?_c('Modal',{staticClass:\"characters\",on:{\"close\":function($event){return _vm.toggleModal('reference')}}},[_c('font-awesome-icon',{staticClass:\"toggle\",attrs:{\"icon\":\"cloud-moon\",\"title\":\"Show Night Order\"},on:{\"click\":function($event){return _vm.toggleModal('nightOrder')}}}),_c('h3',[_vm._v(\" Character Reference  \"+_vm._s(_vm.edition.name || \"Custom Script\")+\" \")]),_vm._l((_vm.rolesGrouped),function(teamRoles,team){return _c('div',{key:team,class:['team', team]},[_c('aside',[_c('h4',[_vm._v(\" \"+_vm._s(team === \"outsider\" ? \"outsiders\" : team === \"minion\" ? \"minions\" : team === \"demon\" ? \"demons\" : team)+\" \")])]),_c('ul',[_vm._l((teamRoles),function(role){return _c('li',{key:role.id,class:[team]},[(role.id)?_c('span',{staticClass:\"icon\",style:({\n            backgroundImage: `url(${\n              role.image && _vm.grimoire.isImageOptIn\n                ? Array.isArray(role.image)\n                  ? role.image[0]\n                  : role.image\n                : require(\n                    '../../assets/icons/' +\n                      (role.imageAlt || role.id) +\n                      (role.team === 'townsfolk' || role.team === 'outsider'\n                        ? '_g'\n                        : role.team === 'minion' || role.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          })}):_vm._e(),_c('div',{staticClass:\"role\"},[(Object.keys(_vm.playersByRole).length)?_c('span',{staticClass:\"player\"},[_vm._v(_vm._s(_vm.playersByRole[role.id] ? _vm.playersByRole[role.id].join(\", \") : \"\"))]):_vm._e(),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(role.name))]),_c('span',{staticClass:\"ability\"},[_vm._v(_vm._s(role.ability))])])])}),_c('li',{class:[team]}),_c('li',{class:[team]})],2)])}),(_vm.jinxed.length)?_c('div',{staticClass:\"team jinxed\"},[_c('aside',[_c('h4',[_vm._v(\"Jinxed\")])]),_c('ul',[_vm._l((_vm.jinxed),function(jinx,index){return _c('li',{key:index},[_c('span',{staticClass:\"icon\",style:({\n            backgroundImage: `url(${require(\n              '../../assets/icons/' +\n                jinx.first.id +\n                (jinx.first.team === 'townsfolk' ||\n                jinx.first.team === 'outsider'\n                  ? '_g'\n                  : jinx.first.team === 'minion' ||\n                      jinx.first.team === 'demon'\n                    ? '_e'\n                    : '') +\n                '.webp',\n            )})`,\n          })}),_c('span',{staticClass:\"icon\",style:({\n            backgroundImage: `url(${require(\n              '../../assets/icons/' +\n                jinx.second.id +\n                (jinx.second.team === 'townsfolk' ||\n                jinx.second.team === 'outsider'\n                  ? '_g'\n                  : jinx.second.team === 'minion' ||\n                      jinx.second.team === 'demon'\n                    ? '_e'\n                    : '') +\n                '.webp',\n            )})`,\n          })}),_c('div',{staticClass:\"role\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(jinx.first.name)+\" & \"+_vm._s(jinx.second.name))]),_c('span',{staticClass:\"ability\"},[_vm._v(_vm._s(jinx.reason))])])])}),_c('li'),_c('li')],2)]):_vm._e()],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    class=\"characters\"\n    @close=\"toggleModal('reference')\"\n    v-if=\"modals.reference && roles.size\"\n  >\n    <font-awesome-icon\n      @click=\"toggleModal('nightOrder')\"\n      icon=\"cloud-moon\"\n      class=\"toggle\"\n      title=\"Show Night Order\"\n    />\n    <h3>\n      Character Reference \n      {{ edition.name || \"Custom Script\" }}\n    </h3>\n    <div\n      v-for=\"(teamRoles, team) in rolesGrouped\"\n      :key=\"team\"\n      :class=\"['team', team]\"\n    >\n      <aside>\n        <h4>\n          {{\n            team === \"outsider\"\n              ? \"outsiders\"\n              : team === \"minion\"\n                ? \"minions\"\n                : team === \"demon\"\n                  ? \"demons\"\n                  : team\n          }}\n        </h4>\n      </aside>\n      <ul>\n        <li v-for=\"role in teamRoles\" :class=\"[team]\" :key=\"role.id\">\n          <span\n            class=\"icon\"\n            v-if=\"role.id\"\n            :style=\"{\n              backgroundImage: `url(${\n                role.image && grimoire.isImageOptIn\n                  ? Array.isArray(role.image)\n                    ? role.image[0]\n                    : role.image\n                  : require(\n                      '../../assets/icons/' +\n                        (role.imageAlt || role.id) +\n                        (role.team === 'townsfolk' || role.team === 'outsider'\n                          ? '_g'\n                          : role.team === 'minion' || role.team === 'demon'\n                            ? '_e'\n                            : '') +\n                        '.webp',\n                    )\n              })`,\n            }\"\n          ></span>\n          <div class=\"role\">\n            <span class=\"player\" v-if=\"Object.keys(playersByRole).length\">{{\n              playersByRole[role.id] ? playersByRole[role.id].join(\", \") : \"\"\n            }}</span>\n            <span class=\"name\">{{ role.name }}</span>\n            <span class=\"ability\">{{ role.ability }}</span>\n          </div>\n        </li>\n        <li :class=\"[team]\"></li>\n        <li :class=\"[team]\"></li>\n      </ul>\n    </div>\n\n    <div class=\"team jinxed\" v-if=\"jinxed.length\">\n      <aside>\n        <h4>Jinxed</h4>\n      </aside>\n      <ul>\n        <li v-for=\"(jinx, index) in jinxed\" :key=\"index\">\n          <span\n            class=\"icon\"\n            :style=\"{\n              backgroundImage: `url(${require(\n                '../../assets/icons/' +\n                  jinx.first.id +\n                  (jinx.first.team === 'townsfolk' ||\n                  jinx.first.team === 'outsider'\n                    ? '_g'\n                    : jinx.first.team === 'minion' ||\n                        jinx.first.team === 'demon'\n                      ? '_e'\n                      : '') +\n                  '.webp',\n              )})`,\n            }\"\n          ></span>\n          <span\n            class=\"icon\"\n            :style=\"{\n              backgroundImage: `url(${require(\n                '../../assets/icons/' +\n                  jinx.second.id +\n                  (jinx.second.team === 'townsfolk' ||\n                  jinx.second.team === 'outsider'\n                    ? '_g'\n                    : jinx.second.team === 'minion' ||\n                        jinx.second.team === 'demon'\n                      ? '_e'\n                      : '') +\n                  '.webp',\n              )})`,\n            }\"\n          ></span>\n          <div class=\"role\">\n            <span class=\"name\"\n              >{{ jinx.first.name }} & {{ jinx.second.name }}</span\n            >\n            <span class=\"ability\">{{ jinx.reason }}</span>\n          </div>\n        </li>\n        <li></li>\n        <li></li>\n      </ul>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport { mapMutations, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  computed: {\n    /**\n     * Return a list of jinxes in the form of role IDs and a reason\n     * @returns {*[]} [{first, second, reason}]\n     */\n    jinxed: function () {\n      const jinxed = [];\n      this.roles.forEach((role) => {\n        if (this.jinxes.get(role.id)) {\n          this.jinxes.get(role.id).forEach((reason, second) => {\n            if (this.roles.get(second)) {\n              jinxed.push({\n                first: role,\n                second: this.roles.get(second),\n                reason,\n              });\n            }\n          });\n        }\n      });\n      return jinxed;\n    },\n    rolesGrouped: function () {\n      const rolesGrouped = {};\n      this.roles.forEach((role) => {\n        if (!rolesGrouped[role.team]) {\n          rolesGrouped[role.team] = [];\n        }\n        rolesGrouped[role.team].push(role);\n      });\n      delete rolesGrouped[\"traveler\"];\n      return rolesGrouped;\n    },\n    playersByRole: function () {\n      const players = {};\n      this.players.forEach(({ name, role }) => {\n        if (role && role.id && role.team !== \"traveler\") {\n          if (!players[role.id]) {\n            players[role.id] = [];\n          }\n          players[role.id].push(name);\n        }\n      });\n      return players;\n    },\n    ...mapState([\"roles\", \"modals\", \"edition\", \"grimoire\", \"jinxes\"]),\n    ...mapState(\"players\", [\"players\"]),\n  },\n  methods: {\n    ...mapMutations([\"toggleModal\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../vars.scss\";\n\n.toggle {\n  position: absolute;\n  left: 25px;\n  top: 18px;\n  cursor: pointer;\n  &:hover {\n    color: $gold;\n  }\n}\n\nh3 {\n  margin: 0 40px;\n  text-transform: uppercase;\n  font-family: \"Dumbledor 1\", serif;\n  font-size: 110%;\n}\n\n.townsfolk {\n  .name {\n    color: $townsfolk;\n  }\n  aside {\n    background: linear-gradient(-90deg, $townsfolk, transparent);\n  }\n}\n.outsider {\n  .name {\n    color: $outsider;\n  }\n  aside {\n    background: linear-gradient(-90deg, $outsider, transparent);\n  }\n}\n.minion {\n  .name {\n    color: $minion;\n  }\n  aside {\n    background: linear-gradient(-90deg, $minion, transparent);\n  }\n}\n.demon {\n  .name {\n    color: $demon;\n  }\n  aside {\n    background: linear-gradient(-90deg, $demon, transparent);\n  }\n}\n\n.jinxed {\n  .name {\n    color: $fabled;\n  }\n  aside {\n    background: linear-gradient(-90deg, $fabled, transparent);\n  }\n}\n\n.team {\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  &:not(:last-child):after {\n    content: \" \";\n    display: block;\n    width: 25%;\n    height: 1px;\n    background: linear-gradient(90deg, #ffffffaa, transparent);\n    position: absolute;\n    left: 0;\n    bottom: 0;\n  }\n  aside {\n    width: 30px;\n    display: flex;\n    flex-grow: 0;\n    flex-shrink: 0;\n    align-items: center;\n    justify-content: center;\n    align-content: center;\n    overflow: hidden;\n    text-shadow: 0 0 4px black;\n  }\n\n  h4 {\n    text-transform: uppercase;\n    text-align: center;\n    transform: rotate(90deg);\n    transform-origin: center;\n    font-size: 65%;\n  }\n\n  &.jinxed {\n    .icon {\n      margin: 0 -5px;\n    }\n  }\n}\n\nul {\n  flex-grow: 1;\n  display: flex;\n  padding: 5px 0;\n\n  li {\n    display: flex;\n    align-items: center;\n    flex-grow: 1;\n    width: 420px;\n    .icon {\n      width: 8vh;\n      background-size: cover;\n      background-position: 0 -5px;\n      flex-shrink: 0;\n      flex-grow: 0;\n      &:after {\n        content: \" \";\n        display: block;\n        padding-top: 80%;\n      }\n    }\n    .role {\n      line-height: 80%;\n      flex-grow: 1;\n    }\n    .name {\n      font-weight: bold;\n      font-size: 75%;\n      display: block;\n    }\n    .player {\n      color: #888;\n      float: right;\n      font-size: 60%;\n    }\n    .ability {\n      font-size: 70%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReferenceModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReferenceModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ReferenceModal.vue?vue&type=template&id=7cf1ec11&scoped=true\"\nimport script from \"./ReferenceModal.vue?vue&type=script&lang=js\"\nexport * from \"./ReferenceModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ReferenceModal.vue?vue&type=style&index=0&id=7cf1ec11&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7cf1ec11\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"vote\"}},[_c('div',{staticClass:\"arrows\",style:(_vm.zoom)},[_c('span',{staticClass:\"nominator\",style:(_vm.nominatorStyle)}),_c('span',{staticClass:\"nominee\",style:(_vm.nomineeStyle)}),_c('span',{staticClass:\"counter\",style:(_vm.counterStyle)})]),_c('div',{staticClass:\"overlay\"},[_c('audio',{attrs:{\"src\":require(\"../assets/sounds/countdown.mp3\"),\"preload\":\"auto\"}}),(!_vm.session.isSpectator || _vm.session.isVoteWatchingAllowed)?[_c('em',{staticClass:\"blue\"},[_vm._v(\" \"+_vm._s(_vm.voteCount)+\" vote\"+_vm._s(_vm.voteCount !== 1 ? \"s\" : \"\")+\" \")]),_vm._v(\" in favor. \")]:_vm._e(),(_vm.nominee.role.team !== 'traveler')?_c('em',[_vm._v(\" Majority is \"+_vm._s(Math.ceil(_vm.alive / 2))+\". \")]):_c('em',[_vm._v(\"Majority is \"+_vm._s(Math.ceil(_vm.players.length / 2))+\".\")]),(!_vm.session.isSpectator)?[(\n          _vm.session.isVoteWatchingAllowed &&\n          !_vm.session.isVoteInProgress &&\n          _vm.session.lockedVote < 1\n        )?_c('div',[_vm._v(\" Time per player: \"),_c('small',[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-minus\"},on:{\"mousedown\":function($event){$event.preventDefault();return _vm.setVotingSpeed(-500)}}})],1),_vm._v(\" \"+_vm._s(_vm.session.votingSpeed / 1000)+\"s \"),_c('small',[_c('font-awesome-icon',{attrs:{\"icon\":\"circle-plus\"},on:{\"mousedown\":function($event){$event.preventDefault();return _vm.setVotingSpeed(500)}}})],1)]):_vm._e(),(_vm.secretVoteAllowed && !_vm.session.isVoteInProgress)?_c('div',{on:{\"click\":_vm.setVoteWatching}},[_c('font-awesome-icon',{attrs:{\"icon\":[\n            'fas',\n            !_vm.session.isVoteWatchingAllowed ? 'square-check' : 'square',\n          ]}}),_c('small',[_vm._v(\" Organ Grinder Secret Vote\")])],1):_vm._e(),_c('div',{staticClass:\"button-group\"},[(!_vm.session.isVoteInProgress)?_c('div',{staticClass:\"button gold\",on:{\"click\":_vm.countdown}},[_vm._v(\" Countdown \")]):_vm._e(),(!_vm.session.isVoteInProgress && _vm.session.isVoteWatchingAllowed)?_c('div',{staticClass:\"button\",on:{\"click\":_vm.start}},[_vm._v(\" \"+_vm._s(_vm.session.lockedVote ? \"Restart\" : \"Start\")+\" \")]):(_vm.session.isVoteWatchingAllowed)?[_c('div',{staticClass:\"button gold\",class:{ disabled: !_vm.session.lockedVote },on:{\"click\":_vm.pause}},[_vm._v(\" \"+_vm._s(_vm.voteTimer ? \"Pause\" : \"Resume\")+\" \")]),_c('div',{staticClass:\"button\",on:{\"click\":_vm.stop}},[_vm._v(\"Reset\")])]:_vm._e(),_c('div',{staticClass:\"button purple\",on:{\"click\":_vm.finish}},[_vm._v(\"Close\")])],2),(_vm.nominee.role.team !== 'traveler')?_c('div',{staticClass:\"button-group mark\"},[_c('div',{staticClass:\"button\",class:{\n            disabled: _vm.session.nomination[1] === _vm.session.markedPlayer,\n          },on:{\"click\":_vm.setMarked}},[_vm._v(\" Mark for execution \")]),_c('div',{staticClass:\"button\",on:{\"click\":_vm.removeMarked}},[_vm._v(\"Clear mark\")])]):_vm._e()]:(_vm.canVote)?[_c('div',{staticClass:\"button-group\"},[_c('div',{staticClass:\"button gold\",class:{ disabled: !_vm.currentVote },on:{\"click\":function($event){return _vm.vote(0)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-hand\"}}),_vm._v(\" DOWN \")],1),_c('div',{staticClass:\"button purple\",class:{ disabled: _vm.currentVote === 1 },on:{\"click\":function($event){return _vm.vote(1)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-hand\"}}),_vm._v(\" UP \")],1),(\n            _vm.player &&\n            _vm.player.hasDoubleVotes &&\n            _vm.nominee.role.team !== 'traveler'\n          )?_c('div',{staticClass:\"button purple\",class:{ disabled: _vm.currentVote === 2 },on:{\"click\":function($event){return _vm.vote(2)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-hand\"}}),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-hand\"}}),_vm._v(\" UP \")],1):_vm._e()])]:(!_vm.player)?_c('div',[_vm._v(\"Please claim a seat to vote.\")]):_vm._e()],2),_c('transition',{attrs:{\"name\":\"blur\"}},[(_vm.session.isVoteInProgress && !_vm.session.lockedVote)?_c('div',{staticClass:\"countdown\"},[_c('span',[_vm._v(\"3\")]),_c('span',[_vm._v(\"2\")]),_c('span',[_vm._v(\"1\")]),_c('span',[_vm._v(\"GO\")]),_c('audio',{attrs:{\"autoplay\":!_vm.grimoire.isMuted,\"src\":require(\"../assets/sounds/countdown.mp3\"),\"muted\":_vm.grimoire.isMuted}})]):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"vote\">\n    <div class=\"arrows\" :style=\"zoom\">\n      <span class=\"nominator\" :style=\"nominatorStyle\"></span>\n      <span class=\"nominee\" :style=\"nomineeStyle\"></span>\n      <span class=\"counter\" :style=\"counterStyle\"></span>\n    </div>\n    <div class=\"overlay\">\n      <audio src=\"../assets/sounds/countdown.mp3\" preload=\"auto\"></audio>\n      <template v-if=\"!session.isSpectator || session.isVoteWatchingAllowed\">\n        <em class=\"blue\">\n          {{ voteCount }} vote{{ voteCount !== 1 ? \"s\" : \"\" }}\n        </em>\n        in favor.\n      </template>\n      <em v-if=\"nominee.role.team !== 'traveler'\">\n        Majority is {{ Math.ceil(alive / 2) }}.\n      </em>\n      <em v-else>Majority is {{ Math.ceil(players.length / 2) }}.</em>\n\n      <template v-if=\"!session.isSpectator\">\n        <div\n          v-if=\"\n            session.isVoteWatchingAllowed &&\n            !session.isVoteInProgress &&\n            session.lockedVote < 1\n          \"\n        >\n          Time per player:\n          <small\n            ><font-awesome-icon\n              @mousedown.prevent=\"setVotingSpeed(-500)\"\n              icon=\"circle-minus\"\n          /></small>\n          {{ session.votingSpeed / 1000 }}s\n          <small\n            ><font-awesome-icon\n              @mousedown.prevent=\"setVotingSpeed(500)\"\n              icon=\"circle-plus\"\n          /></small>\n        </div>\n        <div v-if=\"secretVoteAllowed && !session.isVoteInProgress\" @click=\"setVoteWatching\">\n          <font-awesome-icon\n            :icon=\"[\n              'fas',\n              !session.isVoteWatchingAllowed ? 'square-check' : 'square',\n            ]\"\n          />\n          <small> Organ Grinder Secret Vote</small>\n        </div>\n        <div class=\"button-group\">\n          <div\n            class=\"button gold\"\n            v-if=\"!session.isVoteInProgress\"\n            @click=\"countdown\"\n          >\n            Countdown\n          </div>\n          <div\n            class=\"button\"\n            v-if=\"!session.isVoteInProgress && session.isVoteWatchingAllowed\"\n            @click=\"start\"\n          >\n            {{ session.lockedVote ? \"Restart\" : \"Start\" }}\n          </div>\n          <template v-else-if=\"session.isVoteWatchingAllowed\">\n            <div\n              class=\"button gold\"\n              :class=\"{ disabled: !session.lockedVote }\"\n              @click=\"pause\"\n            >\n              {{ voteTimer ? \"Pause\" : \"Resume\" }}\n            </div>\n            <div class=\"button\" @click=\"stop\">Reset</div>\n          </template>\n          <div class=\"button purple\" @click=\"finish\">Close</div>\n        </div>\n        <div class=\"button-group mark\" v-if=\"nominee.role.team !== 'traveler'\">\n          <div\n            class=\"button\"\n            :class=\"{\n              disabled: session.nomination[1] === session.markedPlayer,\n            }\"\n            @click=\"setMarked\"\n          >\n            Mark for execution\n          </div>\n          <div class=\"button\" @click=\"removeMarked\">Clear mark</div>\n        </div>\n      </template>\n      <template v-else-if=\"canVote\">\n        <div class=\"button-group\">\n          <div\n            class=\"button gold\"\n            @click=\"vote(0)\"\n            :class=\"{ disabled: !currentVote }\"\n          >\n            <font-awesome-icon icon=\"fa-hand\" />\n            DOWN\n          </div>\n          <div\n            class=\"button purple\"\n            @click=\"vote(1)\"\n            :class=\"{ disabled: currentVote === 1 }\"\n          >\n            <font-awesome-icon icon=\"fa-hand\" />\n            UP\n          </div>\n          <div\n            class=\"button purple\"\n            @click=\"vote(2)\"\n            v-if=\"\n              player &&\n              player.hasDoubleVotes &&\n              nominee.role.team !== 'traveler'\n            \"\n            :class=\"{ disabled: currentVote === 2 }\"\n          >\n            <font-awesome-icon icon=\"fa-hand\" />\n            <font-awesome-icon icon=\"fa-hand\" />\n            UP\n          </div>\n        </div>\n      </template>\n      <div v-else-if=\"!player\">Please claim a seat to vote.</div>\n    </div>\n    <transition name=\"blur\">\n      <div\n        class=\"countdown\"\n        v-if=\"session.isVoteInProgress && !session.lockedVote\"\n      >\n        <span>3</span>\n        <span>2</span>\n        <span>1</span>\n        <span>GO</span>\n        <audio\n          :autoplay=\"!grimoire.isMuted\"\n          src=\"../assets/sounds/countdown.mp3\"\n          :muted=\"grimoire.isMuted\"\n        ></audio>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n  computed: {\n    ...mapState(\"players\", [\"players\"]),\n    ...mapState([\"roles\", \"session\", \"grimoire\"]),\n    ...mapGetters({ alive: \"players/alive\" }),\n    nominator: function () {\n      return this.players[this.session.nomination[0]];\n    },\n    nominatorStyle: function () {\n      const players = this.players.length;\n      const nomination = this.session.nomination[0];\n      return {\n        transform: `rotate(${Math.round((nomination / players) * 360)}deg)`,\n        transitionDuration: this.session.votingSpeed - 100 + \"ms\",\n      };\n    },\n    nomineeStyle: function () {\n      const players = this.players.length;\n      const nomination = this.session.nomination[1];\n      return {\n        transform: `rotate(${Math.round((nomination / players) * 360)}deg)`,\n        transitionDuration: this.session.votingSpeed - 100 + \"ms\",\n      };\n    },\n    nominee: function () {\n      return this.players[this.session.nomination[1]];\n    },\n    counterStyle: function () {\n      const players = this.players.length;\n      const nomination = this.session.nomination[1];\n      const lock = this.session.lockedVote;\n      const rotation = (360 * (nomination + Math.min(lock, players))) / players;\n      return {\n        transform: `rotate(${Math.round(rotation)}deg)`,\n        transitionDuration: this.session.votingSpeed - 100 + \"ms\",\n      };\n    },\n    zoom: function () {\n      if (this.players.length < 7) {\n        return {\n          height: \"calc(\" + (96 - (36 + 2 * this.grimoire.zoom)) + \"vh - 75px)\",\n        };\n      } else if (this.players.length <= 10) {\n        return {\n          height: \"calc(\" + (96 - (32 + 2 * this.grimoire.zoom)) + \"vh - 75px)\",\n        };\n      } else if (this.players.length <= 15) {\n        return {\n          height: \"calc(\" + (96 - (28 + 2 * this.grimoire.zoom)) + \"vh - 75px)\",\n        };\n      } else {\n        return {\n          height: \"calc(\" + (96 - (24 + 2 * this.grimoire.zoom)) + \"vh - 75px)\",\n        };\n      }\n    },\n    player: function () {\n      return this.players.find((p) => p.id === this.session.playerId);\n    },\n    currentVote: function () {\n      const index = this.players.findIndex(\n        (p) => p.id === this.session.playerId,\n      );\n      return index >= 0 ? this.session.votes[index] : 0;\n    },\n    canVote: function () {\n      if (!this.player) return false;\n      if (this.player.isVoteless && this.nominee.role.team !== \"traveler\")\n        return false;\n      const session = this.session;\n      const players = this.players.length;\n      const index = this.players.indexOf(this.player);\n      const indexAdjusted =\n        (index - 1 + players - session.nomination[1]) % players;\n      return indexAdjusted >= session.lockedVote - 1;\n    },\n    voteCount: function () {\n      const nomination = this.session.nomination[1];\n      const votes = Array(this.players.length)\n        .fill(0)\n        .map((x, index) =>\n          this.session.votes[index] === undefined\n            ? 0\n            : this.session.votes[index],\n        );\n      const reorder = [\n        ...votes.slice(nomination + 1),\n        ...votes.slice(0, nomination + 1),\n      ];\n      return (\n        this.session.lockedVote\n          ? reorder.slice(0, this.session.lockedVote - 1)\n          : reorder\n      ).reduce((a, b) => a + b, 0);\n    },\n    secretVoteAllowed: function () {\n      return this.roles.get(\"organgrinder\");\n    },\n  },\n  data() {\n    return {\n      voteTimer: null,\n    };\n  },\n  methods: {\n    countdown() {\n      this.$store.commit(\"session/lockVote\", 0);\n      this.$store.commit(\"session/setVoteInProgress\", true);\n      this.voteTimer = setInterval(() => {\n        this.start();\n      }, 4000);\n    },\n    start() {\n      clearInterval(this.voteTimer);\n      if (this.session.isVoteWatchingAllowed) {\n        this.$store.commit(\"session/lockVote\", 1);\n        this.$store.commit(\"session/setVoteInProgress\", true);\n        this.voteTimer = setInterval(() => {\n          this.$store.commit(\"session/lockVote\");\n          if (this.session.lockedVote > this.players.length) {\n            clearInterval(this.voteTimer);\n            this.$store.commit(\"session/setVoteInProgress\", false);\n          }\n        }, this.session.votingSpeed);\n      } else {\n        this.$store.commit(\"session/lockVote\", this.players.length + 1);\n        this.$store.commit(\"session/setVoteInProgress\", false);\n      }\n    },\n    pause() {\n      if (this.voteTimer) {\n        clearInterval(this.voteTimer);\n        this.voteTimer = null;\n      } else {\n        this.voteTimer = setInterval(() => {\n          this.$store.commit(\"session/lockVote\");\n          if (this.session.lockedVote > this.players.length) {\n            clearInterval(this.voteTimer);\n            this.$store.commit(\"session/setVoteInProgress\", false);\n          }\n        }, this.session.votingSpeed);\n      }\n    },\n    stop() {\n      clearInterval(this.voteTimer);\n      this.voteTimer = null;\n      this.$store.commit(\"session/setVoteInProgress\", false);\n      this.$store.commit(\"session/lockVote\", 0);\n    },\n    finish() {\n      clearInterval(this.voteTimer);\n      this.$store.commit(\"session/addHistory\", this.players);\n      this.$store.commit(\"session/nomination\");\n    },\n    vote(vote) {\n      if (!this.canVote) return false;\n      const index = this.players.findIndex(\n        (p) => p.id === this.session.playerId,\n      );\n      if (index >= 0 && !!this.session.votes[index] !== vote) {\n        this.$store.commit(\"session/voteSync\", [index, vote]);\n      }\n    },\n    setVotingSpeed(diff) {\n      const speed = Math.round(this.session.votingSpeed + diff);\n      if (speed > 0) {\n        this.$store.commit(\"session/setVotingSpeed\", speed);\n      }\n    },\n    setVoteWatching() {\n      this.$store.commit(\n        \"session/setVoteWatchingAllowed\",\n        !this.session.isVoteWatchingAllowed,\n      );\n    },\n    setMarked() {\n      this.$store.commit(\"session/setMarkedPlayer\", this.session.nomination[1]);\n    },\n    removeMarked() {\n      this.$store.commit(\"session/setMarkedPlayer\", -1);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../vars.scss\";\n\n.overlay {\n  background: rgba(0, 0, 0, 0.75);\n  border-radius: 10px;\n  border: 3px solid black;\n  padding: 0 4px 4px;\n  font-family: \"Goudy StM\", sans-serif;\n  z-index: 20;\n  svg {\n    vertical-align: middle;\n  }\n}\n\n#vote {\n  position: absolute;\n  width: 20%;\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n  text-align: center;\n\n  .mark .button {\n    font-size: 75%;\n    margin: 0;\n  }\n\n  &:after {\n    content: \" \";\n    padding-bottom: 100%;\n    display: block;\n  }\n\n  em {\n    color: $light-purple;\n    font-style: normal;\n    font-weight: bold;\n    &.blue {\n      color: $gold;\n    }\n  }\n\n  svg:not(.fa-hand) {\n    cursor: pointer;\n    &:hover path {\n      fill: url(#light-purple);\n      stroke-width: 30px;\n      stroke: white;\n    }\n  }\n}\n\n@keyframes arrow-cw {\n  0% {\n    opacity: 0;\n    transform: rotate(-180deg);\n  }\n  100% {\n    opacity: 1;\n    transform: rotate(0deg);\n  }\n}\n\n@keyframes arrow-ccw {\n  0% {\n    opacity: 0;\n    transform: rotate(180deg);\n  }\n  100% {\n    opacity: 1;\n    transform: rotate(0deg);\n  }\n}\n\n.arrows {\n  position: absolute;\n  display: flex;\n  height: 60vh;\n  width: 10vh;\n  pointer-events: none;\n  z-index: 20;\n  span {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    transition: transform 2.9s ease-in-out;\n  }\n  span:before {\n    content: \" \";\n    width: 100%;\n    height: 100%;\n    display: block;\n    background-size: auto 100%;\n    background-repeat: no-repeat;\n    background-position: center center;\n    position: absolute;\n    filter: drop-shadow(0px 0px 3px #000);\n  }\n  .nominator:before {\n    background-image: url(\"../assets/clock-second.webp\");\n    animation: arrow-ccw 1s ease-out;\n  }\n  .nominee:before {\n    background-image: url(\"../assets/clock-hour.webp\");\n    animation: arrow-cw 1s ease-out;\n  }\n  .counter:before {\n    background-image: url(\"../assets/clock-minute.webp\");\n    animation: arrow-ccw 1s ease-out;\n  }\n}\n\n@keyframes countdown {\n  0% {\n    transform: scale(1.5);\n    opacity: 0;\n    filter: blur(20px);\n  }\n  10% {\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1);\n    filter: blur(0);\n  }\n  90% {\n    color: $gold;\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes countdown-go {\n  0% {\n    transform: scale(1.5);\n    opacity: 0;\n    filter: blur(20px);\n  }\n  10% {\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1);\n    filter: blur(0);\n  }\n  90% {\n    color: $purple;\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n.countdown {\n  display: flex;\n  position: absolute;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  font-family: \"Goudy StM\", sans-serif;\n  text-shadow: 0 0 8px #000000;\n  z-index: 20;\n  audio {\n    height: 0;\n    width: 0;\n    visibility: hidden;\n  }\n  span {\n    position: absolute;\n    font-size: 8em;\n    font-weight: bold;\n    opacity: 0;\n  }\n  span:nth-child(1) {\n    animation: countdown 1100ms normal forwards;\n  }\n  span:nth-child(2) {\n    animation: countdown 1100ms normal forwards 1000ms;\n  }\n  span:nth-child(3) {\n    animation: countdown 1100ms normal forwards 2000ms;\n  }\n  span:nth-child(4) {\n    animation: countdown-go 1100ms normal forwards 3000ms;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Vote.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Vote.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Vote.vue?vue&type=template&id=1fe138a8&scoped=true\"\nimport script from \"./Vote.vue?vue&type=script&lang=js\"\nexport * from \"./Vote.vue?vue&type=script&lang=js\"\nimport style0 from \"./Vote.vue?vue&type=style&index=0&id=1fe138a8&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fe138a8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"gradients\"}},_vm._l((_vm.gradients),function(gradient,index){return _c('svg',{key:index,attrs:{\"width\":\"0\",\"height\":\"0\"}},[_c('linearGradient',{attrs:{\"id\":gradient[0],\"x1\":\"50%\",\"y1\":\"100%\",\"x2\":\"50%\",\"y2\":\"0%\"}},[_c('stop',{style:({ 'stop-color': gradient[2], 'stop-opacity': 1 }),attrs:{\"offset\":\"0%\"}}),_c('stop',{style:({ 'stop-color': gradient[1], 'stop-opacity': 1 }),attrs:{\"offset\":\"100%\"}})],1)],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!-- SVG Gradients -->\n  <div id=\"gradients\">\n    <svg\n      width=\"0\"\n      height=\"0\"\n      v-for=\"(gradient, index) in gradients\"\n      :key=\"index\"\n    >\n      <linearGradient :id=\"gradient[0]\" x1=\"50%\" y1=\"100%\" x2=\"50%\" y2=\"0%\">\n        <stop\n          offset=\"0%\"\n          :style=\"{ 'stop-color': gradient[2], 'stop-opacity': 1 }\"\n        ></stop>\n        <stop\n          offset=\"100%\"\n          :style=\"{ 'stop-color': gradient[1], 'stop-opacity': 1 }\"\n        ></stop>\n      </linearGradient>\n    </svg>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      gradients: [\n        [\"purple\", \"#6c32be\", \"#000\"],\n        [\"purple-overlay\", \"#fff\", \"#6c32be\"],\n        [\"gold\", \"#ffb300\", \"#000\"],\n        [\"gold-overlay\", \"#fff\", \"#ffb300\"],\n        [\"default\", \"#4e4e4e\", \"#000\"],\n        [\"default-overlay\", \"#d9d9d9\", \"#bdbdbd\"],\n      ],\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nsvg {\n  position: absolute;\n  z-index: -1;\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Gradients.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Gradients.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Gradients.vue?vue&type=template&id=66348644&scoped=true\"\nimport script from \"./Gradients.vue?vue&type=script&lang=js\"\nexport * from \"./Gradients.vue?vue&type=script&lang=js\"\nimport style0 from \"./Gradients.vue?vue&type=style&index=0&id=66348644&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66348644\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.nightOrder && _vm.roles.size)?_c('Modal',{staticClass:\"night-reference\",class:{\n    isStoryteller: !_vm.session.isSpectator,\n  },on:{\"close\":function($event){return _vm.toggleModal('nightOrder')}}},[_c('font-awesome-icon',{staticClass:\"toggle\",attrs:{\"icon\":\"address-card\",\"title\":\"Show Character Reference\"},on:{\"click\":function($event){return _vm.toggleModal('reference')}}}),_c('h3',[_vm._v(\" Night Order  \"+_vm._s(_vm.edition.name || \"Custom Script\")+\" \")]),_c('div',{staticClass:\"night\"},[_c('ul',{staticClass:\"first\"},[_c('li',{staticClass:\"headline\"},[_vm._v(\"First Night\")]),_vm._l((_vm.rolesFirstNight),function(role){return _c('li',{key:role.name,class:[role.team]},[_c('span',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(role.name)+\" \"),(\n              role.players.length ||\n              _vm.storyteller.role.id === role.id ||\n              _vm.extraRoles.some((extraRole) => extraRole.id === role.id)\n            )?_c('span',{staticClass:\"player\"},[_c('br'),_c('small',[(\n                  _vm.extraRoles.some((extraRole) => extraRole.id === role.id)\n                )?[_vm._v(_vm._s(\"Extra Character\" + (role.players.length > 0 || _vm.storyteller.role.id === role.id ? \",\" : \"\")))]:_vm._e()],2),_c('small',[(_vm.storyteller.role.id === role.id)?[_vm._v(_vm._s(_vm.storyteller.name + (role.players.length > 0 ? \",\" : \"\")))]:_vm._e()],2),_vm._l((role.players),function(player,index){return _c('small',{key:index,class:{ dead: player.isDead || player.isInvisibleDead }},[(!_vm.session.isSpectator)?[_c('div',{staticClass:\"option\",on:{\"click\":function($event){return _vm.setResponded(player, role.id)}}},[_vm._v(\" \"+_vm._s(player.name)+\" \"),_c('font-awesome-icon',{attrs:{\"icon\":[\n                      'fas',\n                      !!player.hasResponded[role.id]\n                        ? 'square-check'\n                        : 'square',\n                    ]}})],1)]:_vm._e(),(_vm.session.isSpectator)?[_vm._v(_vm._s(player.name + (role.players.length > index + 1 ? \",\" : \"\"))+\" \")]:_vm._e()],2)})],2):_vm._e()]),(role.id)?_c('span',{staticClass:\"icon\",style:({\n            backgroundImage: `url(${\n              role.image && _vm.grimoire.isImageOptIn\n                ? Array.isArray(role.image)\n                  ? role.image[0]\n                  : role.image\n                : require(\n                    '../../assets/icons/' +\n                      (role.imageAlt || role.id) +\n                      (role.team === 'townsfolk' || role.team === 'outsider'\n                        ? '_g'\n                        : role.team === 'minion' || role.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          })}):_vm._e(),(role.firstNightReminder)?_c('span',{staticClass:\"reminder\",domProps:{\"innerHTML\":_vm._s(role.firstNightReminder)}}):_vm._e()])})],2),_c('ul',{staticClass:\"other\"},[_c('li',{staticClass:\"headline\"},[_vm._v(\"Other Nights\")]),_vm._l((_vm.rolesOtherNight),function(role){return _c('li',{key:role.name,class:[role.team]},[(role.id)?_c('span',{staticClass:\"icon\",style:({\n            backgroundImage: `url(${\n              role.image && _vm.grimoire.isImageOptIn\n                ? Array.isArray(role.image)\n                  ? role.image[0]\n                  : role.image\n                : require(\n                    '../../assets/icons/' +\n                      (role.imageAlt || role.id) +\n                      (role.team === 'townsfolk' || role.team === 'outsider'\n                        ? '_g'\n                        : role.team === 'minion' || role.team === 'demon'\n                          ? '_e'\n                          : '') +\n                      '.webp',\n                  )\n            })`,\n          })}):_vm._e(),_c('span',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(role.name)+\" \"),(\n              role.players.length ||\n              _vm.storyteller.role.id === role.id ||\n              _vm.extraRoles.some((extraRole) => extraRole.id === role.id)\n            )?_c('span',{staticClass:\"player\"},[_c('br'),_c('small',[(\n                  _vm.extraRoles.some((extraRole) => extraRole.id === role.id)\n                )?[_vm._v(_vm._s(\"Extra Character\" + (role.players.length > 0 || _vm.storyteller.role.id === role.id ? \",\" : \"\"))+\" \")]:_vm._e()],2),_c('small',[(_vm.storyteller.role.id === role.id)?[_vm._v(_vm._s(_vm.storyteller.name + (role.players.length > 0 ? \",\" : \"\")))]:_vm._e()],2),_vm._l((role.players),function(player,index){return _c('small',{key:index,class:{ dead: player.isDead || player.isInvisibleDead }},[(!_vm.session.isSpectator)?[_c('div',{staticClass:\"option\",on:{\"click\":function($event){return _vm.setResponded(player, role.id)}}},[_c('font-awesome-icon',{attrs:{\"icon\":[\n                      'fas',\n                      !!player.hasResponded[role.id]\n                        ? 'square-check'\n                        : 'square',\n                    ]}}),_vm._v(\" \"+_vm._s(player.name)+\" \")],1)]:_vm._e(),(_vm.session.isSpectator)?[_vm._v(_vm._s(player.name + (role.players.length > index + 1 ? \",\" : \"\")))]:_vm._e()],2)})],2):_vm._e()]),(role.otherNightReminder)?_c('span',{staticClass:\"reminder\",domProps:{\"innerHTML\":_vm._s(role.otherNightReminder)}}):_vm._e()])})],2)])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    class=\"night-reference\"\n    :class=\"{\n      isStoryteller: !session.isSpectator,\n    }\"\n    @close=\"toggleModal('nightOrder')\"\n    v-if=\"modals.nightOrder && roles.size\"\n  >\n    <font-awesome-icon\n      @click=\"toggleModal('reference')\"\n      icon=\"address-card\"\n      class=\"toggle\"\n      title=\"Show Character Reference\"\n    />\n    <h3>\n      Night Order \n      {{ edition.name || \"Custom Script\" }}\n    </h3>\n    <div class=\"night\">\n      <ul class=\"first\">\n        <li class=\"headline\">First Night</li>\n        <li\n          v-for=\"role in rolesFirstNight\"\n          :key=\"role.name\"\n          :class=\"[role.team]\"\n        >\n          <span class=\"name\">\n            {{ role.name }}\n            <span\n              class=\"player\"\n              v-if=\"\n                role.players.length ||\n                storyteller.role.id === role.id ||\n                extraRoles.some((extraRole) => extraRole.id === role.id)\n              \"\n            >\n              <br />\n              <small>\n                <template\n                  v-if=\"\n                    extraRoles.some((extraRole) => extraRole.id === role.id)\n                  \"\n                  >{{\n                    \"Extra Character\" +\n                    (role.players.length > 0 || storyteller.role.id === role.id\n                      ? \",\"\n                      : \"\")\n                  }}</template\n                >\n              </small>\n              <small>\n                <template v-if=\"storyteller.role.id === role.id\">{{\n                  storyteller.name + (role.players.length > 0 ? \",\" : \"\")\n                }}</template>\n              </small>\n              <small\n                v-for=\"(player, index) in role.players\"\n                :class=\"{ dead: player.isDead || player.isInvisibleDead }\"\n                :key=\"index\"\n              >\n                <template v-if=\"!session.isSpectator\">\n                  <div class=\"option\" @click=\"setResponded(player, role.id)\">\n                    {{ player.name }}\n                    <font-awesome-icon\n                      :icon=\"[\n                        'fas',\n                        !!player.hasResponded[role.id]\n                          ? 'square-check'\n                          : 'square',\n                      ]\"\n                    />\n                  </div>\n                </template>\n                <template v-if=\"session.isSpectator\"\n                  >{{\n                    player.name + (role.players.length > index + 1 ? \",\" : \"\")\n                  }}\n                </template>\n              </small>\n            </span>\n          </span>\n          <span\n            class=\"icon\"\n            v-if=\"role.id\"\n            :style=\"{\n              backgroundImage: `url(${\n                role.image && grimoire.isImageOptIn\n                  ? Array.isArray(role.image)\n                    ? role.image[0]\n                    : role.image\n                  : require(\n                      '../../assets/icons/' +\n                        (role.imageAlt || role.id) +\n                        (role.team === 'townsfolk' || role.team === 'outsider'\n                          ? '_g'\n                          : role.team === 'minion' || role.team === 'demon'\n                            ? '_e'\n                            : '') +\n                        '.webp',\n                    )\n              })`,\n            }\"\n          ></span>\n          <span\n            class=\"reminder\"\n            v-html=\"role.firstNightReminder\"\n            v-if=\"role.firstNightReminder\"\n          ></span>\n        </li>\n      </ul>\n      <ul class=\"other\">\n        <li class=\"headline\">Other Nights</li>\n        <li\n          v-for=\"role in rolesOtherNight\"\n          :key=\"role.name\"\n          :class=\"[role.team]\"\n        >\n          <span\n            class=\"icon\"\n            v-if=\"role.id\"\n            :style=\"{\n              backgroundImage: `url(${\n                role.image && grimoire.isImageOptIn\n                  ? Array.isArray(role.image)\n                    ? role.image[0]\n                    : role.image\n                  : require(\n                      '../../assets/icons/' +\n                        (role.imageAlt || role.id) +\n                        (role.team === 'townsfolk' || role.team === 'outsider'\n                          ? '_g'\n                          : role.team === 'minion' || role.team === 'demon'\n                            ? '_e'\n                            : '') +\n                        '.webp',\n                    )\n              })`,\n            }\"\n          ></span>\n          <span class=\"name\">\n            {{ role.name }}\n            <span\n              class=\"player\"\n              v-if=\"\n                role.players.length ||\n                storyteller.role.id === role.id ||\n                extraRoles.some((extraRole) => extraRole.id === role.id)\n              \"\n            >\n              <br />\n              <small>\n                <template\n                  v-if=\"\n                    extraRoles.some((extraRole) => extraRole.id === role.id)\n                  \"\n                  >{{\n                    \"Extra Character\" +\n                    (role.players.length > 0 || storyteller.role.id === role.id\n                      ? \",\"\n                      : \"\")\n                  }}\n                </template>\n              </small>\n              <small>\n                <template v-if=\"storyteller.role.id === role.id\">{{\n                  storyteller.name + (role.players.length > 0 ? \",\" : \"\")\n                }}</template>\n              </small>\n              <small\n                v-for=\"(player, index) in role.players\"\n                :class=\"{ dead: player.isDead || player.isInvisibleDead }\"\n                :key=\"index\"\n              >\n                <template v-if=\"!session.isSpectator\">\n                  <div class=\"option\" @click=\"setResponded(player, role.id)\">\n                    <font-awesome-icon\n                      :icon=\"[\n                        'fas',\n                        !!player.hasResponded[role.id]\n                          ? 'square-check'\n                          : 'square',\n                      ]\"\n                    />\n                    {{ player.name }}\n                  </div>\n                </template>\n                <template v-if=\"session.isSpectator\">{{\n                  player.name + (role.players.length > index + 1 ? \",\" : \"\")\n                }}</template>\n              </small>\n            </span>\n          </span>\n          <span\n            class=\"reminder\"\n            v-html=\"role.otherNightReminder\"\n            v-if=\"role.otherNightReminder\"\n          ></span>\n        </li>\n      </ul>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport { mapMutations, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  computed: {\n    rolesFirstNight: function () {\n      const rolesFirstNight = [];\n      // add dawn and dusk to night order sheet\n      rolesFirstNight.push(\n        {\n          id: \"dusk\",\n          name: \"Dusk\",\n          firstNight: 0,\n          firstNightReminder:\n            \"Check that all eyes are closed. Some Travellers & Fabled act.\",\n          players: [],\n        },\n        {\n          id: \"dawn\",\n          name: \"Dawn\",\n          firstNight: 68,\n          firstNightReminder: \"Wait a few seconds. Call for eyes open.\",\n          players: {},\n        },\n      );\n      // add minion / demon infos to night order sheet\n      if (this.players.length > 6) {\n        rolesFirstNight.push(\n          {\n            id: \"minion-info\",\n            name: \"Minion Info\",\n            firstNight: 13,\n            firstNightReminder:\n              \"Wake all Minions: Show the <b>THIS IS THE DEMON</b> token. Point to the Demon. Show the <b>THESE ARE YOUR MINIONS</b> token. Point to the other Minions.\",\n            players: this.players.filter((p) => p.role.team === \"minion\"),\n          },\n          {\n            id: \"demon-info\",\n            name: \"Demon Info & Bluffs\",\n            firstNight: 17,\n            firstNightReminder:\n              \"Wake the Demon: Show the <b>THESE ARE YOUR MINIONS</b> token. Point to all Minions. Show the <b>THESE CHARACTERS ARE NOT IN PLAY</b> token. Show 3 not-in-play good character tokens.\",\n            players: this.players.filter((p) => p.role.team === \"demon\"),\n          },\n        );\n      }\n      // add all roles on the script\n      this.roles.forEach((role) => {\n        const players = this.players.filter((p) => p.role.id === role.id);\n        if (\n          role.firstNight &&\n          role.firstNight >= 0 &&\n          (role.team !== \"traveler\" || players.length)\n        ) {\n          rolesFirstNight.push(Object.assign({ players }, role));\n        }\n      });\n      if (this.edition.firstNight) {\n        // add curated night order if it is a base script\n        for (let i = 0; i < this.edition.firstNight.length; i++) {\n          rolesFirstNight.forEach((role) => {\n            if (role.id === this.edition.firstNight[i]) {\n              role.firstNight = i + 2;\n            }\n          });\n        }\n      } else {\n        // add any off-script roles\n        this.players.forEach((player) => {\n          if (\n            !rolesFirstNight.some((role) => role.id === player.role.id) &&\n            player.role.firstNight &&\n            player.role.firstNight >= 0\n          ) {\n            const players = [player];\n            rolesFirstNight.push(Object.assign({ players }, player.role));\n          }\n        });\n      }\n      this.fabled\n        .filter(({ firstNight }) => firstNight)\n        .forEach((fabled) => {\n          if (fabled.firstNight && fabled.firstNight >= 0) {\n            rolesFirstNight.push(Object.assign({ players: [] }, fabled));\n          }\n        });\n      rolesFirstNight.sort((a, b) => a.firstNight - b.firstNight);\n      return rolesFirstNight;\n    },\n    rolesOtherNight: function () {\n      const rolesOtherNight = [];\n      // add dawn and dusk to night order sheet\n      rolesOtherNight.push(\n        {\n          id: \"dusk\",\n          name: \"Dusk\",\n          otherNight: 0,\n          otherNightReminder:\n            \"Check that all eyes are closed. Some Travellers & Fabled act.\",\n          players: [],\n        },\n        {\n          id: \"dawn\",\n          name: \"Dawn\",\n          otherNight: 86,\n          otherNightReminder:\n            \"Wait a few seconds. Call for eyes open & immediately say who died.\",\n          players: [],\n        },\n      );\n      // add all roles on the script\n      this.roles.forEach((role) => {\n        const players = this.players.filter((p) => p.role.id === role.id);\n        if (\n          role.otherNight &&\n          role.otherNight >= 0 &&\n          (role.team !== \"traveler\" || players.length)\n        ) {\n          rolesOtherNight.push(Object.assign({ players }, role));\n        }\n      });\n      if (this.edition.otherNight) {\n        // add curated night order if it is a base script\n        for (let i = 0; i < this.edition.otherNight.length; i++) {\n          rolesOtherNight.forEach((role) => {\n            if (role.id === this.edition.otherNight[i]) {\n              role.otherNight = i + 2;\n            }\n          });\n        }\n      } else {\n        // add any off-script roles\n        this.players.forEach((player) => {\n          if (\n            !rolesOtherNight.some((role) => role.id === player.role.id) &&\n            player.role.otherNight &&\n            player.role.otherNight >= 0\n          ) {\n            const players = [player];\n            rolesOtherNight.push(Object.assign({ players }, player.role));\n          }\n        });\n      }\n      this.fabled\n        .filter(({ otherNight }) => otherNight)\n        .forEach((fabled) => {\n          if (fabled.otherNight && fabled.otherNight >= 0) {\n            rolesOtherNight.push(Object.assign({ players: [] }, fabled));\n          }\n        });\n      rolesOtherNight.sort((a, b) => a.otherNight - b.otherNight);\n      return rolesOtherNight;\n    },\n    ...mapState([\"roles\", \"modals\", \"edition\", \"grimoire\", \"session\"]),\n    ...mapState(\"players\", [\"players\", \"storyteller\", \"extraRoles\", \"fabled\"]),\n  },\n  methods: {\n    setResponded(player, roleId) {\n      const hasResponded = { ...player.hasResponded };\n      hasResponded[roleId] = !hasResponded[roleId];\n      this.$store.commit(\"players/update\", {\n        player: player,\n        property: \"hasResponded\",\n        value: hasResponded,\n      });\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../vars.scss\";\n\nul li .reminder i.reminder-token {\n  display: inline-block;\n  vertical-align: middle;\n  height: 20px;\n  width: 20px;\n  border: 1px solid white;\n  border-radius: 50%;\n  top: -2px;\n  background: url(\"../../assets/reminder.webp\") no-repeat 50%;\n  background-size: 100%;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@import \"../../vars.scss\";\n\n.toggle {\n  position: absolute;\n  left: 25px;\n  top: 20px;\n  cursor: pointer;\n  &:hover {\n    color: $gold;\n  }\n}\n\nh3 {\n  margin: 0 40px;\n  text-transform: uppercase;\n  font-family: \"Dumbledor 1\", serif;\n  font-size: 110%;\n}\n\nh4 {\n  text-transform: capitalize;\n  display: flex;\n  align-items: center;\n  height: 20px;\n  &:before,\n  &:after {\n    content: \" \";\n    width: 100%;\n    height: 1px;\n    border-radius: 2px;\n  }\n  &:before {\n    margin-right: 15px;\n  }\n  &:after {\n    margin-left: 15px;\n  }\n}\n\n.isStoryteller small {\n  display: block;\n}\n\n.fabled {\n  .name {\n    background: linear-gradient(90deg, $fabled, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $fabled, transparent 35%);\n    }\n  }\n}\n.traveler {\n  .name {\n    background: linear-gradient(90deg, $traveler, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $traveler, transparent 35%);\n    }\n  }\n}\n.townsfolk {\n  .name {\n    background: linear-gradient(90deg, $townsfolk, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $townsfolk, transparent 35%);\n    }\n  }\n}\n.outsider {\n  .name {\n    background: linear-gradient(90deg, $outsider, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $outsider, transparent 35%);\n    }\n  }\n}\n.minion {\n  .name {\n    background: linear-gradient(90deg, $minion, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $minion, transparent 35%);\n    }\n  }\n}\n.demon {\n  .name {\n    background: linear-gradient(90deg, $demon, transparent 35%);\n    .night .other & {\n      background: linear-gradient(-90deg, $demon, transparent 35%);\n    }\n  }\n}\nul {\n  li {\n    display: flex;\n    width: 100%;\n    margin-bottom: 3px;\n    justify-content: center;\n    .icon {\n      width: 55px;\n      background-size: 100%;\n      background-position: 50%;\n      background-repeat: no-repeat;\n      flex-grow: 0;\n      flex-shrink: 0;\n      text-align: center;\n      margin: 0 2px;\n      &:after {\n        content: \" \";\n        display: block;\n        padding-top: 66%;\n      }\n    }\n    .name {\n      flex-grow: 0;\n      flex-shrink: 0;\n      width: 15%;\n      text-align: right;\n      font-size: 110%;\n      padding: 5px;\n      border-left: 1px solid rgba(255, 255, 255, 0.4);\n      border-right: 1px solid rgba(255, 255, 255, 0.4);\n      small {\n        color: #888;\n        margin-right: 5px;\n        &.dead {\n          text-decoration: line-through;\n        }\n      }\n    }\n    .reminder {\n      position: fixed;\n      padding: 5px 10px;\n      left: 50%;\n      bottom: 0;\n      width: 500px;\n      z-index: 25;\n      background: rgba(0, 0, 0, 0.75);\n      border-radius: 10px;\n      border: 3px solid black;\n      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.5));\n      text-align: left;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 200ms ease-in-out;\n      margin-left: -250px;\n      margin-bottom: 10px;\n    }\n    &:hover .reminder {\n      opacity: 1;\n    }\n  }\n  &.legend {\n    font-weight: bold;\n    height: 20px;\n    margin-top: 10px;\n    li span {\n      background: none;\n      height: auto;\n      font-family: inherit;\n      font-size: inherit;\n    }\n    .icon:after {\n      padding-top: 0;\n    }\n  }\n}\n\n.night {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  > *:first-child {\n    margin-right: 2vh;\n  }\n  > * {\n    flex-grow: 0;\n    flex-wrap: nowrap;\n    flex-direction: column;\n  }\n  .headline {\n    display: block;\n    font-weight: bold;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.4);\n    padding: 5px 10px;\n    border-radius: 0;\n    text-align: center;\n  }\n  .name {\n    flex-grow: 1;\n  }\n  .first {\n    .name {\n      border-left: 0;\n    }\n  }\n  .other {\n    li .name {\n      text-align: left;\n      border-right: 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NightOrderModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NightOrderModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NightOrderModal.vue?vue&type=template&id=2e40a798&scoped=true\"\nimport script from \"./NightOrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./NightOrderModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./NightOrderModal.vue?vue&type=style&index=0&id=2e40a798&prod&lang=scss\"\nimport style1 from \"./NightOrderModal.vue?vue&type=style&index=1&id=2e40a798&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e40a798\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isDisplayed)?_c('Modal',{on:{\"close\":_vm.close}},[_c('h3',[_vm._v(\"Choose a Fabled Character to Add to the Game:\")]),_c('ul',{staticClass:\"tokens\"},_vm._l((_vm.fabled),function(role){return _c('li',{key:role.id,class:{ match: _vm.queryMatches(role.name) },on:{\"click\":function($event){return _vm.setFabled(role)}}},[_c('Token',{attrs:{\"role\":role}})],1)}),0),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"searchInput\",staticClass:\"role-search\",attrs:{\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.query)},on:{\"keyup\":_vm.keyup,\"input\":function($event){if($event.target.composing)return;_vm.query=$event.target.value}}})]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal v-if=\"isDisplayed\" @close=\"close\">\n    <h3>Choose a Fabled Character to Add to the Game:</h3>\n    <ul class=\"tokens\">\n      <li\n        v-for=\"role in fabled\"\n        :class=\"{ match: queryMatches(role.name) }\"\n        :key=\"role.id\"\n        @click=\"setFabled(role)\"\n      >\n        <Token :role=\"role\" />\n      </li>\n    </ul>\n    <input\n      ref=\"searchInput\"\n      class=\"role-search\"\n      placeholder=\"Search\"\n      v-model=\"query\"\n      @keyup=\"keyup\"\n    />\n  </Modal>\n</template>\n\n<script>\nimport { mapMutations, mapState } from \"vuex\";\nimport Modal from \"./Modal\";\nimport Token from \"../Token\";\n\nexport default {\n  components: { Token, Modal },\n  computed: {\n    ...mapState([\"modals\", \"fabled\", \"grimoire\"]),\n    fabled() {\n      const fabled = [];\n      this.$store.state.fabled.forEach((role) => {\n        // don't show fabled that are already in play\n        if (\n          !this.$store.state.players.fabled.some(\n            (fable) => fable.id === role.id,\n          )\n        ) {\n          fabled.push(role);\n        }\n      });\n      return fabled;\n    },\n    isDisplayed() {\n      return this.modals.fabled;\n    },\n  },\n  data() {\n    return {\n      query: \"\",\n    };\n  },\n  methods: {\n    setFabled(role) {\n      this.$store.commit(\"players/setFabled\", {\n        fabled: role,\n      });\n      this.$store.commit(\"toggleFabled\", true);\n      this.close();\n    },\n    close() {\n      this.query = \"\";\n      this.toggleModal(\"fabled\");\n    },\n    queryMatches(name) {\n      // A search query matches if, after removing all non-word characters,\n      // it is a case-insensitive prefix of the character name.\n      const simplify = (str) => str.replaceAll(/\\W+/g, \"\").toLowerCase();\n      return simplify(name || \"\").startsWith(simplify(this.query));\n    },\n    keyup(event) {\n      // Allow Escape for modal dialog dismissal.\n      if (event.key === \"Esc\" || event.key === \"Escape\") return;\n\n      event.stopPropagation();\n\n      // If there's a unique match and the user presses Enter, select that role.\n      if (event.key === \"Enter\") {\n        const matchingRoles = this.fabled.filter((r) =>\n          this.queryMatches(r.name),\n        );\n        if (matchingRoles.length === 1) {\n          this.setFabled(matchingRoles[0]);\n        }\n      }\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n  watch: {\n    isDisplayed(shown) {\n      if (shown) this.$nextTick(() => this.$refs.searchInput.focus());\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../vars.scss\";\n\nul.tokens li {\n  border-radius: 50%;\n  width: 8vw;\n  margin: 0.5%;\n  transition: transform 500ms ease;\n\n  &:hover {\n    transform: scale(1.2);\n    z-index: 10;\n  }\n  &:not(.match) {\n    opacity: 0.4;\n  }\n}\n\ninput.role-search {\n  display: block;\n  width: 20%;\n  background: transparent;\n  border: solid white;\n  border-width: 0 0 1px 0;\n  outline: none;\n  color: white;\n  font-size: 1em;\n  font-family: \"Goudy StM\", sans-serif;\n\n  &:not(:focus) {\n    border-bottom-color: #777;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FabledModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FabledModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FabledModal.vue?vue&type=template&id=2b38b3f7&scoped=true\"\nimport script from \"./FabledModal.vue?vue&type=script&lang=js\"\nexport * from \"./FabledModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./FabledModal.vue?vue&type=style&index=0&id=2b38b3f7&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b38b3f7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.voteHistory && !_vm.session.isSpectator)?_c('Modal',{staticClass:\"vote-history\",on:{\"close\":function($event){return _vm.toggleModal('voteHistory')}}},[_c('font-awesome-icon',{staticClass:\"clear\",attrs:{\"icon\":\"trash-can\",\"title\":\"Clear vote history\"},on:{\"click\":_vm.clearVoteHistory}}),_c('h3',[_vm._v(\"Vote History\")]),_c('table',[_c('thead',[_c('tr',[_c('td',[_vm._v(\"Time\")]),_c('td',[_vm._v(\"Nominator\")]),_c('td',[_vm._v(\"Nominee\")]),_c('td',[_vm._v(\"Type\")]),_c('td',[_vm._v(\"Votes\")]),_c('td',[_vm._v(\"Majority\")]),_c('td',[_c('font-awesome-icon',{attrs:{\"icon\":\"user-friends\"}}),_vm._v(\" Voters \")],1)])]),_c('tbody',_vm._l((_vm.session.voteHistory),function(vote,index){return _c('tr',{key:index},[_c('td',[_vm._v(\" \"+_vm._s(vote.timestamp.getHours().toString().padStart(2, \"0\"))+\":\"+_vm._s(vote.timestamp.getMinutes().toString().padStart(2, \"0\"))+\" \")]),_c('td',[_vm._v(_vm._s(vote.nominator))]),_c('td',[_vm._v(_vm._s(vote.nominee))]),_c('td',[_vm._v(_vm._s(vote.type))]),_c('td',[_vm._v(\" \"+_vm._s(vote.votes)+\" \"),_c('font-awesome-icon',{attrs:{\"icon\":\"hand-paper\"}})],1),_c('td',[_vm._v(\" \"+_vm._s(vote.majority)+\" \"),_c('font-awesome-icon',{attrs:{\"icon\":[\n              'fas',\n              vote.votes >= vote.majority ? 'square-check' : 'square',\n            ]}})],1),_c('td',[_vm._v(\" \"+_vm._s(vote.voters.join(\", \"))+\" \")])])}),0)])],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    class=\"vote-history\"\n    v-if=\"modals.voteHistory && !session.isSpectator\"\n    @close=\"toggleModal('voteHistory')\"\n  >\n    <font-awesome-icon\n      @click=\"clearVoteHistory\"\n      icon=\"trash-can\"\n      class=\"clear\"\n      title=\"Clear vote history\"\n    />\n\n    <h3>Vote History</h3>\n\n    <table>\n      <thead>\n        <tr>\n          <td>Time</td>\n          <td>Nominator</td>\n          <td>Nominee</td>\n          <td>Type</td>\n          <td>Votes</td>\n          <td>Majority</td>\n          <td>\n            <font-awesome-icon icon=\"user-friends\" />\n            Voters\n          </td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(vote, index) in session.voteHistory\" :key=\"index\">\n          <td>\n            {{ vote.timestamp.getHours().toString().padStart(2, \"0\") }}:{{\n              vote.timestamp.getMinutes().toString().padStart(2, \"0\")\n            }}\n          </td>\n          <td>{{ vote.nominator }}</td>\n          <td>{{ vote.nominee }}</td>\n          <td>{{ vote.type }}</td>\n          <td>\n            {{ vote.votes }}\n            <font-awesome-icon icon=\"hand-paper\" />\n          </td>\n          <td>\n            {{ vote.majority }}\n            <font-awesome-icon\n              :icon=\"[\n                'fas',\n                vote.votes >= vote.majority ? 'square-check' : 'square',\n              ]\"\n            />\n          </td>\n          <td>\n            {{ vote.voters.join(\", \") }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport { mapMutations, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  computed: {\n    ...mapState([\"session\", \"modals\"]),\n  },\n  methods: {\n    clearVoteHistory() {\n      this.$store.commit(\"session/clearVoteHistory\");\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../vars.scss\";\n\n.clear {\n  position: absolute;\n  left: 25px;\n  top: 20px;\n  cursor: pointer;\n  &:hover {\n    color: $gold;\n  }\n}\n\nh3 {\n  margin: 0 40px;\n}\n\ntable {\n  border-spacing: 10px 0;\n  margin-left: auto;\n  margin-right: auto;\n  font-family: \"Goudy StM\", sans-serif;\n}\n\nthead td {\n  font-weight: bold;\n  border-bottom: 1px solid white;\n  text-align: center;\n  padding: 0 3px;\n}\n\ntbody {\n  td:nth-child(2) {\n    color: $gold;\n  }\n  td:nth-child(3) {\n    color: $purple;\n  }\n  td:nth-child(5) {\n    text-align: center;\n  }\n  td:nth-child(6) {\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VoteHistoryModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VoteHistoryModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VoteHistoryModal.vue?vue&type=template&id=214e3a01&scoped=true\"\nimport script from \"./VoteHistoryModal.vue?vue&type=script&lang=js\"\nexport * from \"./VoteHistoryModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./VoteHistoryModal.vue?vue&type=style&index=0&id=214e3a01&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"214e3a01\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.modals.gameState)?_c('Modal',{staticClass:\"game-state\",on:{\"close\":function($event){return _vm.toggleModal('gameState')}}},[_c('h3',[_vm._v(\"Current Game State\")]),_c('textarea',{domProps:{\"value\":_vm.gamestate},on:{\"input\":function($event){$event.stopPropagation();_vm.input = $event.target.value},\"click\":function($event){return $event.target.select()},\"keyup\":function($event){$event.stopPropagation();}}}),_c('div',{staticClass:\"button-group\"},[(!_vm.session.isSpectator)?_c('div',{staticClass:\"button purple\",on:{\"click\":_vm.load}},[_c('font-awesome-icon',{attrs:{\"icon\":\"gear\"}}),_vm._v(\" Load State \")],1):_vm._e()])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    class=\"game-state\"\n    v-if=\"modals.gameState\"\n    @close=\"toggleModal('gameState')\"\n  >\n    <h3>Current Game State</h3>\n    <textarea\n      :value=\"gamestate\"\n      @input.stop=\"input = $event.target.value\"\n      @click=\"$event.target.select()\"\n      @keyup.stop=\"\"\n    ></textarea>\n    <div class=\"button-group\">\n      <div class=\"button purple\" @click=\"load\" v-if=\"!session.isSpectator\">\n        <font-awesome-icon icon=\"gear\" /> Load State\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport Modal from \"./Modal\";\nimport { mapMutations, mapState } from \"vuex\";\n\nexport default {\n  components: {\n    Modal,\n  },\n  computed: {\n    gamestate: function () {\n      return JSON.stringify({\n        bluffs: this.players.bluffs.map(({ id }) => id),\n        extraRoles: this.players.extraRoles.map(({ id }) => id),\n        edition: this.edition.isOfficial\n          ? { id: this.edition.id }\n          : this.edition,\n        roles: this.edition.isOfficial\n          ? \"\"\n          : this.$store.getters.customRolesStripped,\n        fabled: this.players.fabled.map((fabled) =>\n          fabled.isCustom ? fabled : { id: fabled.id },\n        ),\n        players: this.players.players.map((player) => ({\n          ...player,\n          role: player.role.id || {},\n        })),\n        storyteller: {\n          ...this.players.storyteller,\n          role: this.players.storyteller.role.id || {},\n        },\n      });\n    },\n    ...mapState([\"modals\", \"players\", \"edition\", \"roles\", \"session\"]),\n  },\n  data() {\n    return {\n      input: \"\",\n    };\n  },\n  methods: {\n    load: function () {\n      if (this.session.isSpectator) return;\n      try {\n        const data = JSON.parse(this.input || this.gamestate);\n        const {\n          bluffs,\n          extraRoles,\n          edition,\n          roles,\n          fabled,\n          players,\n          storyteller,\n        } = data;\n        if (roles) {\n          this.$store.commit(\"setCustomRoles\", roles);\n        }\n        if (edition) {\n          this.$store.commit(\"setEdition\", edition);\n        }\n        if (bluffs.length) {\n          bluffs.forEach((role, index) => {\n            this.$store.commit(\"players/setBluff\", {\n              index,\n              role: this.$store.state.roles.get(role) || {},\n            });\n          });\n        }\n        if (extraRoles) {\n          this.$store.commit(\"players/setExtraRoles\", {\n            role: extraRoles.map(\n              (role) => this.$store.state.roles.get(role) || {},\n            ),\n          });\n          this.$store.commit(\"toggleFabled\", true);\n        }\n        if (fabled) {\n          this.$store.commit(\"players/setFabled\", {\n            fabled: fabled.map(\n              (f) =>\n                this.$store.state.fabled.get(f) ||\n                this.$store.state.fabled.get(f.id) ||\n                f,\n            ),\n          });\n          this.$store.commit(\"toggleFabled\", true);\n        }\n        if (players) {\n          this.$store.commit(\n            \"players/set\",\n            players.map((player) => ({\n              ...player,\n              role:\n                this.$store.state.roles.get(player.role) ||\n                this.$store.getters.rolesJSONbyId.get(player.role) ||\n                {},\n            })),\n          );\n        }\n        if (storyteller) {\n          this.$store.commit(\"players/setStoryteller\", {\n            ...storyteller,\n            role:\n              this.$store.state.roles.get(storyteller.role) ||\n              this.$store.getters.rolesJSONbyId.get(storyteller.role) ||\n              {},\n          });\n        }\n        this.toggleModal(\"gameState\");\n      } catch (e) {\n        alert(\"Unable to parse JSON: \" + e);\n      }\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../vars.scss\";\n\nh3 {\n  margin: 0 40px;\n}\n\ntextarea {\n  background: transparent;\n  color: white;\n  white-space: pre-wrap;\n  word-break: break-all;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  width: 60vw;\n  height: 30vh;\n  max-width: 100%;\n  margin: 5px 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameStateModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameStateModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GameStateModal.vue?vue&type=template&id=9da40a36&scoped=true\"\nimport script from \"./GameStateModal.vue?vue&type=script&lang=js\"\nexport * from \"./GameStateModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./GameStateModal.vue?vue&type=style&index=0&id=9da40a36&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9da40a36\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isDisplayed)?_c('Modal',{on:{\"close\":_vm.close}},[_c('h3',[_vm._v(\"Choose a New Extra Character:\")]),_c('ul',{staticClass:\"tokens\"},_vm._l((_vm.availableRoles),function(role){return _c('li',{key:role.id,class:[role.team, { match: _vm.queryMatches(role.name) }],on:{\"click\":function($event){return _vm.setRole(role)}}},[_c('Token',{attrs:{\"role\":role}})],1)}),0),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"searchInput\",staticClass:\"role-search\",attrs:{\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.query)},on:{\"keyup\":_vm.keyup,\"input\":function($event){if($event.target.composing)return;_vm.query=$event.target.value}}})]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal v-if=\"isDisplayed\" @close=\"close\">\n    <h3>Choose a New Extra Character:</h3>\n    <ul class=\"tokens\">\n      <li\n        v-for=\"role in availableRoles\"\n        :class=\"[role.team, { match: queryMatches(role.name) }]\"\n        :key=\"role.id\"\n        @click=\"setRole(role)\"\n      >\n        <Token :role=\"role\" />\n      </li>\n    </ul>\n    <input\n      ref=\"searchInput\"\n      class=\"role-search\"\n      placeholder=\"Search\"\n      v-model=\"query\"\n      @keyup=\"keyup\"\n    />\n  </Modal>\n</template>\n\n<script>\nimport { mapMutations, mapState } from \"vuex\";\nimport Modal from \"./Modal\";\nimport Token from \"../Token\";\n\nexport default {\n  components: { Token, Modal },\n  computed: {\n    availableRoles() {\n      const roles = [];\n      this.$store.state.roles.forEach((role) => {\n        // don't show roles that are already an extra character\n        if (\n          !this.$store.state.players.extraRoles.some(\n            (extraRole) => extraRole.id === role.id,\n          )\n        ) {\n          roles.push(role);\n        }\n      });\n      return roles;\n    },\n    isDisplayed() {\n      return this.modals.extraRoles && this.availableRoles.length;\n    },\n    ...mapState([\"modals\", \"roles\", \"grimoire\"]),\n  },\n  data() {\n    return {\n      query: \"\",\n    };\n  },\n  methods: {\n    setRole(role) {\n      this.$store.commit(\"players/setExtraRoles\", {\n        role: role,\n      });\n      this.close();\n    },\n    close() {\n      this.query = \"\";\n      this.toggleModal(\"extraRoles\");\n    },\n    queryMatches(name) {\n      // A search query matches if, after removing all non-word characters,\n      // it is a case-insensitive prefix of the character name.\n      const simplify = (str) => str.replaceAll(/\\W+/g, \"\").toLowerCase();\n      return simplify(name || \"\").startsWith(simplify(this.query));\n    },\n    keyup(event) {\n      // Allow Escape for modal dialog dismissal.\n      if (event.key === \"Esc\" || event.key === \"Escape\") return;\n\n      event.stopPropagation();\n\n      // If there's a unique match and the user presses Enter, select that role.\n      if (event.key === \"Enter\") {\n        const matchingRoles = this.availableRoles.filter((r) =>\n          this.queryMatches(r.name),\n        );\n        if (matchingRoles.length === 1) {\n          this.setRole(matchingRoles[0]);\n        }\n      }\n    },\n    ...mapMutations([\"toggleModal\"]),\n  },\n  watch: {\n    isDisplayed(shown) {\n      if (shown) this.$nextTick(() => this.$refs.searchInput.focus());\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../vars.scss\";\n\nul.tokens li {\n  border-radius: 50%;\n  width: 6vw;\n  margin: 1%;\n  transition: transform 500ms ease;\n\n  &.townsfolk {\n    box-shadow:\n      0 0 10px $townsfolk,\n      0 0 10px #004cff;\n  }\n  &.outsider {\n    box-shadow:\n      0 0 10px $outsider,\n      0 0 10px $outsider;\n  }\n  &.minion {\n    box-shadow:\n      0 0 10px $minion,\n      0 0 10px $minion;\n  }\n  &.demon {\n    box-shadow:\n      0 0 10px $demon,\n      0 0 10px $demon;\n  }\n  &.traveler {\n    box-shadow:\n      0 0 10px $traveler,\n      0 0 10px $traveler;\n  }\n  &:hover {\n    transform: scale(1.2);\n    z-index: 10;\n  }\n  &:not(.match) {\n    opacity: 0.4;\n  }\n}\n\ninput.role-search {\n  display: block;\n  width: 20%;\n  background: transparent;\n  border: solid white;\n  border-width: 0 0 1px 0;\n  outline: none;\n  color: white;\n  font-size: 1em;\n  font-family: \"Goudy StM\", sans-serif;\n\n  &:not(:focus) {\n    border-bottom-color: #777;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExtraRolesModal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ExtraRolesModal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ExtraRolesModal.vue?vue&type=template&id=794d0086&scoped=true\"\nimport script from \"./ExtraRolesModal.vue?vue&type=script&lang=js\"\nexport * from \"./ExtraRolesModal.vue?vue&type=script&lang=js\"\nimport style0 from \"./ExtraRolesModal.vue?vue&type=style&index=0&id=794d0086&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"794d0086\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"result\"},[(_vm.session.winningTeam)?_c('div',{staticClass:\"winning-team\"},[_c('span',{class:_vm.session.winningTeam},[_vm._v(\" \"+_vm._s(_vm.session.winningTeam === \"e\" ? \"EVIL\" : \"GOOD\")+\" \")]),_c('br'),_c('small',[_vm._v(\"HAS WON\")])]):_vm._e()]),(!_vm.session.isSpectator)?_c('div',{staticClass:\"overlay\"},[_vm._v(\" REVEAL GRIMOIRE\"),_c('br'),_vm._v(\" Reveal the game result below and each\"),_c('br'),_vm._v(\" player's character by clicking on their token.\"),_c('br'),_c('div',{staticClass:\"button-group\"},[(!_vm.session.winningTeam)?_c('div',{staticClass:\"button gold\",on:{\"click\":function($event){return _vm.gameResult('g')}}},[_vm._v(\" Good Won \")]):_vm._e(),(!_vm.session.winningTeam)?_c('div',{staticClass:\"button purple\",on:{\"click\":function($event){return _vm.gameResult('e')}}},[_vm._v(\" Evil Won \")]):_vm._e(),_c('div',{staticClass:\"button\",on:{\"click\":function($event){return _vm.cancel()}}},[_vm._v(\"Cancel\")])])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"center\">\n    <div class=\"result\">\n      <div class=\"winning-team\" v-if=\"session.winningTeam\">\n        <span :class=\"session.winningTeam\">\n          {{ session.winningTeam === \"e\" ? \"EVIL\" : \"GOOD\" }}\n        </span>\n        <br />\n        <small>HAS WON</small>\n      </div>\n    </div>\n    <div class=\"overlay\" v-if=\"!session.isSpectator\">\n      REVEAL GRIMOIRE<br />\n      Reveal the game result below and each<br />\n      player's character by clicking on their token.<br />\n\n      <div class=\"button-group\">\n        <div\n          class=\"button gold\"\n          v-if=\"!session.winningTeam\"\n          @click=\"gameResult('g')\"\n        >\n          Good Won\n        </div>\n        <div\n          class=\"button purple\"\n          v-if=\"!session.winningTeam\"\n          @click=\"gameResult('e')\"\n        >\n          Evil Won\n        </div>\n        <div class=\"button\" @click=\"cancel()\">Cancel</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  computed: {\n    ...mapState([\"session\"]),\n  },\n  methods: {\n    gameResult(team) {\n      this.$store.commit(\"session/setReveal\", { winningTeam: team });\n    },\n    cancel() {\n      this.$store.commit(\"session/setReveal\", { isRevealInProgress: false });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../vars.scss\";\n\n.center {\n  position: absolute;\n  text-align: center;\n  font-family: \"Goudy StM\", sans-serif;\n  transition: padding-top 200ms ease-in-out;\n  padding-top: 0;\n  &:has(.overlay) {\n    padding-top: 65px;\n  }\n\n  .result {\n    height: 140px;\n    .winning-team {\n      font-weight: bolder;\n      font-size: 120px;\n      line-height: 50%;\n      filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.7));\n      animation: revealResult 3s ease-out;\n      span {\n        background-image: linear-gradient(to bottom, #d08c66, #ce0100);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        color: transparent;\n        letter-spacing: -5px;\n        &.g {\n          background-image: linear-gradient(to bottom, #44b0ff, #1f65ff);\n        }\n      }\n      small {\n        font-size: 50px;\n      }\n\n      @keyframes revealResult {\n        0% {\n          opacity: 0;\n          filter: blur(40px);\n        }\n        100% {\n          opacity: 1;\n          filter: blur(0) drop-shadow(0 0 2px rgba(0, 0, 0, 0.7));\n        }\n      }\n    }\n  }\n\n  .overlay {\n    font-size: 18px;\n    background: rgba(0, 0, 0, 0.75);\n    border-radius: 10px;\n    border: 3px solid black;\n    padding: 0 4px 4px;\n    font-family: \"Goudy StM\", sans-serif;\n    z-index: 20;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameResult.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameResult.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GameResult.vue?vue&type=template&id=5a37abf0&scoped=true\"\nimport script from \"./GameResult.vue?vue&type=script&lang=js\"\nexport * from \"./GameResult.vue?vue&type=script&lang=js\"\nimport style0 from \"./GameResult.vue?vue&type=style&index=0&id=5a37abf0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a37abf0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    id=\"app\"\n    @keyup=\"keyup\"\n    @keyup.space=\"space\"\n    tabindex=\"-1\"\n    :class=\"[\n      {\n        night: grimoire.isNight,\n        reveal: session.reveal,\n        static: grimoire.isStatic,\n      },\n      edition.id,\n      `background-${\n        players.length\n          ? (edition.isOfficial\n              ? grimoire.defaultBaseBackgroundIndex\n              : grimoire.defaultCustomBackgroundIndex) + 1\n          : 0\n      }`,\n    ]\"\n    :style=\"{\n      backgroundImage: grimoire.background\n        ? `url('${grimoire.background}')`\n        : '',\n    }\"\n  >\n    <video\n      id=\"background\"\n      v-if=\"grimoire.background && grimoire.background.match(/\\.(mp4|webm)$/i)\"\n      :src=\"grimoire.background\"\n      autoplay\n      loop\n    ></video>\n    <div class=\"backdrop\"></div>\n    <TownSquare></TownSquare>\n    <transition name=\"blur\">\n      <Intro v-if=\"!players.length\"></Intro>\n      <TownInfo\n        v-if=\"players.length && !session.nomination && !session.reveal\"\n      ></TownInfo>\n      <GameResult v-if=\"players.length && session.reveal\"></GameResult>\n      <Vote v-if=\"session.nomination\" ref=\"vote\"></Vote>\n    </transition>\n    <Menu ref=\"menu\"></Menu>\n    <EditionModal />\n    <FabledModal />\n    <ExtraRolesModal />\n    <RolesModal />\n    <ReferenceModal />\n    <NightOrderModal />\n    <VoteHistoryModal />\n    <GameStateModal />\n    <Gradients />\n    <span id=\"version\">v{{ version }}</span>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { version } from \"../package.json\";\nimport TownSquare from \"./components/TownSquare\";\nimport TownInfo from \"./components/TownInfo\";\nimport Menu from \"./components/Menu\";\nimport RolesModal from \"./components/modals/RolesModal\";\nimport EditionModal from \"./components/modals/EditionModal\";\nimport Intro from \"./components/Intro\";\nimport ReferenceModal from \"./components/modals/ReferenceModal\";\nimport Vote from \"./components/Vote\";\nimport Gradients from \"./components/Gradients\";\nimport NightOrderModal from \"./components/modals/NightOrderModal\";\nimport FabledModal from \"@/components/modals/FabledModal\";\nimport VoteHistoryModal from \"@/components/modals/VoteHistoryModal\";\nimport GameStateModal from \"@/components/modals/GameStateModal\";\nimport ExtraRolesModal from \"@/components/modals/ExtraRolesModal.vue\";\nimport GameResult from \"@/components/GameResult.vue\";\n\nexport default {\n  components: {\n    GameResult,\n    ExtraRolesModal,\n    GameStateModal,\n    VoteHistoryModal,\n    FabledModal,\n    NightOrderModal,\n    Vote,\n    ReferenceModal,\n    Intro,\n    TownInfo,\n    TownSquare,\n    Menu,\n    EditionModal,\n    RolesModal,\n    Gradients,\n  },\n  computed: {\n    ...mapState([\"edition\", \"grimoire\", \"session\"]),\n    ...mapState(\"players\", [\"players\"]),\n  },\n  data() {\n    return {\n      version,\n    };\n  },\n  methods: {\n    keyup({ key, ctrlKey, metaKey }) {\n      if (ctrlKey || metaKey) return;\n      switch (key.toLocaleLowerCase()) {\n        case \"g\":\n          this.$store.commit(\"toggleGrimoire\");\n          break;\n        case \"f\":\n          this.$store.commit(\"toggleFabled\");\n          break;\n        case \"b\":\n          this.$store.commit(\"toggleBluffs\");\n          break;\n        case \"a\":\n          this.$refs.menu.addPlayer();\n          break;\n        case \"h\":\n          this.$refs.menu.hostSession();\n          break;\n        case \"j\":\n          this.$refs.menu.joinSession();\n          break;\n        case \"r\":\n          this.$store.commit(\"toggleModal\", \"reference\");\n          break;\n        case \"n\":\n          this.$store.commit(\"toggleModal\", \"nightOrder\");\n          break;\n        case \"e\":\n          if (this.session.isSpectator || this.session.reveal) return;\n          this.$store.commit(\"toggleModal\", \"edition\");\n          break;\n        case \"c\":\n          if (this.session.isSpectator || this.session.reveal) return;\n          this.$store.commit(\"toggleModal\", \"roles\");\n          break;\n        case \"v\":\n          if (this.session.voteHistory.length || !this.session.isSpectator) {\n            this.$store.commit(\"toggleModal\", \"voteHistory\");\n          }\n          break;\n        case \"s\":\n          if (this.session.isSpectator) return;\n          this.$refs.menu.toggleNight();\n          break;\n        case \"escape\":\n          this.$store.commit(\"toggleModal\");\n          break;\n        case \"arrowup\":\n          if (this.session.nomination) {\n            this.$refs.vote.vote(1);\n          }\n          break;\n        case \"arrowdown\":\n          if (this.session.nomination) {\n            this.$refs.vote.vote(0);\n          }\n          break;\n      }\n    },\n    space() {\n      const index = this.players.findIndex(\n        (p) => p.id === this.session.playerId,\n      );\n      if (index >= 0) {\n        this.$store.commit(\"session/raiseHand\", [\n          index,\n          !this.session.handsRaised[index],\n        ]);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"vars\";\n\n@font-face {\n  font-family: \"Dumbledor 1\";\n  src: url(\"assets/fonts/dumbledor.eot\");\n  src:\n    url(\"assets/fonts/dumbledor.eot?#iefix\") format(\"embedded-opentype\"),\n    url(\"assets/fonts/dumbledor.woff2\") format(\"woff2\"),\n    url(\"assets/fonts/dumbledor.woff\") format(\"woff\");\n}\n\n@font-face {\n  font-family: \"LHF Unlovable\";\n  src: url(\"assets/fonts/LHFUnlovable1.eot\");\n  src:\n    url(\"assets/fonts/LHFUnlovable1.eot?#iefix\") format(\"embedded-opentype\"),\n    url(\"assets/fonts/LHFUnlovable1.woff2\") format(\"woff2\"),\n    url(\"assets/fonts/LHFUnlovable1.woff\") format(\"woff\");\n}\n\n@font-face {\n  font-family: \"Goudy StM\";\n  src: url(\"assets/fonts/GoudyStM.eot\");\n  src:\n    url(\"assets/fonts/GoudyStM.eot?#iefix\") format(\"embedded-opentype\"),\n    url(\"assets/fonts/GoudyStM.woff2\") format(\"woff2\"),\n    url(\"assets/fonts/GoudyStM.woff\") format(\"woff\");\n}\n\n@font-face {\n  font-family: \"Trade Gothic LT Std\";\n  src: url(\"assets/fonts/TradeGothicLTStd.eot\");\n  src:\n    url(\"assets/fonts/TradeGothicLTStd.eot?#iefix\") format(\"embedded-opentype\"),\n    url(\"assets/fonts/TradeGothicLTStd.woff2\") format(\"woff2\"),\n    url(\"assets/fonts/TradeGothicLTStd.woff\") format(\"woff\");\n}\n\n@font-face {\n  font-family: \"Trade Gothic LT Std Bd2\";\n  src: url(\"assets/fonts/TradeGothicLTStd-Bd2.eot\");\n  src:\n    url(\"assets/fonts/TradeGothicLTStd-Bd2.eot?#iefix\")\n      format(\"embedded-opentype\"),\n    url(\"assets/fonts/TradeGothicLTStd-Bd2.woff2\") format(\"woff2\"),\n    url(\"assets/fonts/TradeGothicLTStd-Bd2.woff\") format(\"woff\");\n}\n\nhtml,\nbody {\n  font-size: 1.2em;\n  line-height: 1.4;\n  background:\n    url(\"assets/backgrounds/custom/background1.webp\") center center,\n    url(\"assets/backgrounds/custom/background2.webp\") center center,\n    url(\"assets/backgrounds/custom/background3.webp\") center center,\n    url(\"assets/backgrounds/custom/background4.webp\") center center,\n    url(\"assets/backgrounds/custom/background5.webp\") center center,\n    url(\"assets/backgrounds/custom/background6.webp\") center center,\n    url(\"assets/backgrounds/custom/background7.webp\") center center,\n    url(\"assets/backgrounds/custom/background8.webp\") center center,\n    url(\"assets/backgrounds/tb/background1.webp\") center center,\n    url(\"assets/backgrounds/tb/background2.webp\") center center,\n    url(\"assets/backgrounds/tb/background3.webp\") center center,\n    url(\"assets/backgrounds/tb/background4.webp\") center center,\n    url(\"assets/backgrounds/tb/background5.webp\") center center,\n    url(\"assets/backgrounds/bmr/background1.webp\") center center,\n    url(\"assets/backgrounds/bmr/background2.webp\") center center,\n    url(\"assets/backgrounds/bmr/background3.webp\") center center,\n    url(\"assets/backgrounds/bmr/background4.webp\") center center,\n    url(\"assets/backgrounds/bmr/background5.webp\") center center,\n    url(\"assets/backgrounds/snv/background1.webp\") center center,\n    url(\"assets/backgrounds/snv/background2.webp\") center center,\n    url(\"assets/backgrounds/snv/background3.webp\") center center,\n    url(\"assets/backgrounds/snv/background4.webp\") center center,\n    url(\"assets/backgrounds/snv/background5.webp\") center center;\n  background-size: cover;\n  color: white;\n  height: 100%;\n  font-family: \"Trade Gothic LT Std\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n}\n\n@mixin background(\n  $edition-selection,\n  $index-selection,\n  $edition-image,\n  $index-image\n) {\n  body:has(#app.#{$edition-selection}.background-#{$index-selection}) {\n    background: url(\"assets/backgrounds/#{$edition-image}/background#{$index-image}.webp\")\n      center center;\n    background-size: cover;\n  }\n}\n\n@include background(\"custom\", 1, \"custom\", 1);\n@include background(\"custom\", 2, \"custom\", 2);\n@include background(\"custom\", 3, \"custom\", 3);\n@include background(\"custom\", 4, \"custom\", 4);\n@include background(\"custom\", 5, \"custom\", 5);\n@include background(\"custom\", 6, \"custom\", 6);\n@include background(\"custom\", 7, \"custom\", 7);\n@include background(\"custom\", 8, \"custom\", 8);\n@include background(\"tb\", 1, \"tb\", 1);\n@include background(\"tb\", 2, \"tb\", 2);\n@include background(\"tb\", 3, \"tb\", 3);\n@include background(\"tb\", 4, \"tb\", 4);\n@include background(\"tb\", 5, \"tb\", 5);\n@include background(\"tb\", 6, \"custom\", 1);\n@include background(\"tb\", 7, \"custom\", 2);\n@include background(\"tb\", 8, \"custom\", 3);\n@include background(\"tb\", 9, \"custom\", 4);\n@include background(\"tb\", 10, \"custom\", 5);\n@include background(\"tb\", 11, \"custom\", 6);\n@include background(\"tb\", 12, \"custom\", 7);\n@include background(\"tb\", 13, \"custom\", 8);\n@include background(\"bmr\", 1, \"bmr\", 1);\n@include background(\"bmr\", 2, \"bmr\", 2);\n@include background(\"bmr\", 3, \"bmr\", 3);\n@include background(\"bmr\", 4, \"bmr\", 4);\n@include background(\"bmr\", 5, \"bmr\", 5);\n@include background(\"bmr\", 6, \"custom\", 1);\n@include background(\"bmr\", 7, \"custom\", 2);\n@include background(\"bmr\", 8, \"custom\", 3);\n@include background(\"bmr\", 9, \"custom\", 4);\n@include background(\"bmr\", 10, \"custom\", 5);\n@include background(\"bmr\", 11, \"custom\", 6);\n@include background(\"bmr\", 12, \"custom\", 7);\n@include background(\"bmr\", 13, \"custom\", 8);\n@include background(\"snv\", 1, \"snv\", 1);\n@include background(\"snv\", 2, \"snv\", 2);\n@include background(\"snv\", 3, \"snv\", 3);\n@include background(\"snv\", 4, \"snv\", 4);\n@include background(\"snv\", 5, \"snv\", 5);\n@include background(\"snv\", 6, \"custom\", 1);\n@include background(\"snv\", 7, \"custom\", 2);\n@include background(\"snv\", 8, \"custom\", 3);\n@include background(\"snv\", 9, \"custom\", 4);\n@include background(\"snv\", 10, \"custom\", 5);\n@include background(\"snv\", 11, \"custom\", 6);\n@include background(\"snv\", 12, \"custom\", 7);\n@include background(\"snv\", 13, \"custom\", 8);\n\n* {\n  box-sizing: border-box;\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\na {\n  color: $gold;\n  &:hover {\n    color: $light-purple;\n  }\n}\n\nh1,\nh2,\nh3,\nh4,\nh5 {\n  margin: 0;\n  text-align: center;\n  font-family:\n    Goudy StM,\n    sans-serif;\n  letter-spacing: 1px;\n  font-weight: normal;\n}\n\nul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n\n#app {\n  height: 100%;\n  background-position: center center;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  align-content: center;\n  justify-content: center;\n\n  // disable all animations\n  &.static *,\n  &.static *:after,\n  &.static *:before {\n    transition: none !important;\n    animation: none !important;\n  }\n}\n\n#version {\n  position: absolute;\n  text-align: right;\n  right: 10px;\n  bottom: 10px;\n  font-size: 60%;\n  opacity: 0.5;\n}\n\n.blur-enter-active,\n.blur-leave-active {\n  transition: all 250ms;\n  filter: blur(0);\n}\n.blur-enter,\n.blur-leave-to {\n  opacity: 0;\n  filter: blur(20px);\n}\n\n// Buttons\n.button-group {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  align-content: center;\n  .button {\n    margin: 5px 0;\n    border-radius: 0;\n    svg {\n      vertical-align: middle;\n    }\n    &:first-child {\n      border-top-left-radius: 15px;\n      border-bottom-left-radius: 15px;\n    }\n    &:last-child {\n      border-top-right-radius: 15px;\n      border-bottom-right-radius: 15px;\n    }\n  }\n}\n.button {\n  padding: 0;\n  border: solid 0.125em transparent;\n  border-radius: 15px;\n  box-shadow:\n    inset 0 1px 1px #9c9c9c,\n    0 0 10px #000;\n  background:\n    radial-gradient(at 0 -15%, rgba(#fff, 0.07) 70%, rgba(#fff, 0) 71%) 0 0/ 80%\n      90% no-repeat content-box,\n    linear-gradient(#4e4e4e, #040404) content-box,\n    linear-gradient(#292929, #010101) border-box;\n  color: white;\n  font-weight: bold;\n  font-family: \"Goudy StM\", sans-serif;\n  text-shadow: 1px 1px rgba(0, 0, 0, 0.5);\n  line-height: 170%;\n  margin: 5px auto;\n  cursor: pointer;\n  transition: all 200ms;\n  white-space: nowrap;\n  &:hover {\n    color: $gold;\n    &.purple-hover {\n      color: $light-purple;\n    }\n  }\n  &.disabled {\n    color: gray;\n    cursor: default;\n    opacity: 0.75;\n  }\n  &:before,\n  &:after {\n    content: \" \";\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n  }\n  &.gold {\n    background:\n      radial-gradient(\n          at 0 -15%,\n          rgba(255, 255, 255, 0.07) 70%,\n          rgba(255, 255, 255, 0) 71%\n        )\n        0 0/80% 90% no-repeat content-box,\n      linear-gradient(#ffb300, rgba(5, 0, 0, 0.22)) content-box,\n      linear-gradient(#292929, #6e5001) border-box;\n    box-shadow:\n      inset 0 1px 1px #bd8401,\n      0 0 10px #000;\n    &:hover:not(.disabled) {\n      color: #fdd716;\n    }\n  }\n  &.purple {\n    background:\n      radial-gradient(\n          at 0 -15%,\n          rgba(255, 255, 255, 0.07) 70%,\n          rgba(255, 255, 255, 0) 71%\n        )\n        0 0/80% 90% no-repeat content-box,\n      linear-gradient(#6c32be, rgba(5, 0, 0, 0.22)) content-box,\n      linear-gradient(#292929, #391b62) border-box;\n    box-shadow:\n      inset 0 1px 1px #50238c,\n      0 0 10px #000;\n    &:hover:not(.disabled) {\n      color: $light-purple;\n    }\n  }\n}\n\n/* video background */\nvideo#background {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* Night phase backdrop */\n#app > .backdrop {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  pointer-events: none;\n  background: black;\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 1) 0%,\n    rgba(1, 22, 46, 1) 50%,\n    rgba(0, 39, 70, 1) 100%\n  );\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 1s ease-in-out;\n  &:after {\n    content: \" \";\n    display: block;\n    width: 100%;\n    padding-right: 2000px;\n    height: 100%;\n    background: url(\"assets/clouds.webp\") repeat;\n    background-size: 2000px auto;\n    animation: move-background 120s linear infinite;\n    opacity: 0.3;\n  }\n}\n\n@keyframes move-background {\n  from {\n    transform: translate3d(-2000px, 0px, 0px);\n  }\n  to {\n    transform: translate3d(0px, 0px, 0px);\n  }\n}\n\n#app.night > .backdrop,\n#app.reveal > .backdrop {\n  opacity: 0.6;\n}\n</style>\n","import mod from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=243fdf8d\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=243fdf8d&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","class LiveSession {\n  constructor(store) {\n    this._wss = \"wss://server.botconline.xyz:8001/\";\n    // this._wss = \"ws://localhost:8001/\"; // uncomment if using local server with NODE_ENV=development\n    this._socket = null;\n    this._isSpectator = true;\n    this._gamestate = [];\n    this._store = store;\n    this._pingInterval = 30 * 1000; // 30 seconds between pings\n    this._pingTimer = null;\n    this._reconnectTimer = null;\n    this._players = {}; // map of players connected to a session\n    this._pings = {}; // map of player IDs to ping\n    // reconnect to previous session\n    if (this._store.state.session.sessionId) {\n      this.connect(this._store.state.session.sessionId);\n    }\n  }\n\n  /**\n   * Open a new session for the passed channel.\n   * @param channel\n   * @private\n   */\n  _open(channel) {\n    this.disconnect();\n    this._socket = new WebSocket(\n      this._wss +\n        channel +\n        \"/\" +\n        (this._isSpectator ? this._store.state.session.playerId : \"host\"),\n    );\n    this._socket.addEventListener(\"message\", this._handleMessage.bind(this));\n    this._socket.onopen = this._onOpen.bind(this);\n    this._socket.onclose = (err) => {\n      this._socket = null;\n      clearInterval(this._pingTimer);\n      this._pingTimer = null;\n      if (err.code !== 1000) {\n        // connection interrupted, reconnect after 3 seconds\n        this._store.commit(\"session/setReconnecting\", true);\n        this._reconnectTimer = setTimeout(\n          () => this.connect(channel),\n          3 * 1000,\n        );\n      } else {\n        this._store.commit(\"session/setSessionId\", \"\");\n        if (err.reason) alert(err.reason);\n      }\n    };\n  }\n\n  /**\n   * Send a message through the socket.\n   * @param command\n   * @param params\n   * @private\n   */\n  _send(command, params) {\n    if (this._socket && this._socket.readyState === 1) {\n      this._socket.send(JSON.stringify([command, params]));\n    }\n  }\n\n  /**\n   * Send a message directly to a single playerId, if provided.\n   * Otherwise broadcast it.\n   * @param playerId player ID or \"host\", optional\n   * @param command\n   * @param params\n   * @private\n   */\n  _sendDirect(playerId, command, params) {\n    if (playerId) {\n      this._send(\"direct\", { [playerId]: [command, params] });\n    } else {\n      this._send(command, params);\n    }\n  }\n\n  /**\n   * Open event handler for socket.\n   * @private\n   */\n  _onOpen() {\n    if (this._isSpectator) {\n      this._sendDirect(\n        \"host\",\n        \"getGamestate\",\n        this._store.state.session.playerId,\n      );\n    } else {\n      this.sendGamestate();\n    }\n    this._ping();\n  }\n\n  /**\n   * Send a ping message with player ID and ST flag.\n   * @private\n   */\n  _ping() {\n    this._handlePing();\n    this._send(\"ping\", [\n      this._isSpectator\n        ? this._store.state.session.playerId\n        : Object.keys(this._players).length,\n      \"latency\",\n    ]);\n    clearTimeout(this._pingTimer);\n    this._pingTimer = setTimeout(this._ping.bind(this), this._pingInterval);\n  }\n\n  /**\n   * Handle an incoming socket message.\n   * @param data\n   * @private\n   */\n  _handleMessage({ data }) {\n    let command, params;\n    try {\n      [command, params] = JSON.parse(data);\n    } catch (err) {\n      console.log(\"unsupported socket message\", data);\n    }\n    switch (command) {\n      case \"getGamestate\":\n        this.sendGamestate(params);\n        break;\n      case \"edition\":\n        this._updateEdition(params);\n        break;\n      case \"fabled\":\n        this._updateFabled(params);\n        break;\n      case \"gs\":\n        this._updateGamestate(params);\n        break;\n      case \"clear\":\n        if (!this._isSpectator) return;\n        this._store.dispatch(\"players/clearRoles\");\n        break;\n      case \"player\":\n        this._updatePlayer(params);\n        break;\n      case \"storyteller\":\n        this._updateStoryteller(params);\n        break;\n      case \"claim\":\n        this._updateSeat(params);\n        break;\n      case \"ping\":\n        this._handlePing(params);\n        break;\n      case \"nomination\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"session/nomination\", { nomination: params });\n        break;\n      case \"swap\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"players/swap\", params);\n        break;\n      case \"remove\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"players/remove\", params);\n        break;\n      case \"marked\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"session/setMarkedPlayer\", params);\n        break;\n      case \"raiseHand\":\n        this._store.commit(\"session/raiseHand\", params);\n        break;\n      case \"handsRaised\":\n        this._store.commit(\"session/setHandsRaised\", params);\n        break;\n      case \"reveal\":\n        this._updateReveal(params);\n        break;\n      case \"isNight\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"toggleNight\", params);\n        break;\n      case \"isVoteWatchingAllowed\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"session/setVoteWatchingAllowed\", params);\n        break;\n      case \"votingSpeed\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"session/setVotingSpeed\", params);\n        break;\n      case \"isVoteInProgress\":\n        if (!this._isSpectator) return;\n        this._store.commit(\"session/setVoteInProgress\", params);\n        break;\n      case \"vote\":\n        this._handleVote(params);\n        break;\n      case \"lock\":\n        this._handleLock(params);\n        break;\n      case \"bye\":\n        this._handleBye(params);\n        break;\n      case \"pronouns\":\n        this._updatePlayerPronouns(params);\n        break;\n      case \"stpronouns\":\n        this._updateStorytellerPronouns(params);\n        break;\n    }\n  }\n\n  /**\n   * Connect to a new live session, either as host or spectator.\n   * Set a unique playerId if there isn't one yet.\n   * @param channel\n   */\n  connect(channel) {\n    if (!this._store.state.session.playerId) {\n      this._store.commit(\n        \"session/setPlayerId\",\n        Math.random().toString(36).substr(2),\n      );\n    }\n    this._pings = {};\n    this._store.commit(\"session/setPlayerCount\", 0);\n    this._store.commit(\"session/setPing\", 0);\n    this._isSpectator = this._store.state.session.isSpectator;\n    if (this._isSpectator) {\n      this._store.commit(\"players/setExtraRoles\", {});\n      this._store.state.players.players = this._store.state.players.players.map(\n        (player) => ({\n          ...player,\n          isInvisibleDead: false,\n        }),\n      );\n    }\n    this._open(channel);\n  }\n\n  /**\n   * Close the current session, if any.\n   */\n  disconnect() {\n    this._pings = {};\n    this._store.commit(\"session/setPlayerCount\", 0);\n    this._store.commit(\"session/setPing\", 0);\n    this._store.commit(\"session/setReconnecting\", false);\n    clearTimeout(this._reconnectTimer);\n    if (this._socket) {\n      if (this._isSpectator) {\n        this._sendDirect(\"host\", \"bye\", this._store.state.session.playerId);\n      }\n      this._socket.close(1000);\n      this._socket = null;\n    }\n  }\n\n  /**\n   * Publish the current gamestate.\n   * Optional param to reduce traffic. (send only player data)\n   * @param playerId\n   * @param isLightweight\n   */\n  sendGamestate(playerId = \"\", isLightweight = false) {\n    if (this._isSpectator) return;\n    this._gamestate = this._store.state.players.players.map((player) => ({\n      name: player.name,\n      id: player.id,\n      isDead: player.isDead,\n      isVoteless: player.isVoteless,\n      hasDoubleVotes: player.hasDoubleVotes,\n      pronouns: player.pronouns,\n      ...(player.role && player.role.team === \"traveler\"\n        ? { roleId: player.role.id }\n        : {}),\n    }));\n    const storyteller = {\n      name: this._store.state.players.storyteller.name,\n      pronouns: this._store.state.players.storyteller.pronouns,\n    };\n    if (isLightweight) {\n      this._sendDirect(playerId, \"gs\", {\n        gamestate: this._gamestate,\n        storyteller: storyteller,\n        isLightweight,\n      });\n    } else {\n      const { session, grimoire } = this._store.state;\n      const { fabled } = this._store.state.players;\n      this.sendEdition(playerId);\n      this.sendReveal();\n      this._sendDirect(playerId, \"gs\", {\n        gamestate: this._gamestate,\n        isNight: grimoire.isNight,\n        isVoteWatchingAllowed: session.isVoteWatchingAllowed,\n        nomination: session.nomination,\n        votingSpeed: session.votingSpeed,\n        lockedVote: session.lockedVote,\n        isVoteInProgress: session.isVoteInProgress,\n        markedPlayer: session.markedPlayer,\n        fabled: fabled.map((f) => (f.isCustom ? f : { id: f.id })),\n        ...(session.nomination ? { votes: session.votes } : {}),\n        handsRaised: session.handsRaised,\n        storyteller: storyteller,\n      });\n    }\n  }\n\n  /**\n   * Update the gamestate based on incoming data.\n   * @param data\n   * @private\n   */\n  _updateGamestate(data) {\n    if (!this._isSpectator) return;\n    const {\n      gamestate,\n      isLightweight,\n      isNight,\n      isVoteWatchingAllowed,\n      nomination,\n      votingSpeed,\n      votes,\n      handsRaised,\n      lockedVote,\n      isVoteInProgress,\n      markedPlayer,\n      fabled,\n      storyteller,\n    } = data;\n    const players = this._store.state.players.players;\n    // adjust number of players\n    if (players.length < gamestate.length) {\n      for (let x = players.length; x < gamestate.length; x++) {\n        this._store.commit(\"players/add\", gamestate[x].name);\n      }\n    } else if (players.length > gamestate.length) {\n      for (let x = players.length; x > gamestate.length; x--) {\n        this._store.commit(\"players/remove\", x - 1);\n      }\n    }\n    // update status for each player\n    gamestate.forEach((state, x) => {\n      const player = players[x];\n      const { roleId } = state;\n      // update relevant properties\n      [\n        \"name\",\n        \"id\",\n        \"isDead\",\n        \"isVoteless\",\n        \"hasDoubleVotes\",\n        \"pronouns\",\n      ].forEach((property) => {\n        const value = state[property];\n        if (player[property] !== value) {\n          this._store.commit(\"players/update\", { player, property, value });\n        }\n      });\n      // roles are special, because of travelers\n      if (roleId && player.role.id !== roleId) {\n        const role =\n          this._store.state.roles.get(roleId) ||\n          this._store.getters.rolesJSONbyId.get(roleId);\n        if (role) {\n          this._store.commit(\"players/update\", {\n            player,\n            property: \"role\",\n            value: role,\n          });\n        }\n      } else if (!roleId && player.role.team === \"traveler\") {\n        this._store.commit(\"players/update\", {\n          player,\n          property: \"role\",\n          value: {},\n        });\n      }\n    });\n    [\"name\", \"pronouns\"].forEach((property) => {\n      const value = storyteller[property];\n      if (this._store.state.players.storyteller[property] !== value) {\n        this._store.commit(\"players/updateStoryteller\", { property, value });\n      }\n    });\n    if (!isLightweight) {\n      this._store.commit(\"toggleNight\", !!isNight);\n      this._store.commit(\n        \"session/setVoteWatchingAllowed\",\n        isVoteWatchingAllowed,\n      );\n      this._store.commit(\"session/nomination\", {\n        nomination,\n        votes,\n        votingSpeed,\n        lockedVote,\n        isVoteInProgress,\n      });\n      this._store.commit(\"session/setHandsRaised\", handsRaised);\n      this._store.commit(\"session/setMarkedPlayer\", markedPlayer);\n      this._store.commit(\"players/setFabled\", {\n        fabled: fabled.map((f) => this._store.state.fabled.get(f.id) || f),\n      });\n      this._store.commit(\"toggleFabled\", true);\n    }\n  }\n\n  /**\n   * Publish a grimoire clear event. ST only\n   */\n  sendClear() {\n    if (this._isSpectator) return;\n    this._send(\"clear\");\n  }\n\n  /**\n   * Publish an edition update. ST only\n   * @param playerId\n   */\n  sendEdition(playerId = \"\") {\n    if (this._isSpectator) return;\n    const { edition } = this._store.state;\n    let roles;\n    if (!edition.isOfficial) {\n      roles = this._store.getters.customRolesStripped;\n    }\n    this._sendDirect(playerId, \"edition\", {\n      edition: edition.isOfficial ? { id: edition.id } : edition,\n      ...(roles ? { roles } : {}),\n    });\n  }\n\n  /**\n   * Update edition and roles for custom editions.\n   * @param edition\n   * @param roles\n   * @private\n   */\n  _updateEdition({ edition, roles }) {\n    if (!this._isSpectator) return;\n    this._store.commit(\"setEdition\", edition);\n    if (roles) {\n      this._store.commit(\"setCustomRoles\", roles);\n      if (this._store.state.roles.size !== roles.length) {\n        const missing = [];\n        roles.forEach(({ id }) => {\n          if (!this._store.state.roles.get(id)) {\n            missing.push(id);\n          }\n        });\n        alert(\n          `This session contains custom characters that can't be found. ` +\n            `Please load them before joining! ` +\n            `Missing roles: ${missing.join(\", \")}`,\n        );\n        this.disconnect();\n        this._store.commit(\"toggleModal\", \"edition\");\n      }\n    }\n  }\n\n  /**\n   * Publish a fabled update. ST only\n   */\n  sendFabled() {\n    if (this._isSpectator) return;\n    const { fabled } = this._store.state.players;\n    this._send(\n      \"fabled\",\n      fabled.map((f) => (f.isCustom ? f : { id: f.id })),\n    );\n  }\n\n  /**\n   * Update fabled roles.\n   * @param fabled\n   * @private\n   */\n  _updateFabled(fabled) {\n    if (!this._isSpectator) return;\n    this._store.commit(\"players/setFabled\", {\n      fabled: fabled.map((f) => this._store.state.fabled.get(f.id) || f),\n    });\n    this._store.commit(\"toggleFabled\", true);\n  }\n\n  /**\n   * Publish a player update.\n   * @param player\n   * @param property\n   * @param value\n   */\n  sendPlayer({ player, property, value }) {\n    if (\n      this._isSpectator ||\n      property === \"reminders\" ||\n      property === \"hasResponded\" ||\n      property === \"isInvisibleDead\" ||\n      property === \"alignment\"\n    )\n      return;\n    const index = this._store.state.players.players.indexOf(player);\n    if (property === \"role\") {\n      if (value.team && value.team === \"traveler\") {\n        // update local gamestate to remember this player as a traveler\n        this._gamestate[index].roleId = value.id;\n        this._send(\"player\", {\n          index,\n          property,\n          value: value.id,\n        });\n      } else if (this._gamestate[index].roleId) {\n        // player was previously a traveler\n        delete this._gamestate[index].roleId;\n        this._send(\"player\", { index, property, value: \"\" });\n      }\n    } else {\n      this._send(\"player\", { index, property, value });\n    }\n  }\n\n  sendStoryteller({ property, value }) {\n    if (\n      this._isSpectator ||\n      property === \"reminders\" ||\n      property === \"hasResponded\" ||\n      property === \"role\"\n    )\n      return;\n    this._send(\"storyteller\", { property, value });\n  }\n\n  /**\n   * Update a player based on incoming data. Player only.\n   * @param index\n   * @param property\n   * @param value\n   * @private\n   */\n  _updatePlayer({ index, property, value }) {\n    if (!this._isSpectator) return;\n    const player = this._store.state.players.players[index];\n    if (!player) return;\n    // special case where a player stops being a traveler\n    if (property === \"role\") {\n      if (!value && player.role.team === \"traveler\") {\n        // reset to an unknown role\n        this._store.commit(\"players/update\", {\n          player,\n          property: \"role\",\n          value: {},\n        });\n      } else {\n        // load role, first from session, the global, then fail gracefully\n        const role =\n          this._store.state.roles.get(value) ||\n          this._store.getters.rolesJSONbyId.get(value) ||\n          {};\n        if (\n          player.id === this._store.state.session.playerId &&\n          role.team !== \"traveler\"\n        ) {\n          this._store.commit(\"session/spin\");\n          this._store.dispatch(\"players/clearRoles\");\n        }\n        this._store.commit(\"players/update\", {\n          player,\n          property: \"role\",\n          value: role,\n        });\n      }\n    } else {\n      this._store.commit(\"players/update\", { player, property, value });\n    }\n  }\n\n  _updateStoryteller({ property, value }) {\n    if (property !== \"role\" && this._isSpectator) {\n      this._store.commit(\"players/updateStoryteller\", { property, value });\n    }\n  }\n\n  /**\n   * Publish a player pronouns update\n   * @param player\n   * @param value\n   * @param isFromSockets\n   */\n  sendPlayerPronouns({ player, value, isFromSockets }) {\n    //send pronoun only for the seated player or storyteller\n    //Do not re-send pronoun data for an update that was recieved from the sockets layer\n    if (\n      isFromSockets ||\n      (this._isSpectator && this._store.state.session.playerId !== player.id)\n    )\n      return;\n    const index = this._store.state.players.players.indexOf(player);\n    this._send(\"pronouns\", [index, value]);\n  }\n\n  sendStorytellerPronouns({ value, isFromSockets }) {\n    //send pronoun only for the seated player or storyteller\n    //Do not re-send pronoun data for an update that was recieved from the sockets layer\n    if (isFromSockets || this._isSpectator) return;\n    this._send(\"stpronouns\", value);\n  }\n\n  /**\n   * Update a pronouns based on incoming data.\n   * @param index\n   * @param value\n   * @private\n   */\n  _updatePlayerPronouns([index, value]) {\n    const player = this._store.state.players.players[index];\n\n    this._store.commit(\"players/update\", {\n      player,\n      property: \"pronouns\",\n      value,\n      isFromSockets: true,\n    });\n  }\n\n  _updateStorytellerPronouns(value) {\n    this._store.commit(\"players/updateStoryteller\", {\n      property: \"pronouns\",\n      value,\n      isFromSockets: true,\n    });\n  }\n\n  /**\n   * Handle a ping message by another player / storyteller\n   * @param playerIdOrCount\n   * @param latency\n   * @private\n   */\n  _handlePing([playerIdOrCount = 0, latency] = []) {\n    const now = new Date().getTime();\n    if (!this._isSpectator) {\n      // remove players that haven't sent a ping in twice the timespan\n      for (let player in this._players) {\n        if (now - this._players[player] > this._pingInterval * 2) {\n          delete this._players[player];\n          delete this._pings[player];\n        }\n      }\n      // remove claimed seats from players that are no longer connected\n      this._store.state.players.players.forEach((player) => {\n        if (player.id && !this._players[player.id]) {\n          this._store.commit(\"players/update\", {\n            player,\n            property: \"id\",\n            value: \"\",\n          });\n        }\n      });\n      // store new player data\n      if (playerIdOrCount) {\n        this._players[playerIdOrCount] = now;\n        const ping = parseInt(latency, 10);\n        if (ping && ping > 0 && ping < 30 * 1000) {\n          // ping to Players\n          this._pings[playerIdOrCount] = ping;\n          const pings = Object.values(this._pings);\n          this._store.commit(\n            \"session/setPing\",\n            Math.round(pings.reduce((a, b) => a + b, 0) / pings.length),\n          );\n        }\n      }\n    } else if (latency) {\n      // ping to ST\n      this._store.commit(\"session/setPing\", parseInt(latency, 10));\n    }\n    // update player count\n    if (!this._isSpectator || playerIdOrCount) {\n      this._store.commit(\n        \"session/setPlayerCount\",\n        this._isSpectator ? playerIdOrCount : Object.keys(this._players).length,\n      );\n    }\n  }\n\n  /**\n   * Handle a player leaving the sessions. ST only\n   * @param playerId\n   * @private\n   */\n  _handleBye(playerId) {\n    if (this._isSpectator) return;\n    delete this._players[playerId];\n    this._store.commit(\n      \"session/setPlayerCount\",\n      Object.keys(this._players).length,\n    );\n  }\n\n  /**\n   * Claim a seat, needs to be confirmed by the Storyteller.\n   * Seats already occupied can't be claimed.\n   * @param seat either -1 to vacate or the index of the seat claimed\n   */\n  claimSeat(seat) {\n    if (!this._isSpectator) return;\n    const players = this._store.state.players.players;\n    if (players.length > seat && (seat < 0 || !players[seat].id)) {\n      this._send(\"claim\", [seat, this._store.state.session.playerId]);\n    }\n  }\n\n  /**\n   * Update a player id associated with that seat.\n   * @param index seat index or -1\n   * @param value playerId to add / remove\n   * @private\n   */\n  _updateSeat([index, value]) {\n    if (this._isSpectator) return;\n    const property = \"id\";\n    const players = this._store.state.players.players;\n    // remove previous seat\n    const oldIndex = players.findIndex(({ id }) => id === value);\n    if (oldIndex >= 0 && oldIndex !== index) {\n      this._store.commit(\"players/update\", {\n        player: players[oldIndex],\n        property,\n        value: \"\",\n      });\n    }\n    // add playerId to new seat\n    if (index >= 0) {\n      const player = players[index];\n      if (!player) return;\n      this._store.commit(\"players/update\", { player, property, value });\n    }\n    // update player session list as if this was a ping\n    this._handlePing([true, value, 0]);\n  }\n\n  /**\n   * Distribute player roles to all seated players in a direct message.\n   * This will be split server side so that each player only receives their own (sub)message.\n   */\n  distributeRoles() {\n    if (this._isSpectator) return;\n    const message = {};\n    this._store.state.players.players.forEach((player, index) => {\n      if (player.id && player.role) {\n        message[player.id] = [\n          \"player\",\n          { index, property: \"role\", value: player.role.id },\n        ];\n      }\n    });\n    if (Object.keys(message).length) {\n      this._send(\"direct\", message);\n    }\n  }\n\n  /**\n   * A player nomination. ST only\n   * This also syncs the voting speed to the players.\n   * Payload can be an object with {nomination} property or just the nomination itself, or undefined.\n   * @param payload [nominator, nominee]|{nomination}\n   */\n  nomination(payload) {\n    if (this._isSpectator) return;\n    const nomination = payload ? payload.nomination || payload : payload;\n    const players = this._store.state.players.players;\n    if (\n      !nomination ||\n      (players.length > nomination[0] && players.length > nomination[1])\n    ) {\n      this.setVotingSpeed(this._store.state.session.votingSpeed);\n      this._send(\"nomination\", nomination);\n    }\n  }\n\n  /**\n   * Set the isVoteInProgress status. ST only\n   */\n  setVoteInProgress() {\n    if (this._isSpectator) return;\n    this._send(\"isVoteInProgress\", this._store.state.session.isVoteInProgress);\n  }\n\n  /**\n   * Send the isNight status. ST only\n   */\n  setIsNight() {\n    if (this._isSpectator) return;\n    this._send(\"isNight\", this._store.state.grimoire.isNight);\n  }\n\n  /**\n   * Send the isVoteWatchingAllowed state. ST only\n   */\n  setVoteWatchingAllowed() {\n    if (this._isSpectator) return;\n    this._send(\n      \"isVoteWatchingAllowed\",\n      this._store.state.session.isVoteWatchingAllowed,\n    );\n  }\n\n  /**\n   * Send the voting speed. ST only\n   * @param votingSpeed voting speed in seconds, minimum 1\n   */\n  setVotingSpeed(votingSpeed) {\n    if (this._isSpectator) return;\n    if (votingSpeed) {\n      this._send(\"votingSpeed\", votingSpeed);\n    }\n  }\n\n  /**\n   * Set which player is on the block. ST only\n   * @param playerIndex, player id or -1 for empty\n   */\n  setMarked(playerIndex) {\n    if (this._isSpectator) return;\n    this._send(\"marked\", playerIndex);\n  }\n\n  /**\n   * Send a hand raise. Player only\n   * @param index Seat of the player\n   */\n  raiseHand([index]) {\n    const player = this._store.state.players.players[index];\n    if (this._store.state.session.playerId === player.id) {\n      // send hand only if it is your own hand\n      this._send(\"raiseHand\", [\n        index,\n        this._store.state.session.handsRaised[index],\n      ]);\n    }\n  }\n\n  /**\n   * Send all hands. ST only\n   */\n  setHandsRaised() {\n    if (this._isSpectator) return;\n    this._send(\"handsRaised\", this._store.state.session.handsRaised);\n  }\n\n  /**\n   * Send reveal state. ST only\n   */\n  sendReveal() {\n    if (this._isSpectator) return;\n    const revealedPlayers = this._store.state.session.revealedPlayers;\n    let revealedTokens = [];\n    for (let i = 0; i < revealedPlayers.length; i++) {\n      if (revealedPlayers[i]) {\n        revealedTokens = [...revealedTokens];\n        revealedTokens[i] = {\n          revealed: true,\n          role: this._store.state.players.players[i].role.id,\n          alignment: this._store.state.players.players[i].alignment,\n        };\n      }\n    }\n    this._send(\"reveal\", {\n      isRevealInProgress: this._store.state.session.reveal,\n      winningTeam: this._store.state.session.winningTeam,\n      revealedTokens: revealedTokens,\n    });\n  }\n\n  /**\n   * Receive reveal state. Player only\n   */\n  _updateReveal({ isRevealInProgress, winningTeam, revealedTokens }) {\n    if (!this._isSpectator) return;\n    const revealedPlayers = revealedTokens.map((token) =>\n      token ? token.revealed : null,\n    );\n    this._store.commit(\"session/setReveal\", {\n      isRevealInProgress,\n      winningTeam,\n      revealedPlayers,\n    });\n    for (let i = 0; i < revealedTokens.length; i++) {\n      if (!revealedTokens[i]) continue;\n      const player = this._store.state.players.players[i];\n      const role =\n        this._store.state.roles.get(revealedTokens[i].role) ||\n        this._store.getters.rolesJSONbyId.get(revealedTokens[i].role) ||\n        {};\n      this._store.commit(\"players/update\", {\n        player,\n        property: \"role\",\n        value: role,\n      });\n      if (revealedTokens[i].alignment) {\n        this._store.commit(\"players/update\", {\n          player,\n          property: \"alignment\",\n          value: revealedTokens[i].alignment,\n        });\n      }\n    }\n  }\n\n  /**\n   * Send a vote. Player or ST\n   * @param index Seat of the player\n   * @param sync Flag whether to sync this vote with others or not\n   */\n  vote([index]) {\n    const player = this._store.state.players.players[index];\n    if (\n      this._store.state.session.playerId === player.id ||\n      !this._isSpectator\n    ) {\n      // send vote only if it is your own vote or you are the storyteller\n      this._send(\"vote\", [\n        index,\n        this._store.state.session.votes[index],\n        !this._isSpectator,\n      ]);\n    }\n  }\n\n  /**\n   * Handle an incoming vote, but only if it is from ST or unlocked.\n   * @param index\n   * @param vote\n   * @param fromST\n   */\n  _handleVote([index, vote, fromST]) {\n    const { session, players } = this._store.state;\n    const playerCount = players.players.length;\n    const indexAdjusted =\n      (index - 1 + playerCount - session.nomination[1]) % playerCount;\n    if (fromST || indexAdjusted >= session.lockedVote - 1) {\n      this._store.commit(\"session/vote\", [index, vote]);\n    }\n  }\n\n  /**\n   * Lock a vote. ST only\n   */\n  lockVote() {\n    if (this._isSpectator) return;\n    const { lockedVote, votes, nomination } = this._store.state.session;\n    const { players } = this._store.state.players;\n    const index = (nomination[1] + lockedVote - 1) % players.length;\n    this._send(\"lock\", [this._store.state.session.lockedVote, votes[index]]);\n  }\n\n  /**\n   * Update vote lock and the locked vote, if it differs. Player only\n   * @param lock\n   * @param vote\n   * @private\n   */\n  _handleLock([lock, vote]) {\n    if (!this._isSpectator) return;\n    this._store.commit(\"session/lockVote\", lock);\n    if (lock > 1) {\n      const { lockedVote, nomination } = this._store.state.session;\n      const { players } = this._store.state.players;\n      const index = (nomination[1] + lockedVote - 1) % players.length;\n      if (this._store.state.session.votes[index] !== vote) {\n        this._store.commit(\"session/vote\", [index, vote]);\n      }\n    }\n  }\n\n  /**\n   * Swap two player seats. ST only\n   * @param payload\n   */\n  swapPlayer(payload) {\n    if (this._isSpectator) return;\n    this._send(\"swap\", payload);\n  }\n\n  /**\n   * Remove a player. ST only\n   * @param payload\n   */\n  removePlayer(payload) {\n    if (this._isSpectator) return;\n    this._send(\"remove\", payload);\n    this._gamestate.splice(payload, 1);\n  }\n}\n\nexport default (store) => {\n  // setup\n  const session = new LiveSession(store);\n\n  // listen to actions\n  store.subscribeAction(({ type }) => {\n    if (type === \"players/clearRoles\") {\n      session.sendClear();\n    }\n  });\n\n  // listen to mutations\n  store.subscribe(({ type, payload }, state) => {\n    switch (type) {\n      case \"session/setSessionId\":\n        if (state.session.sessionId) {\n          session.connect(state.session.sessionId);\n        } else {\n          window.location.hash = \"\";\n          session.disconnect();\n        }\n        break;\n      case \"session/claimSeat\":\n        session.claimSeat(payload);\n        break;\n      case \"session/distributeRoles\":\n        if (payload) {\n          session.distributeRoles();\n        }\n        break;\n      case \"session/raiseHand\":\n        session.raiseHand(payload);\n        break;\n      case \"session/setHandsRaised\":\n        session.setHandsRaised();\n        break;\n      case \"session/reveal\":\n      case \"session/setReveal\":\n        session.sendReveal();\n        break;\n      case \"session/nomination\":\n      case \"session/setNomination\":\n        session.nomination(payload);\n        break;\n      case \"session/setVoteInProgress\":\n        session.setVoteInProgress(payload);\n        break;\n      case \"session/voteSync\":\n        session.vote(payload);\n        break;\n      case \"session/lockVote\":\n        session.lockVote();\n        break;\n      case \"session/setVotingSpeed\":\n        session.setVotingSpeed(payload);\n        break;\n      case \"session/setVoteWatchingAllowed\":\n        session.setVoteWatchingAllowed();\n        break;\n      case \"toggleNight\":\n        session.setIsNight();\n        break;\n      case \"setEdition\":\n        session.sendEdition();\n        break;\n      case \"players/setFabled\":\n        session.sendFabled();\n        break;\n      case \"session/setMarkedPlayer\":\n        session.setMarked(payload);\n        break;\n      case \"players/swap\":\n        session.swapPlayer(payload);\n        break;\n      case \"players/remove\":\n        session.removePlayer(payload);\n        break;\n      case \"players/set\":\n      case \"players/setStoryteller\":\n      case \"players/clear\":\n      case \"players/add\":\n        session.sendGamestate(\"\", true);\n        break;\n      case \"players/update\":\n        if (payload.property === \"pronouns\") {\n          session.sendPlayerPronouns(payload);\n        } else {\n          session.sendPlayer(payload);\n        }\n        break;\n      case \"players/updateStoryteller\":\n        if (payload.property === \"pronouns\") {\n          session.sendStorytellerPronouns(payload);\n        } else {\n          session.sendStoryteller(payload);\n        }\n        break;\n    }\n  });\n\n  // check for session Id in hash\n  const sessionId = window.location.hash.substr(1);\n  if (sessionId) {\n    store.commit(\"session/setSpectator\", true);\n    store.commit(\"session/setSessionId\", sessionId);\n    store.commit(\"toggleGrimoire\", false);\n  }\n};\n","const NEWPLAYER = {\n  name: \"\",\n  id: \"\",\n  role: {},\n  reminders: [],\n  isVoteless: false,\n  hasDoubleVotes: false,\n  hasResponded: {},\n  isDead: false,\n  isInvisibleDead: false,\n  pronouns: \"\",\n  alignment: \"\",\n};\n\nconst NEWSTORYTELLER = {\n  name: \"Storyteller\",\n  role: {},\n  reminders: [],\n  pronouns: \"\",\n};\n\nconst state = () => ({\n  players: [],\n  storyteller: NEWSTORYTELLER,\n  fabled: [],\n  bluffs: [{}, {}, {}, {}, {}, {}],\n  extraRoles: [],\n});\n\nconst getters = {\n  alive({ players }) {\n    return players.filter((player) => !player.isDead).length;\n  },\n  nonTravelers({ players }) {\n    const nonTravelers = players.filter(\n      (player) => player.role.team !== \"traveler\",\n    );\n    return Math.min(nonTravelers.length, 15);\n  },\n  // calculate a Map of player => night order\n  nightOrder({ players, storyteller, extraRoles, fabled }, getters, rootState) {\n    const firstNight = [0];\n    const otherNight = [0];\n    players\n      .map((player) => player.role)\n      .concat([storyteller.role], extraRoles, fabled)\n      .forEach((role) => {\n        role.firstNightInEdition = rootState.edition.firstNight\n          ? rootState.edition.firstNight.includes(role.id)\n            ? rootState.edition.firstNight.indexOf(role.id) + 2\n            : 0\n          : role.firstNight;\n        role.otherNightInEdition = rootState.edition.otherNight\n          ? rootState.edition.otherNight.includes(role.id)\n            ? rootState.edition.otherNight.indexOf(role.id) + 2\n            : 0\n          : role.otherNight;\n        if (\n          role.firstNightInEdition > 0 &&\n          !firstNight.includes(role.firstNightInEdition)\n        ) {\n          firstNight.push(role.firstNightInEdition);\n        }\n        if (\n          role.otherNightInEdition > 0 &&\n          !otherNight.includes(role.otherNightInEdition)\n        ) {\n          otherNight.push(role.otherNightInEdition);\n        }\n      });\n    firstNight.sort((a, b) => a - b);\n    otherNight.sort((a, b) => a - b);\n    const nightOrder = new Map();\n    players.concat([storyteller]).forEach((player) => {\n      const first = Math.max(\n        firstNight.indexOf(player.role.firstNightInEdition),\n        0,\n      );\n      const other = Math.max(\n        otherNight.indexOf(player.role.otherNightInEdition),\n        0,\n      );\n      nightOrder.set(player, { first, other });\n    });\n    extraRoles.concat(fabled).forEach((role) => {\n      const first = Math.max(firstNight.indexOf(role.firstNightInEdition), 0);\n      const other = Math.max(otherNight.indexOf(role.otherNightInEdition), 0);\n      nightOrder.set(role, { first, other });\n    });\n    return nightOrder;\n  },\n};\n\nconst actions = {\n  randomize({ state, commit }) {\n    const players = state.players\n      .map((a) => [Math.random(), a])\n      .sort((a, b) => a[0] - b[0])\n      .map((a) => a[1]);\n    commit(\"set\", players);\n  },\n  clearRoles({ state, commit, rootState }) {\n    let players;\n    if (rootState.session.isSpectator) {\n      players = state.players.map((player) => {\n        if (player.role.team !== \"traveler\") {\n          player.role = {};\n        }\n        player.reminders = [];\n        return player;\n      });\n    } else {\n      players = state.players.map(({ name, id, pronouns }) => ({\n        ...NEWPLAYER,\n        name,\n        id,\n        pronouns,\n      }));\n    }\n    const name = state.storyteller.name;\n    const pronouns = state.storyteller.pronouns;\n    commit(\"set\", players);\n    commit(\"setStoryteller\", {\n      ...NEWSTORYTELLER,\n      name,\n      pronouns,\n    });\n    commit(\"setBluff\");\n    commit(\"setExtraRoles\");\n  },\n};\n\nconst mutations = {\n  clear(state) {\n    state.players = [];\n    state.storyteller = NEWSTORYTELLER;\n    state.bluffs = [{}, {}, {}, {}, {}, {}];\n    state.extraRoles = [];\n    state.fabled = [];\n  },\n  set(state, players = []) {\n    state.players = players;\n  },\n  setStoryteller(state, storyteller) {\n    state.storyteller = storyteller;\n  },\n  /**\n  The update mutation also has a property for isFromSockets\n  this property can be added to payload object for any mutations\n  then can be used to prevent infinite loops when a property is\n  able to be set from multiple different session on websockets.\n  An example of this is in the sendPlayerPronouns and _updatePlayerPronouns\n  in socket.js.\n   */\n  update(state, { player, property, value }) {\n    const index = state.players.indexOf(player);\n    if (index >= 0) {\n      state.players[index][property] = value;\n      if (property === \"role\" && value) {\n        state.players[index].alignment =\n          value.team === \"townsfolk\" || value.team === \"outsider\"\n            ? \"g\"\n            : value.team === \"minion\" || value.team === \"demon\"\n              ? \"e\"\n              : \"n\";\n      }\n    }\n  },\n  updateStoryteller(state, { property, value }) {\n    state.storyteller[property] = value;\n  },\n  add(state, name) {\n    state.players.push({\n      ...NEWPLAYER,\n      name,\n    });\n  },\n  remove(state, index) {\n    state.players.splice(index, 1);\n  },\n  swap(state, [from, to]) {\n    [state.players[from], state.players[to]] = [\n      state.players[to],\n      state.players[from],\n    ];\n    // hack: \"modify\" the array so that Vue notices something changed\n    state.players.splice(0, 0);\n  },\n  setBluff(state, { index, role } = {}) {\n    if (index !== undefined) {\n      state.bluffs.splice(index, 1, role);\n    } else {\n      state.bluffs = [{}, {}, {}, {}, {}, {}];\n    }\n  },\n  setExtraRoles(state, { index, role } = {}) {\n    if (index !== undefined) {\n      state.extraRoles.splice(index, 1);\n    } else if (role) {\n      if (!Array.isArray(role)) {\n        state.extraRoles.push(role);\n      } else {\n        state.extraRoles = role;\n      }\n    } else {\n      state.extraRoles.splice(0, state.extraRoles.length);\n    }\n  },\n  setFabled(state, { index, fabled } = {}) {\n    if (index !== undefined) {\n      state.fabled.splice(index, 1);\n    } else if (fabled) {\n      if (!Array.isArray(fabled)) {\n        state.fabled.push(fabled);\n      } else {\n        state.fabled = fabled;\n      }\n    } else {\n      state.fabled.splice(0, state.fabled.length);\n    }\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations,\n};\n","/**\n * Handle a vote request.\n * If the vote is from a seat that is already locked, ignore it.\n * @param state session state\n * @param index seat of the player in the circle\n * @param vote number of votes\n */\nconst handleVote = (state, [index, vote]) => {\n  if (!state.nomination) return;\n  state.votes = [...state.votes];\n  state.votes[index] =\n    vote === undefined ? Math.abs(state.votes[index] - 1) : vote;\n};\n\nconst state = () => ({\n  sessionId: \"\",\n  isSpectator: false,\n  isReconnecting: false,\n  playerCount: 0,\n  ping: 0,\n  playerId: \"\",\n  claimedSeat: -1,\n  nomination: false,\n  reveal: false,\n  revealedPlayers: [],\n  winningTeam: \"\",\n  votes: [],\n  handsRaised: [],\n  lockedVote: 0,\n  votingSpeed: 1000,\n  isVoteInProgress: false,\n  isTokenSpinning: false,\n  voteHistory: [],\n  markedPlayer: -1,\n  isVoteWatchingAllowed: true,\n  isRolesDistributed: false,\n  messages: [],\n});\n\nconst getters = {};\n\nconst actions = {};\n\n// mutations helper functions\nconst set = (key) => (state, val) => {\n  state[key] = val;\n};\n\nconst mutations = {\n  setPlayerId: set(\"playerId\"),\n  setSpectator: set(\"isSpectator\"),\n  setReconnecting: set(\"isReconnecting\"),\n  setPlayerCount: set(\"playerCount\"),\n  setPing: set(\"ping\"),\n  setVotingSpeed: set(\"votingSpeed\"),\n  setVoteInProgress: set(\"isVoteInProgress\"),\n  setMarkedPlayer: set(\"markedPlayer\"),\n  setNomination: set(\"nomination\"),\n  setVoteWatchingAllowed: set(\"isVoteWatchingAllowed\"),\n  claimSeat: set(\"claimedSeat\"),\n  distributeRoles: set(\"isRolesDistributed\"),\n  setHandsRaised: set(\"handsRaised\"),\n  raiseHand(state, [index, hand]) {\n    state.handsRaised = [...state.handsRaised];\n    state.handsRaised[index] =\n      hand === undefined ? !state.handsRaised[index] : hand;\n  },\n  spin(state) {\n    state.isTokenSpinning = true;\n    setTimeout(() => {\n      state.isTokenSpinning = false;\n    }, 3000);\n  },\n  setSessionId(state, sessionId) {\n    state.sessionId = sessionId\n      .toLocaleLowerCase()\n      .replace(/[^0-9a-z]/g, \"\")\n      .substr(0, 10);\n  },\n  nomination(\n    state,\n    { nomination, votes, votingSpeed, lockedVote, isVoteInProgress } = {},\n  ) {\n    state.nomination = nomination || false;\n    state.votes = votes || [];\n    state.votingSpeed = votingSpeed || state.votingSpeed;\n    state.lockedVote = lockedVote || 0;\n    state.isVoteInProgress = isVoteInProgress || false;\n  },\n  /**\n   * Create an entry in the vote history log. Requires current player array because it might change later in the game.\n   * Only stores votes that were completed.\n   * @param state\n   * @param players\n   */\n  addHistory(state, players) {\n    if (state.isSpectator) return;\n    if (!state.nomination || state.lockedVote <= players.length) return;\n    const isExile = players[state.nomination[1]].role.team === \"traveler\";\n    state.voteHistory.push({\n      timestamp: new Date(),\n      nominator: players[state.nomination[0]].name,\n      nominee: players[state.nomination[1]].name,\n      type: isExile ? \"Exile\" : \"Execution\",\n      majority: Math.ceil(\n        players.filter((player) => !player.isDead || isExile).length / 2,\n      ),\n      voters: players\n        .filter((player, index) => state.votes[index])\n        .map(({ name }) => name),\n      votes: players\n        .map((player, index) =>\n          state.votes[index] === undefined ? 0 : state.votes[index],\n        )\n        .reduce((a, b) => a + b),\n    });\n  },\n  clearVoteHistory(state) {\n    state.voteHistory = [];\n  },\n  /**\n   * Store a vote with and without syncing it to the live session.\n   * This is necessary in order to prevent infinite voting loops.\n   * @param state\n   * @param vote\n   */\n  vote: handleVote,\n  voteSync: handleVote,\n  lockVote(state, lock) {\n    state.lockedVote = lock !== undefined ? lock : state.lockedVote + 1;\n  },\n  setReveal(\n    state,\n    { isRevealInProgress = true, winningTeam, revealedPlayers },\n  ) {\n    state.reveal = isRevealInProgress;\n    if (isRevealInProgress === false) {\n      state.revealedPlayers = [];\n      state.winningTeam = \"\";\n    } else {\n      if (revealedPlayers) {\n        state.revealedPlayers = revealedPlayers;\n      }\n      if (winningTeam) {\n        state.winningTeam = winningTeam;\n      }\n    }\n  },\n  reveal(state, index) {\n    if (state.isSpectator) return;\n    state.revealedPlayers = [...state.revealedPlayers];\n    state.revealedPlayers[index] = true;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations,\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport persistence from \"./persistence\";\nimport socket from \"./socket\";\nimport players from \"./modules/players\";\nimport session from \"./modules/session\";\nimport editionJSON from \"../editions.json\";\nimport rolesJSON from \"../roles.json\";\nimport fabledJSON from \"../fabled.json\";\nimport jinxesJSON from \"../hatred.json\";\n\nVue.use(Vuex);\n\n// helper functions\nconst getRolesByEdition = (edition = editionJSON[0]) => {\n  return new Map(\n    rolesJSON\n      .filter((r) => r.edition === edition.id || edition.roles.includes(r.id))\n      .sort((a, b) => b.team.localeCompare(a.team))\n      .map((role) => [role.id, role]),\n  );\n};\n\nconst getTravelersNotInEdition = (edition = editionJSON[0]) => {\n  return new Map(\n    rolesJSON\n      .filter(\n        (r) =>\n          r.team === \"traveler\" &&\n          r.edition !== edition.id &&\n          !edition.roles.includes(r.id),\n      )\n      .map((role) => [role.id, role]),\n  );\n};\n\nconst set =\n  (key) =>\n  ({ grimoire }, val) => {\n    grimoire[key] = val;\n  };\n\nconst toggle =\n  (key) =>\n  ({ grimoire }, val) => {\n    if (val === true || val === false) {\n      grimoire[key] = val;\n    } else {\n      grimoire[key] = !grimoire[key];\n    }\n  };\n\nconst clean = (id) => id.toLocaleLowerCase().replace(/[^a-z0-9]/g, \"\");\n\n// global data maps\nconst editionJSONbyId = new Map(\n  editionJSON.map((edition) => [edition.id, edition]),\n);\nconst rolesJSONbyId = new Map(rolesJSON.map((role) => [role.id, role]));\nconst fabled = new Map(fabledJSON.map((role) => [role.id, role]));\n\n// jinxes\nlet jinxes = {};\ntry {\n  jinxes = new Map(\n    jinxesJSON.map(({ id, hatred }) => [\n      clean(id),\n      new Map(hatred.map(({ id, reason }) => [clean(id), reason])),\n    ]),\n  );\n} catch (e) {\n  console.error(\"couldn't load jinxes\", e);\n}\n\n// base definition for custom roles\nconst customRole = {\n  id: \"\",\n  name: \"\",\n  image: \"\",\n  ability: \"\",\n  edition: \"custom\",\n  firstNight: 0,\n  firstNightReminder: \"\",\n  otherNight: 0,\n  otherNightReminder: \"\",\n  reminders: [],\n  remindersGlobal: [],\n  setup: false,\n  team: \"townsfolk\",\n  special: [],\n  isCustom: true,\n};\n\nexport default new Vuex.Store({\n  modules: {\n    players,\n    session,\n  },\n  state: {\n    grimoire: {\n      isNight: false,\n      isNightOrder: false,\n      isPublic: false,\n      isFabledOpen: true,\n      isBluffsOpen: true,\n      isExtraBluffs: false,\n      isMenuOpen: false,\n      isStatic: false,\n      isMuted: false,\n      isImageOptIn: false,\n      zoom: 0,\n      background: \"\",\n      defaultBaseBackgroundIndex: 0,\n      defaultCustomBackgroundIndex: 0,\n    },\n    modals: {\n      edition: false,\n      fabled: false,\n      gameState: false,\n      messages: false,\n      nightOrder: false,\n      reference: false,\n      reminder: false,\n      role: false,\n      extraRoles: false,\n      roles: false,\n      voteHistory: false,\n    },\n    edition: editionJSONbyId.get(\"tb\"),\n    roles: getRolesByEdition(),\n    otherTravelers: getTravelersNotInEdition(),\n    fabled,\n    jinxes,\n  },\n  getters: {\n    /**\n     * Return all custom roles, with default values and non-essential data stripped.\n     * Role object keys will be replaced with a numerical index to conserve bandwidth.\n     * @param roles\n     * @returns {[]}\n     */\n    customRolesStripped: ({ roles }) => {\n      const customRoles = [];\n      const customKeys = Object.keys(customRole);\n      const strippedProps = [];\n      roles.forEach((role) => {\n        if (!role.isCustom) {\n          customRoles.push({ id: role.id });\n        } else {\n          const strippedRole = {};\n          for (let prop in role) {\n            if (strippedProps.includes(prop)) {\n              continue;\n            }\n            const value = role[prop];\n            if (customKeys.includes(prop) && value !== customRole[prop]) {\n              strippedRole[customKeys.indexOf(prop)] = value;\n            }\n          }\n          customRoles.push(strippedRole);\n        }\n      });\n      return customRoles;\n    },\n    rolesJSONbyId: () => rolesJSONbyId,\n  },\n  mutations: {\n    setZoom: set(\"zoom\"),\n    setBackground: set(\"background\"),\n    setDefaultBaseBackgroundIndex({ grimoire }, val) {\n      grimoire.defaultBaseBackgroundIndex = val;\n\n      if (grimoire.defaultBaseBackgroundIndex > 12) {\n        grimoire.defaultBaseBackgroundIndex -= 13;\n      } else if (grimoire.defaultBaseBackgroundIndex < 0) {\n        grimoire.defaultBaseBackgroundIndex += 13;\n      }\n    },\n    setDefaultCustomBackgroundIndex({ grimoire }, val) {\n      grimoire.defaultCustomBackgroundIndex = val;\n\n      if (grimoire.defaultCustomBackgroundIndex > 7) {\n        grimoire.defaultCustomBackgroundIndex -= 8;\n      } else if (grimoire.defaultCustomBackgroundIndex < 0) {\n        grimoire.defaultCustomBackgroundIndex += 8;\n      }\n    },\n    toggleMuted: toggle(\"isMuted\"),\n    toggleMenu: toggle(\"isMenuOpen\"),\n    toggleNightOrder: toggle(\"isNightOrder\"),\n    toggleStatic: toggle(\"isStatic\"),\n    toggleNight({ grimoire, players }, val) {\n      // Reset the hasResponded var for the next night.\n      players.players.map((player) => {\n        player.hasResponded = {};\n      });\n\n      // This function can be called with an explicit value pushed from the\n      // socket. In that case, the value the host has declared takes effect,\n      // assuming it is at least a valid boolean.\n      if (val === true || val === false) {\n        grimoire.isNight = val;\n      } else {\n        grimoire.isNight = !grimoire.isNight;\n      }\n    },\n    toggleGrimoire: toggle(\"isPublic\"),\n    toggleFabled: toggle(\"isFabledOpen\"),\n    toggleBluffs: toggle(\"isBluffsOpen\"),\n    toggleExtraBluffs: toggle(\"isExtraBluffs\"),\n    toggleImageOptIn: toggle(\"isImageOptIn\"),\n    toggleModal({ modals }, name) {\n      if (name) {\n        modals[name] = !modals[name];\n      }\n      for (let modal in modals) {\n        if (modal === name) continue;\n        modals[modal] = false;\n      }\n    },\n    /**\n     * Store custom roles\n     * @param state\n     * @param roles Array of role IDs or full role definitions\n     */\n    setCustomRoles(state, roles) {\n      const processedRoles = roles\n        // replace numerical role object keys with matching key names\n        .map((role) => {\n          if (role[0]) {\n            const customKeys = Object.keys(customRole);\n            const mappedRole = {};\n            for (let prop in role) {\n              if (customKeys[prop]) {\n                mappedRole[customKeys[prop]] = role[prop];\n              }\n            }\n            return mappedRole;\n          } else {\n            return role;\n          }\n        })\n        // clean up role.id\n        .map((role) => {\n          role.id = clean(role.id);\n          return role;\n        })\n        // map existing roles to base definition or pre-populate custom roles to ensure all properties\n        .map(\n          (role) =>\n            rolesJSONbyId.get(role.id) ||\n            state.roles.get(role.id) ||\n            Object.assign({}, customRole, role),\n        )\n        // default empty icons and placeholders, clean up firstNight / otherNight\n        .map((role) => {\n          if (rolesJSONbyId.get(role.id)) return role;\n          role.imageAlt = // map team to generic icon\n            {\n              townsfolk: \"townsfolk\",\n              outsider: \"outsider\",\n              minion: \"minion\",\n              demon: \"demon\",\n              traveler: \"traveler\",\n              fabled: \"fabled\",\n            }[role.team] || \"custom\";\n          return role;\n        })\n        // filter out roles that don't match an existing role and also don't have name/ability/team\n        .filter((role) => role.name && role.ability && role.team)\n        // sort by team\n        .sort((a, b) => b.team.localeCompare(a.team));\n      // convert to Map without Fabled\n      state.roles = new Map(\n        processedRoles\n          .filter((role) => role.team !== \"fabled\")\n          .map((role) => [role.id, role]),\n      );\n      // update Fabled to include custom Fabled from this script\n      state.fabled = new Map([\n        ...processedRoles\n          .filter((r) => r.team === \"fabled\")\n          .map((r) => [r.id, r]),\n        ...fabledJSON.map((role) => [role.id, role]),\n      ]);\n      // update extraTravelers map to only show travelers not in this script\n      state.otherTravelers = new Map(\n        rolesJSON\n          .filter(\n            (r) => r.team === \"traveler\" && !roles.some((i) => i.id === r.id),\n          )\n          .map((role) => [role.id, role]),\n      );\n    },\n    setEdition(state, edition) {\n      if (editionJSONbyId.has(edition.id)) {\n        state.edition = editionJSONbyId.get(edition.id);\n        state.roles = getRolesByEdition(state.edition);\n        state.otherTravelers = getTravelersNotInEdition(state.edition);\n      } else {\n        state.edition = edition;\n      }\n      state.modals.edition = false;\n      state.session.isVoteWatchingAllowed = true;\n    },\n  },\n  plugins: [persistence, socket],\n});\n","import Vue from \"vue\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\nimport { fab } from \"@fortawesome/free-brands-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nconst faIcons = [\n  \"AddressCard\",\n  \"BookOpen\",\n  \"BookSkull\",\n  \"Chair\",\n  \"CheckToSlot\",\n  \"CircleChevronLeft\",\n  \"CircleChevronRight\",\n  \"CircleMinus\",\n  \"CirclePlus\",\n  \"CircleXmark\",\n  \"CloudMoon\",\n  \"Copy\",\n  \"Clipboard\",\n  \"Dice\",\n  \"Dragon\",\n  \"EyeSlash\",\n  \"FileCode\",\n  \"FileArrowUp\",\n  \"Gear\",\n  \"Hand\",\n  \"HandPointRight\",\n  \"Image\",\n  \"Link\",\n  \"MagnifyingGlassMinus\",\n  \"MagnifyingGlassPlus\",\n  \"MasksTheater\",\n  \"PaperPlane\",\n  \"PeopleArrows\",\n  \"Question\",\n  \"RightLeft\",\n  \"RotateLeft\",\n  \"RotateRight\",\n  \"Shuffle\",\n  \"Skull\",\n  \"Square\",\n  \"SquareCheck\",\n  \"ThumbsDown\",\n  \"ThumbsUp\",\n  \"TowerCell\",\n  \"TrashCan\",\n  \"TriangleExclamation\",\n  \"User\",\n  \"UserFriends\",\n  \"UserPen\",\n  \"Users\",\n  \"VenusMars\",\n  \"VolumeHigh\",\n  \"VolumeXmark\",\n  \"WindowMaximize\",\n  \"WindowMinimize\",\n  \"Xmark\",\n  \"YinYang\",\n];\nconst fabIcons = [\"Github\", \"Discord\"];\nlibrary.add(\n  ...faIcons.map((i) => fas[\"fa\" + i]),\n  ...fabIcons.map((i) => fab[\"fa\" + i]),\n);\nVue.component(\"font-awesome-icon\", FontAwesomeIcon);\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n  store,\n}).$mount(\"#app\");\n","module.exports = (store) => {\n  const updatePagetitle = (isPublic) =>\n    (document.title = `Blood on the Clocktower ${\n      isPublic ? \"Town Square\" : \"Grimoire\"\n    }`);\n\n  // initialize data\n  if (localStorage.getItem(\"background\")) {\n    store.commit(\"setBackground\", localStorage.background);\n  }\n  if (localStorage.getItem(\"defaultBaseBackgroundIndex\")) {\n    store.commit(\n      \"setDefaultBaseBackgroundIndex\",\n      parseFloat(localStorage.getItem(\"defaultBaseBackgroundIndex\")),\n    );\n  }\n  if (localStorage.getItem(\"defaultCustomBackgroundIndex\")) {\n    store.commit(\n      \"setDefaultCustomBackgroundIndex\",\n      parseFloat(localStorage.getItem(\"defaultCustomBackgroundIndex\")),\n    );\n  }\n  if (localStorage.getItem(\"muted\")) {\n    store.commit(\"toggleMuted\", true);\n  }\n  if (localStorage.getItem(\"static\")) {\n    store.commit(\"toggleStatic\", true);\n  }\n  if (localStorage.getItem(\"imageOptIn\")) {\n    store.commit(\"toggleImageOptIn\", true);\n  }\n  if (localStorage.getItem(\"zoom\")) {\n    store.commit(\"setZoom\", parseFloat(localStorage.getItem(\"zoom\")));\n  }\n  if (localStorage.getItem(\"isGrimoire\")) {\n    store.commit(\"toggleGrimoire\", false);\n    updatePagetitle(false);\n  }\n  if (localStorage.getItem(\"isFabledOpen\")) {\n    store.commit(\"toggleFabled\", false);\n  }\n  if (localStorage.getItem(\"isBluffsOpen\")) {\n    store.commit(\"toggleBluffs\", false);\n  }\n  if (localStorage.getItem(\"isExtraBluffs\")) {\n    store.commit(\"toggleExtraBluffs\", true);\n  }\n  if (localStorage.roles !== undefined) {\n    store.commit(\"setCustomRoles\", JSON.parse(localStorage.roles));\n    store.commit(\"setEdition\", { id: \"custom\" });\n  }\n  if (localStorage.edition !== undefined) {\n    // this will initialize state.roles for official editions\n    store.commit(\"setEdition\", JSON.parse(localStorage.edition));\n  }\n  if (localStorage.bluffs !== undefined) {\n    JSON.parse(localStorage.bluffs).forEach((role, index) => {\n      store.commit(\"players/setBluff\", {\n        index,\n        role: store.state.roles.get(role) || {},\n      });\n    });\n  }\n  if (localStorage.extraRoles !== undefined) {\n    store.commit(\"players/setExtraRoles\", {\n      role: JSON.parse(localStorage.extraRoles).map(\n        (role) => store.state.roles.get(role) || {},\n      ),\n    });\n  }\n  if (localStorage.fabled !== undefined) {\n    store.commit(\"players/setFabled\", {\n      fabled: JSON.parse(localStorage.fabled).map(\n        (fabled) => store.state.fabled.get(fabled.id) || fabled,\n      ),\n    });\n  }\n  if (localStorage.players) {\n    store.commit(\n      \"players/set\",\n      JSON.parse(localStorage.players).map((player) => ({\n        ...player,\n        role:\n          store.state.roles.get(player.role) ||\n          store.getters.rolesJSONbyId.get(player.role) ||\n          {},\n      })),\n    );\n  }\n  if (localStorage.storyteller) {\n    const storyteller = JSON.parse(localStorage.storyteller);\n    store.commit(\"players/setStoryteller\", {\n      ...storyteller,\n      role:\n        store.state.roles.get(storyteller.role) ||\n        store.getters.rolesJSONbyId.get(storyteller.role) ||\n        {},\n    });\n  }\n  /**** Session related data *****/\n  if (localStorage.getItem(\"playerId\")) {\n    store.commit(\"session/setPlayerId\", localStorage.getItem(\"playerId\"));\n  }\n  if (localStorage.getItem(\"session\") && !window.location.hash.substr(1)) {\n    const [spectator, sessionId] = JSON.parse(localStorage.getItem(\"session\"));\n    store.commit(\"session/setSpectator\", spectator);\n    store.commit(\"session/setSessionId\", sessionId);\n  }\n\n  // listen to mutations\n  store.subscribe(({ type, payload }, state) => {\n    switch (type) {\n      case \"toggleGrimoire\":\n        if (!state.grimoire.isPublic) {\n          localStorage.setItem(\"isGrimoire\", 1);\n        } else {\n          localStorage.removeItem(\"isGrimoire\");\n        }\n        updatePagetitle(state.grimoire.isPublic);\n        break;\n      case \"toggleFabled\":\n        if (!state.grimoire.isFabledOpen) {\n          localStorage.setItem(\"isFabledOpen\", 1);\n        } else {\n          localStorage.removeItem(\"isFabledOpen\");\n        }\n        break;\n      case \"toggleBluffs\":\n        if (!state.grimoire.isBluffsOpen) {\n          localStorage.setItem(\"isBluffsOpen\", 1);\n        } else {\n          localStorage.removeItem(\"isBluffsOpen\");\n        }\n        break;\n      case \"toggleExtraBluffs\":\n        if (state.grimoire.isExtraBluffs) {\n          localStorage.setItem(\"isExtraBluffs\", 1);\n        } else {\n          localStorage.removeItem(\"isExtraBluffs\");\n        }\n        break;\n      case \"setBackground\":\n        if (payload) {\n          localStorage.setItem(\"background\", payload);\n        } else {\n          localStorage.removeItem(\"background\");\n        }\n        break;\n      case \"setDefaultBaseBackgroundIndex\":\n        if (state.grimoire.defaultBaseBackgroundIndex !== 0) {\n          localStorage.setItem(\n            \"defaultBaseBackgroundIndex\",\n            state.grimoire.defaultBaseBackgroundIndex,\n          );\n        } else {\n          localStorage.removeItem(\"defaultBaseBackgroundIndex\");\n        }\n        break;\n      case \"setDefaultCustomBackgroundIndex\":\n        if (state.grimoire.defaultCustomBackgroundIndex !== 0) {\n          localStorage.setItem(\n            \"defaultCustomBackgroundIndex\",\n            state.grimoire.defaultCustomBackgroundIndex,\n          );\n        } else {\n          localStorage.removeItem(\"defaultCustomBackgroundIndex\");\n        }\n        break;\n      case \"toggleMuted\":\n        if (state.grimoire.isMuted) {\n          localStorage.setItem(\"muted\", 1);\n        } else {\n          localStorage.removeItem(\"muted\");\n        }\n        break;\n      case \"toggleStatic\":\n        if (state.grimoire.isStatic) {\n          localStorage.setItem(\"static\", 1);\n        } else {\n          localStorage.removeItem(\"static\");\n        }\n        break;\n      case \"toggleImageOptIn\":\n        if (state.grimoire.isImageOptIn) {\n          localStorage.setItem(\"imageOptIn\", 1);\n        } else {\n          localStorage.removeItem(\"imageOptIn\");\n        }\n        break;\n      case \"setZoom\":\n        if (payload !== 0) {\n          localStorage.setItem(\"zoom\", payload);\n        } else {\n          localStorage.removeItem(\"zoom\");\n        }\n        break;\n      case \"setEdition\":\n        localStorage.setItem(\"edition\", JSON.stringify(payload));\n        if (state.edition.isOfficial) {\n          localStorage.removeItem(\"roles\");\n        }\n        break;\n      case \"setCustomRoles\":\n        if (!payload.length) {\n          localStorage.removeItem(\"roles\");\n        } else {\n          localStorage.setItem(\"roles\", JSON.stringify(payload));\n        }\n        break;\n      case \"players/setBluff\":\n        localStorage.setItem(\n          \"bluffs\",\n          JSON.stringify(state.players.bluffs.map(({ id }) => id)),\n        );\n        break;\n      case \"players/setExtraRoles\":\n        localStorage.setItem(\n          \"extraRoles\",\n          JSON.stringify(state.players.extraRoles.map(({ id }) => id)),\n        );\n        break;\n      case \"players/setFabled\":\n        localStorage.setItem(\n          \"fabled\",\n          JSON.stringify(\n            state.players.fabled.map((fabled) =>\n              fabled.isCustom ? fabled : { id: fabled.id },\n            ),\n          ),\n        );\n        break;\n      case \"players/clear\":\n        localStorage.setItem(\n          \"bluffs\",\n          JSON.stringify(state.players.bluffs.map(({ id }) => id)),\n        );\n        localStorage.setItem(\n          \"extraRoles\",\n          JSON.stringify(state.players.extraRoles.map(({ id }) => id)),\n        );\n        localStorage.setItem(\n          \"fabled\",\n          JSON.stringify(\n            state.players.fabled.map((fabled) =>\n              fabled.isCustom ? fabled : { id: fabled.id },\n            ),\n          ),\n        );\n        if (state.players.players.length) {\n          localStorage.setItem(\n            \"players\",\n            JSON.stringify(\n              state.players.players.map((player) => ({\n                ...player,\n                // simplify the stored data\n                role: player.role.id || {},\n              })),\n            ),\n          );\n        } else {\n          localStorage.removeItem(\"players\");\n        }\n        break;\n      case \"players/add\":\n      case \"players/update\":\n      case \"players/remove\":\n      case \"players/set\":\n      case \"players/swap\":\n        if (state.players.players.length) {\n          localStorage.setItem(\n            \"players\",\n            JSON.stringify(\n              state.players.players.map((player) => ({\n                ...player,\n                // simplify the stored data\n                role: player.role.id || {},\n              })),\n            ),\n          );\n        } else {\n          localStorage.removeItem(\"players\");\n        }\n        break;\n      case \"players/updateStoryteller\":\n      case \"players/setStoryteller\":\n        localStorage.setItem(\n          \"storyteller\",\n          JSON.stringify({\n            ...state.players.storyteller,\n            // simplify the stored data\n            role: state.players.storyteller.role.id || {},\n          }),\n        );\n        break;\n      case \"session/setSessionId\":\n        if (payload) {\n          localStorage.setItem(\n            \"session\",\n            JSON.stringify([state.session.isSpectator, payload]),\n          );\n        } else {\n          localStorage.removeItem(\"session\");\n        }\n        break;\n      case \"session/setPlayerId\":\n        if (payload) {\n          localStorage.setItem(\"playerId\", payload);\n        } else {\n          localStorage.removeItem(\"playerId\");\n        }\n        break;\n    }\n  });\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktownsquare\"] = self[\"webpackChunktownsquare\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], () => (__webpack_require__(6782)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","render","_vm","this","_c","_self","class","night","grimoire","isNight","reveal","session","static","isStatic","edition","players","length","isOfficial","defaultBaseBackgroundIndex","defaultCustomBackgroundIndex","style","backgroundImage","background","attrs","on","keyup","$event","type","indexOf","_k","keyCode","key","space","apply","arguments","match","_e","staticClass","nomination","ref","_v","_s","version","staticRenderFns","public","isPublic","spectator","isSpectator","host","sessionId","spin","isTokenSpinning","vote","voteWatching","isVoteWatchingAllowed","_l","player","index","from","Math","max","swap","nominate","handleTrigger","storyteller","fabled","closed","isFabledOpen","role","removeFabled","shown","nightOrder","get","first","isNightOrder","domProps","firstNightReminder","other","otherNightReminder","isBluffsOpen","double","isExtraBluffs","index1","index2","openRoleModal","bluffs","extraRoles","removeExtraRoles","selectedPlayer","deathReminder","dead","isDead","isInvisibleDead","marked","markedPlayer","handsRaised","isMenuOpen","isVoteless","you","playerId","votes","voteLocked","revealed","revealedPlayers","team","alignment","clickShroud","toggleStatus","clickToken","changeCharacter","changeAlignment","changePronouns","disabled","lockedVote","swapPlayer","changeName","removePlayer","updatePlayer","nominatePlayer","claimSeat","cancel","highlight","isRolesDistributed","active","name","pronouns","reminder","custom","flipped","image","isImageOptIn","Array","isArray","imageAlt","flipReminder","removeReminder","$emit","getEdition","getCustomRoleIconIndex","getAlignment","firstNight","otherNight","reminderLeaves","_f","ability","props","default","String","computed","reminders","remindersGlobal","data","filters","nameToFontSize","methods","component","components","Token","required","indexAdjusted","zoom","width","isSwap","newAlignment","prompt","filter","$store","commit","Boolean","setTimeout","isRevealInProgress","property","value","splice","closeMenu","hasDoubleVotes","updateStoryteller","modals","close","addReminder","purple","tab","stopPropagation","_t","isMaximized","mapReminder","Modal","availableReminders","relevantReminders","otherReminders","state","roles","forEach","some","p","r","reminder1","reminder2","push","otherTravelers","isDeath","playerIndex","newReminder","toggleModal","queryMatches","setRole","size","directives","rawName","expression","target","composing","query","availableRoles","slice","bluff","isDisplayed","displayedRoles","values","simplify","str","replaceAll","toLowerCase","startsWith","event","matchingRoles","watch","$nextTick","$refs","searchInput","focus","Player","Storyteller","RoleModal","ReminderModal","bluffSets","method","params","openReminderModal","openDeathReminderModal","confirm","includes","to","undefined","swapTo","updatedNomination","nom","logo","author","teams","traveler","alive","townsfolk","minion","outsider","demon","nonTravelers","getters","reconnecting","isReconnecting","playerCount","ping","leaveSession","open","toggleMenu","clearRoles","toggleGrimoire","toggleFabled","toggleBluffs","toggleExtraBluffs","toggleNight","toggleNightOrder","setZoom","min","round","setDefaultBackgroundIndex","setBackground","imageOptIn","toggleStatic","toggleMuted","isMuted","copySessionUrl","voteHistory","hostSession","joinSession","addPlayer","randomizeSeatings","clearPronouns","forceHandsDown","clearPlayers","distributeRoles","revealGrimoire","newBackground","random","url","window","location","href","split","link","navigator","clipboard","writeText","popup","bind","toReversed","rolesJSONbyId","toggleImageOptIn","pop","dispatch","resetRoles","teamRoles","reduce","a","selected","game","special","checked","allowMultiple","_i","$$a","$$el","$$c","$$v","$$i","concat","selectedRoles","assignRoles","shuffleRoles","roleSelection","b","hasSelectedSetupRoles","setup","$set","randomIndex","currentIndex","floor","fill","sort","mounted","isCustom","handleUpload","openUpload","promptURL","readFromClipboard","setBaseEdition","editions","scripts","upload","click","file","files","reader","FileReader","addEventListener","JSON","parse","result","parseRoles","console","log","alert","message","readAsText","handleURL","res","fetch","json","script","text","readText","setEdition","metaIndex","findIndex","meta","assign","has","jinxed","jinxes","reason","second","language","userLanguage","reference","playersByRole","join","jinx","rolesGrouped","voteCount","nominee","ceil","currentVote","isVoteInProgress","preventDefault","setVotingSpeed","votingSpeed","secretVoteAllowed","setVoteWatching","countdown","start","pause","voteTimer","stop","finish","setMarked","removeMarked","nominator","nominatorStyle","transform","transitionDuration","nomineeStyle","counterStyle","lock","rotation","height","find","canVote","x","reorder","setInterval","clearInterval","diff","speed","gradient","gradients","isStoryteller","extraRole","setResponded","hasResponded","rolesFirstNight","i","rolesOtherNight","roleId","setFabled","fable","clearVoteHistory","timestamp","getHours","toString","padStart","getMinutes","majority","voters","gamestate","input","select","load","stringify","customRolesStripped","f","winningTeam","gameResult","GameResult","ExtraRolesModal","GameStateModal","VoteHistoryModal","FabledModal","NightOrderModal","Vote","ReferenceModal","Intro","TownInfo","TownSquare","Menu","EditionModal","RolesModal","Gradients","ctrlKey","metaKey","toLocaleLowerCase","menu","LiveSession","constructor","store","_wss","_socket","_isSpectator","_gamestate","_store","_pingInterval","_pingTimer","_reconnectTimer","_players","_pings","connect","_open","channel","disconnect","WebSocket","_handleMessage","onopen","_onOpen","onclose","err","_send","command","readyState","send","_sendDirect","sendGamestate","_ping","_handlePing","clearTimeout","_updateEdition","_updateFabled","_updateGamestate","_updatePlayer","_updateStoryteller","_updateSeat","_updateReveal","_handleVote","_handleLock","_handleBye","_updatePlayerPronouns","_updateStorytellerPronouns","substr","isLightweight","sendEdition","sendReveal","sendClear","missing","sendFabled","sendPlayer","sendStoryteller","sendPlayerPronouns","isFromSockets","sendStorytellerPronouns","playerIdOrCount","latency","now","Date","getTime","parseInt","pings","seat","oldIndex","payload","setVoteInProgress","setIsNight","setVoteWatchingAllowed","raiseHand","setHandsRaised","revealedTokens","token","fromST","lockVote","subscribeAction","subscribe","hash","NEWPLAYER","NEWSTORYTELLER","rootState","firstNightInEdition","otherNightInEdition","Map","set","actions","randomize","mutations","clear","setStoryteller","update","add","remove","setBluff","setExtraRoles","namespaced","handleVote","abs","claimedSeat","messages","val","setPlayerId","setSpectator","setReconnecting","setPlayerCount","setPing","setMarkedPlayer","setNomination","hand","setSessionId","replace","addHistory","isExile","voteSync","setReveal","use","getRolesByEdition","localeCompare","getTravelersNotInEdition","toggle","clean","editionJSONbyId","hatred","error","customRole","modules","gameState","customRoles","customKeys","strippedProps","strippedRole","prop","setDefaultBaseBackgroundIndex","setDefaultCustomBackgroundIndex","modal","setCustomRoles","processedRoles","mappedRole","plugins","socket","faIcons","fabIcons","config","productionTip","h","App","$mount","updatePagetitle","document","title","localStorage","getItem","parseFloat","removeItem","setItem","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","n","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","obj","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}